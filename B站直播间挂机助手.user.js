// ==UserScript==
// @namespace     https://github.com/andywang425
// @name          B站直播间挂机助手
// @name:en       B站直播间挂机助手
// @author        andywang425
// @description   自动参与Bilibili直播区抽奖(现在极少)，完成每日任务，领银瓜子宝箱，自动送礼，自动获取小心心，批量点亮勋章
// @description:en 自动参与Bilibili直播区抽奖(现在极少)，完成每日任务，领银瓜子宝箱，自动送礼，自动获取小心心，批量点亮勋章
// @updateURL     https://raw.githubusercontent.com/andywang425/Bilibili-SGTH/master/B%E7%AB%99%E7%9B%B4%E6%92%AD%E9%97%B4%E6%8C%82%E6%9C%BA%E5%8A%A9%E6%89%8B.user.js
// @downloadURL    https://raw.githubusercontent.com/andywang425/Bilibili-SGTH/master/B%E7%AB%99%E7%9B%B4%E6%92%AD%E9%97%B4%E6%8C%82%E6%9C%BA%E5%8A%A9%E6%89%8B.user.js
// @homepageURL   https://github.com/andywang425/BLTH/
// @supportURL    https://github.com/andywang425/BLTH/issues
// @icon          https://s1.hdslb.com/bfs/live/d57afb7c5596359970eb430655c6aef501a268ab.png
// @copyright     2020, andywang425 (https://github.com/andywang425)
// @license       MIT
// @version       4.0.3
// @include      /https?:\/\/live\.bilibili\.com\/[blanc\/]?[^?]*?\d+\??.*/
// @run-at       document-end
// @connect      passport.bilibili.com
// @connect      api.live.bilibili.com
// @connect      live-trace.bilibili.com
//@require https://cdn.jsdelivr.net/gh/jquery/jquery@3.2.1/dist/jquery.min.js
//@require https://cdn.jsdelivr.net/gh/andywang425/Bilibili-SGTH@v1.4/BilibiliAPI_Mod.min.js
//@require https://cdn.jsdelivr.net/gh/andywang425/Bilibili-SGTH@v1.3.2/OCRAD.min.js
//@require https://cdn.jsdelivr.net/gh/andywang425/Bilibili-SGTH@v1.3.4/libBilibiliToken.user.js
// @grant       unsafeWindow
// @grant       GM_xmlhttpRequest
// @grant       GM_openInTab
// ==/UserScript==
'use strict';var _Mathmax=Math.max,_Mathmin=Math.min,_Mathfloor=Math.floor,_Mathround=Math.round,_typeof='function'==typeof Symbol&&'symbol'==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&'function'==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?'symbol':typeof o};function _defineProperty(o,l,_){return l in o?Object.defineProperty(o,l,{value:_,enumerable:!0,configurable:!0,writable:!0}):o[l]=_,o}function _asyncToGenerator(o){return function(){var l=o.apply(this,arguments);return new Promise(function(_,u){function I(T,f){try{var E=l[T](f),O=E.value}catch(C){return void u(C)}return E.done?void _(O):Promise.resolve(O).then(function(C){I('next',C)},function(C){I('throw',C)})}return I('next')})}}(function(){var R=this,N='IGIFTMSG',D=localStorage.getItem(N+'_msgHide')||'hide',M=BilibiliAPI,L=0,S=0,F=0,w=!1,U=[],k=[],H=new Date().getTimezoneOffset()+480,B=function ts_ms(){return Date.now()},P=function ts_s(){return _Mathround(B()/1e3)},Y={room_id:void 0,uid:void 0,ruid:void 0,mobile_verify:void 0,gift_list:void 0,rnd:void 0,visit_id:void 0,identification:void 0,bili_jct:void 0},X=function runUntilSucceed(se){var le=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0,_e=2<arguments.length&&arguments[2]!==void 0?arguments[2]:100;setTimeout(function(){se()||X(se,_e,_e)},le)},V=function delayCall(se){var le=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1e4,_e=$.Deferred();return setTimeout(function(){var ge=se();ge&&ge.then?ge.then(function(ue,ce,Ie,pe,Te,fe){return _e.resolve(ue,ce,Ie,pe,Te,fe)}):_e.resolve()},le),_e},K=function MYDEBUG(se){for(var le=arguments.length,_e=Array(1<le?le-1:0),ge=1;ge<le;ge++)_e[ge-1]=arguments[ge];var ue=new Date;return ue='['+N+']['+ue.getHours()+':'+ue.getMinutes()+':'+ue.getSeconds()+':'+ue.getMilliseconds()+']',1===_e.length?void console.log(ue,se+':',_e[0]):void console.log(ue,se+':',_e)},Q=function runMidnight(se,le){var _e=new Date;_e.setMinutes(_e.getMinutes()+H),_e.setDate(_e.getDate()+1),_e.setHours(0,1,0,0),_e.setMinutes(_e.getMinutes()-H),setTimeout(se,_e-B()),K('runMidnight',(le||' ')+' '+_e.toString())},z=function runExactMidnight(se,le){var _e=new Date;_e.setMinutes(_e.getMinutes()+H),_e.setDate(_e.getDate()+1),_e.setHours(0,0,0,0),_e.setMinutes(_e.getMinutes()-H),setTimeout(se,_e-B()),K('runExactMidnight',(le||' ')+' '+_e.toString())},Z=function runTomorrow(se,le,_e,ge){var ue=new Date;ue.setMinutes(ue.getMinutes()+H),ue.setDate(ue.getDate()+1),ue.setHours(le,_e,0,0),ue.setMinutes(ue.getMinutes()-H),setTimeout(se,ue-B()),K('runTomorrow',(ge||' ')+' '+ue.toString())},J=new BilibiliToken,ee='actionKey=appkey&appkey='+BilibiliToken.appKey+'&build=5561000&channel=bili&device=android&mobi_app=android&platform=android&statistics=%7B%22appId%22%3A1%2C%22platform%22%3A3%2C%22version%22%3A%225.57.0%22%2C%22abtest%22%3A%22%22%7D',te=void 0,ie=JSON.parse(localStorage.getItem(N+'_userToken'))||{},ae=function(){var se=_asyncToGenerator(regeneratorRuntime.mark(function le(){return regeneratorRuntime.wrap(function(ge){for(;;)switch(ge.prev=ge.next){case 0:if(!(ie.time>P())){ge.next=4;break}te=te,ge.next=10;break;case 4:return ge.next=6,J.getToken();case 6:ie=ge.sent,ie.time=P()+ie.expires_in,localStorage.setItem(N+'_Token',JSON.stringify(ie)),te=ie;case 10:;return K(N+'_userToken',ie),ge.abrupt('return','OK');case 13:case'end':return ge.stop();}},le,R)}));return function setToken(){return se.apply(this,arguments)}}(),oe={init:function init(){return oe.Toast.init().then(function(){})},Toast:{init:function init(){try{var se=[];return window.toast=function(le){var _e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:'info',ge=2<arguments.length&&void 0!==arguments[2]?arguments[2]:5e3;switch(_e){case'success':case'info':break;case'caution':break;case'error':break;default:_e='info';}var ue=$('<div class="link-toast '+_e+' fixed"><span class="toast-text">'+le+'</span></div>')[0];document.body.appendChild(ue),ue.style.top=document.body.scrollTop+40*se.length+10+'px',ue.style.left=document.body.offsetWidth+document.body.scrollLeft-ue.offsetWidth-5+'px','hide'==D&&$('.link-toast').hide(),se.push(ue),setTimeout(function(){ue.className+=' out',setTimeout(function(){se.shift(),se.forEach(function(ce){ce.style.top=parseInt(ce.style.top,10)-40+'px'}),$(ue).remove()},200)},ge)},$.Deferred().resolve()}catch(se){return console.error('\u521D\u59CB\u5316\u6D6E\u52A8\u63D0\u793A\u65F6\u51FA\u73B0\u5F02\u5E38',se),$.Deferred().reject()}}}};function o(){$('head').append('\n        <style>\n            .igiftMsg_input{\n                outline: none;\n                border: 1px solid #e9eaec;\n                background-color: #fff;\n                border-radius: 4px;\n                padding: 1px 0 0;\n                overflow: hidden;\n                font-size: 12px;\n                line-height: 19px;\n                width: 30px;\n                \'z-index\': \'10001\';\n            }\n            .igiftMsg_btn{\n                background-color: #23ade5;\n                color: #fff;\n                border-radius: 4px;\n                border: none;\n                padding: 5px;\n                cursor: pointer;\n                box-shadow: 0 0 2px #00000075;\n                line-height: 10px;\n                \'z-index\': \'10001\';\n            }\n            .igiftMsg_fs{\n                border: 2px solid #d4d4d4;\n                \'z-index\': \'10001\';\n            }\n        </style>\n            ')}function l(){var le,se=this,_e={CONFIG_DEFAULT:{AUTO_GIFT:!1,AUTO_GIFT_ROOMID:'0',AUTO_GROUP_SIGN:!0,AUTO_TREASUREBOX:!0,CHECK_HOUR_ROOM_INTERVAL:120,COIN:!1,COIN_NUMBER:0,COIN_TYPE:'COIN_DYN',COIN_UID:0,EXCLUDE_ROOMID:'0',FORCE_LOTTERY:!1,FORCE_LIGHT:!1,GIFT_LIMIT:1,GIFT_SEND_HOUR:23,GIFT_SEND_MINUTE:59,GIFT_INTERVAL:5,GIFT_METHOD:'GIFT_SEND_TIME',GIFT_SORT:!1,IN_TIME_RELOAD_DISABLE:!1,LIVE_SIGN:!0,LOGIN:!0,LITTLE_HEART:!1,LIGHT_MEDALS:'0',LIGHT_METHOD:'LIGHT_WHITE',MAX_GIFT:99999,MAX_TAB:5,MOBILE_HEARTBEAT:!0,RANDOM_DELAY:!0,RANDOM_SEND_DANMU:0,RANDOM_SKIP:0,REMOVE_ELEMENT_2233:!1,REMOVE_ELEMENT_july:!1,REMOVE_ELEMENT_player:!1,RND_DELAY_END:5,RND_DELAY_START:2,SEND_ALL_GIFT:!1,SHARE:!0,SILVER2COIN:!1,SPARE_GIFT_ROOM:'0',SPARE_GIFT_UID:'0',STORM:!1,STORM_MAX_COUNT:100,STORM_ONE_LIMIT:200,STORM_QUEUE_SIZE:3,TIME_AREA_DISABLE:!0,TIME_AREA_END_H0UR:8,TIME_AREA_END_MINUTE:0,TIME_AREA_START_H0UR:2,TIME_AREA_START_MINUTE:0,TIME_RELOAD:120,WATCH:!0},CACHE_DEFAULT:{UNIQUE_CHECK:0,AUTO_GROUP_SIGH_TS:0,DailyReward_TS:0,LiveReward_TS:0,TreasureBox_TS:0,Silver2Coin_TS:0,Gift_TS:0,GiftInterval_TS:0,MobileHeartBeat_TS:0,LittleHeart_TS:0},CONFIG:{},CACHE:{},GIFT_COUNT:{COUNT:0,SILVER_COUNT:0,CLEAR_TS:0},init:function init(){try{M.setCommonArgs(Y.bili_jct)}catch(ue){return void console.error('['+N+']',ue)}var ge=$.Deferred();try{_e.loadConfig().then(function(){_e.chatLog('\u811A\u672C\u8F7D\u5165\u914D\u7F6E\u6210\u529F','success'),ge.resolve()})}catch(ue){console.error('API\u521D\u59CB\u5316\u51FA\u9519',ue),_e.chatLog('API\u521D\u59CB\u5316\u51FA\u9519','error'),ge.reject()}try{_e.loadCache().then(function(){window.toast('CACHE\u8F7D\u5165\u6210\u529F','success'),ge.resolve()})}catch(ue){console.error('CACHE\u521D\u59CB\u5316\u51FA\u9519',ue),window.toast('CACHE\u521D\u59CB\u5316\u51FA\u9519','error'),ge.reject()}return setTimeout(function(){_e.TreasureBox.init()},5750),ge},loadConfig:function loadConfig(){var ge=$.Deferred();try{var ue=JSON.parse(localStorage.getItem(N+'_CONFIG'));for(var ce in $.extend(!0,_e.CONFIG,_e.CONFIG_DEFAULT),_e.CONFIG)_e.CONFIG.hasOwnProperty(ce)&&void 0!==ue[ce]&&null!==ue[ce]&&(_e.CONFIG[ce]=ue[ce]);_e.loadGiftCount(),ge.resolve()}catch(ue){K('API\u8F7D\u5165\u914D\u7F6E\u5931\u8D25\uFF0C\u52A0\u8F7D\u9ED8\u8BA4\u914D\u7F6E',ue),_e.setDefaults(),ge.reject()}return ge},loadCache:function loadCache(){var ge=$.Deferred();try{var ue=JSON.parse(localStorage.getItem(N+'_CACHE'));for(var ce in $.extend(!0,_e.CACHE,_e.CACHE_DEFAULT),_e.CACHE)_e.CACHE.hasOwnProperty(ce)&&void 0!==ue[ce]&&null!==ue[ce]&&(_e.CACHE[ce]=ue[ce]);ge.resolve()}catch(ue){K('CACHE\u8F7D\u5165\u914D\u7F6E\u5931\u8D25\uFF0C\u52A0\u8F7D\u9ED8\u8BA4\u914D\u7F6E',ue),_e.setDefaults(),ge.reject()}return ge},newMessage:function newMessage(ge){try{var ce=localStorage.getItem(N+'_NEWMSG_CACHE');(ce==void 0||null==ce||'3.9'!=ce)&&'3.9'==ge&&(alert(ge+'\u66F4\u65B0\u63D0\u793A\uFF1A\n\n                \u8BF7\u9605\u8BFB\u4E00\u4E0B\u811A\u672C\u8BF4\u660E\u4E2D\u7684\u5C0F\u5FC3\u5FC3\u90E8\u5206\uFF0C\u83B7\u53D6\u65B9\u5F0F\u6709\u53D8\u52A8\u3002\n\n                \u7B49b\u7AD9\u5220\u9664\u8FA3\u6761\u540E\u811A\u672C\u4F1A\u6539\u540D(\u76EE\u524D\u597D\u50CF\u5C31\u5269\u4E2A\u6D41\u661F\u96E8\u6709\u62BD\u5956\u4E86)\uFF0C\n                \uFF08greasyfork\u7528\u6237\u53EF\u5FFD\u7565\u4EE5\u4E0B\u90E8\u5206\uFF09\u6240\u4EE5\u66F4\u65B0\u94FE\u63A5\u4E5F\u4F1A\u53D8\u5316\u3002\n                \u6539\u540D\u540E\uFF0C\u6211\u4F1A\u53D1\u5E03B\u7AD9\u76F4\u64AD\u81EA\u52A8\u62A2\u8FA3\u6761\u7684\u6700\u7EC8\u7248\u672C\u3002\n                \u5B89\u88C5\u8FD9\u4E2A\u7248\u672C\u540E\u811A\u672C\u4F1A\u63D0\u793A\u4F60\u5B89\u88C5\u6539\u540D\u540E\u7684\u65B0\u811A\u672C\u3002\n\n                \u672C\u63D0\u793A\u5728\u6BCF\u4E2A\u7248\u672C\u4EC5\u4F1A\u51FA\u73B0\u4E00\u6B21\u3002'),localStorage.setItem(N+'_NEWMSG_CACHE',ge))}catch(ce){K('\u63D0\u793A\u4FE1\u606FCACHE\u8F7D\u5165\u914D\u7F6E\u5931\u8D25',ce)}},saveConfig:function saveConfig(){try{return localStorage.setItem(N+'_CONFIG',JSON.stringify(_e.CONFIG)),_e.chatLog('\u914D\u7F6E\u5DF2\u4FDD\u5B58'),K('MY_API.CONFIG',_e.CONFIG),!0}catch(ge){return K('API\u4FDD\u5B58\u51FA\u9519',ge),!1}},saveCache:function saveCache(ge){try{return localStorage.setItem(N+'_CACHE',JSON.stringify(_e.CACHE)),!1!=ge&&K('CACHE\u5DF2\u4FDD\u5B58',_e.CACHE),!0}catch(ue){return K('CACHE\u4FDD\u5B58\u51FA\u9519',ue),!1}},setDefaults:function setDefaults(){_e.CONFIG=_e.CONFIG_DEFAULT,_e.CACHE=_e.CACHE_DEFAULT,_e.saveConfig(),_e.saveCache(),_e.chatLog('\u914D\u7F6E\u548CCACHE\u5DF2\u91CD\u7F6E\u4E3A\u9ED8\u8BA4\u30023\u79D2\u540E\u5237\u65B0\u9875\u9762'),setTimeout(function(){window.location.reload()},3e3)},ReDoDailyTasks:function ReDoDailyTasks(){window.toast('3\u79D2\u540E\u518D\u6B21\u6267\u884C\u6240\u6709\u4EFB\u52A1','info'),setTimeout(function(){_e.CACHE=_e.CACHE_DEFAULT,_e.GroupSign.run(),_e.DailyReward.run(),_e.LiveReward.run(),_e.Exchange.runS2C(),_e.TreasureBox.run(),_e.Gift.run(),_e.LITTLE_HEART.run(),_e.MobileHeartBeat.run()},3e3)},loadGiftCount:function loadGiftCount(){try{var ge=JSON.parse(localStorage.getItem(N+'_GIFT_COUNT'));for(var ue in _e.GIFT_COUNT)_e.GIFT_COUNT.hasOwnProperty(ue)&&void 0!==ge[ue]&&null!==ge[ue]&&(_e.GIFT_COUNT[ue]=ge[ue]);K('MY_API.GIFT_COUNT',_e.GIFT_COUNT)}catch(ge){K('\u8BFB\u53D6\u7EDF\u8BA1\u5931\u8D25',ge)}},saveGiftCount:function saveGiftCount(){try{return localStorage.setItem(N+'_GIFT_COUNT',JSON.stringify(_e.GIFT_COUNT)),K('\u7EDF\u8BA1\u4FDD\u5B58\u6210\u529F',_e.GIFT_COUNT),!0}catch(ge){return K('\u7EDF\u8BA1\u4FDD\u5B58\u51FA\u9519',ge),!1}},addGift:function addGift(ge){_e.GIFT_COUNT.COUNT+=ge,$('#giftCount span:eq(0)').text(_e.GIFT_COUNT.COUNT),_e.saveGiftCount()},addSilver:function addSilver(ge){_e.GIFT_COUNT.SILVER_COUNT+=ge,$('#giftCount span:eq(1)').text(_e.GIFT_COUNT.SILVER_COUNT),_e.saveGiftCount()},removeUnnecessary:function removeUnnecessary(){var ge=['#my-dear-haruna-vm','.july-activity-entry','.bilibili-live-player'],ue=function removeUntiSucceed(ce,Ie){!0===_e.CONFIG[ce]&&setInterval(function(){0<$(ge[Ie]).length&&$(ge[Ie]).remove()},200)};ue('REMOVE_ELEMENT_2233',0),ue('REMOVE_ELEMENT_july',1),ue('REMOVE_ELEMENT_player',2)},creatSetBox:function creatSetBox(){function ge(){var ye,De,Me=_e.CONFIG.TIME_AREA_START_H0UR=parseInt(Oe.find('div[data-toggle="TIME_AREA_DISABLE"] .startHour').val()),be=_e.CONFIG.TIME_AREA_END_H0UR=parseInt(Oe.find('div[data-toggle="TIME_AREA_DISABLE"] .endHour').val()),Le=_e.CONFIG.TIME_AREA_START_MINUTE=parseInt(Oe.find('div[data-toggle="TIME_AREA_DISABLE"] .startMinute').val()),Se=_e.CONFIG.TIME_AREA_END_MINUTE=parseInt(Oe.find('div[data-toggle="TIME_AREA_DISABLE"] .endMinute').val());if(0>Me||0>be||0>Le||0>Se)return void _e.chatLog('[\u5B9A\u65F6\u4F11\u7720]\u6570\u636E\u5C0F\u4E8E0','warning');if(24<=Me||24<=be||60<=Le||60<=Se)return void _e.chatLog('[\u5B9A\u65F6\u4F11\u7720]\u65F6\u95F4\u9519\u8BEF','warning');if(_e.CONFIG.TIME_AREA_START_H0UR=Me,_e.CONFIG.TIME_AREA_END_H0UR=be,_e.CONFIG.TIME_AREA_START_MINUTE=Le,_e.CONFIG.TIME_AREA_END_MINUTE=Se,ye=parseFloat(Oe.find('div[data-toggle="RANDOM_SKIP"] .per').val()),0>ye||100<ye)return void _e.chatLog('[\u968F\u673A\u8DF3\u8FC7\u793C\u7269]\u6570\u636E\u5C0F\u4E8E0\u6216\u5927\u4E8E100','warning');if(_e.CONFIG.RANDOM_SKIP=ye,ye=parseFloat(Oe.find('div[data-toggle="RANDOM_SEND_DANMU"] .per').val()),5<ye)return void _e.chatLog('[\u6D3B\u8DC3\u5F39\u5E55]\u4E3A\u7EF4\u62A4\u76F4\u64AD\u95F4\u5F39\u5E55\u6C1B\u56F4,\u5F39\u5E55\u53D1\u9001\u6982\u7387\u4E0D\u5F97\u5927\u4E8E5%','warning');if(0>ye)return void _e.chatLog('[\u6D3B\u8DC3\u5F39\u5E55]\u6570\u636E\u5C0F\u4E8E0','warning');if(_e.CONFIG.RANDOM_SEND_DANMU=ye,ye=parseInt(Oe.find('div[data-toggle="MAX_GIFT"] .num').val()),_e.CONFIG.MAX_GIFT=ye,ye=parseInt(Oe.find('div[data-toggle="TIME_RELOAD"] .delay-seconds').val()),0>=ye||1e4<ye)return void _e.chatLog('[\u76F4\u64AD\u95F4\u91CD\u8F7D\u65F6\u95F4]\u6570\u636E\u5C0F\u4E8E\u7B49\u4E8E0\u6216\u5927\u4E8E10000','warning');if(_e.CONFIG.TIME_RELOAD=ye,ye=parseFloat(Oe.find('div[data-toggle="RANDOM_DELAY"] .RND_DELAY_START').val()),be=parseFloat(Oe.find('div[data-toggle="RANDOM_DELAY"] .RND_DELAY_END').val()),0>ye||100<be)return void _e.chatLog('[\u62BD\u5956\u5EF6\u65F6]\u6570\u636E\u5C0F\u4E8E0\u6216\u5927\u4E8E100','warning');if(be<=ye)return void _e.chatLog('[\u62BD\u5956\u5EF6\u65F6]\u6570\u636E\u5927\u5C0F\u5173\u7CFB\u4E0D\u6B63\u786E','warning');if(_e.CONFIG.RND_DELAY_START=ye,_e.CONFIG.RND_DELAY_END=be,ye=parseInt(Oe.find('div[data-toggle="COIN"] .coin_number').val()),0>ye||5<ye)return void _e.chatLog('[\u81EA\u52A8\u6295\u5E01]\u6570\u636E\u5C0F\u4E8E0\u6216\u5927\u4E8E5','warning');if(_e.CONFIG.COIN_NUMBER=ye,ye=parseInt(Oe.find('div[data-toggle="CHECK_HOUR_ROOM_INTERVAL"] .num').val()),0>=ye)return void _e.chatLog('[\u68C0\u67E5\u5C0F\u65F6\u699C\u95F4\u9694]\u6570\u636E\u5C0F\u4E8E\u7B49\u4E8E0','warning');_e.CONFIG.CHECK_HOUR_ROOM_INTERVAL=ye,ye=Oe.find('div[data-toggle="AUTO_GIFT_ROOMID"] .num').val(),De=ye.split(',');for(var Fe=0;Fe<De.length;Fe++)''===De[Fe]&&(De[Fe]=0);ye=De.join(','),_e.CONFIG.AUTO_GIFT_ROOMID=ye,ye=Oe.find('div[data-toggle="EXCLUDE_ROOMID"] .num').val(),De=ye.split(',');for(var Fe=0;Fe<De.length;Fe++)''===De[Fe]&&(De[Fe]=0);return(ye=De.join(','),_e.CONFIG.EXCLUDE_ROOMID=ye,ye=parseInt(Oe.find('div[data-toggle="GIFT_LIMIT"] .num').val()),_e.CONFIG.GIFT_LIMIT=ye,Me=parseInt(Oe.find('div[data-toggle="GIFT_SEND_TIME"] .Hour').val()),be=parseInt(Oe.find('div[data-toggle="GIFT_SEND_TIME"] .Minute').val()),0>Me||0>be)?void _e.chatLog('[\u9001\u793C\u65F6\u95F4]\u6570\u636E\u5C0F\u4E8E0','warning'):24<=Me||60<=be?void _e.chatLog('[\u9001\u793C\u65F6\u95F4]\u65F6\u95F4\u9519\u8BEF','warning'):void(_e.CONFIG.GIFT_SEND_HOUR=Me,_e.CONFIG.GIFT_SEND_MINUTE=be,ye=Oe.find('div[data-toggle="SPARE_GIFT_ROOM"] .num').val(),_e.CONFIG.SPARE_GIFT_ROOM=ye,ye=Oe.find('div[data-toggle="SPARE_GIFT_UID"] .num').val(),_e.CONFIG.SPARE_GIFT_UID=ye,ye=parseInt(Oe.find('div[data-toggle="STORM_QUEUE_SIZE"] .num').val()),_e.CONFIG.STORM_QUEUE_SIZE=ye,ye=parseInt(Oe.find('div[data-toggle="STORM_MAX_COUNT"] .num').val()),_e.CONFIG.STORM_MAX_COUNT=ye,ye=parseInt(Oe.find('div[data-toggle="STORM_ONE_LIMIT"] .num').val()),_e.CONFIG.STORM_ONE_LIMIT=ye,ye=parseInt(Oe.find('div[data-toggle="COIN_UID"] .num').val()),_e.CONFIG.COIN_UID=ye,ye=Oe.find('div[data-toggle="LIGHT_MEDALS"] .num').val(),_e.CONFIG.LIGHT_MEDALS=ye,ye=parseInt(Oe.find('div[data-toggle="MAX_TAB"] .num').val()),_e.CONFIG.MAX_TAB=ye,_e.saveConfig())}var ue=['.chat-history-list','.attention-btn-ctnr','.live-player-mounter'],ce=!0,Ie=!1,pe=void 0;try{for(var fe,ye,Te=ue[Symbol.iterator]();!(ce=(fe=Te.next()).done);ce=!0)if(ye=fe.value,0==$(ye).length)return V(function(){return _e.creatSetBox()},200)}catch(ye){Ie=!0,pe=ye}finally{try{!ce&&Te.return&&Te.return()}finally{if(Ie)throw pe}}var Ee='hide'==D?'\u663E\u793A\u7A97\u53E3\u548C\u63D0\u793A\u4FE1\u606F':'\u9690\u85CF\u7A97\u53E3\u548C\u63D0\u793A\u4FE1\u606F',me=$('<button style="display: inline-block; float: left; margin-right: 7px;background-color: #23ade5;color: #fff;border-radius: 4px;border: none; padding:4px; cursor: pointer;box-shadow: 1px 1px 2px #00000075;" id="hiderbtn">'+Ee+'<br></button>');me.click(function(){if('show'==D){D='hide',localStorage.setItem(N+'_msgHide',D),$('.igiftMsg').hide(),Oe.hide(),$('.link-toast').hide();var ye=$('.chat-history-list');ye.animate({scrollTop:0},0),setTimeout(function(){ye.animate({scrollTop:ye.prop('scrollHeight')},10)},100),document.getElementById('hiderbtn').innerHTML='\u663E\u793A\u7A97\u53E3\u548C\u63D0\u793A\u4FE1\u606F'}else{D='show',localStorage.setItem(N+'_msgHide',D),$('.igiftMsg').show(),$('.link-toast').show(),Oe.show();var ye=$('.chat-history-list');ye.animate({scrollTop:ye.prop('scrollHeight')},0),document.getElementById('hiderbtn').innerHTML='\u9690\u85CF\u7A97\u53E3\u548C\u63D0\u793A\u4FE1\u606F'}}),$('.attention-btn-ctnr').append(me);var Oe=$('<div>'),ve=$('.live-player-mounter').height();Oe.css({width:'auto',height:ve,position:'absolute',top:'-2px',right:'0px',background:'#F0F0F0',padding:'10px',"z-index":'10001',"border-radius":'4px',overflow:'scroll',"line-height":'15px'}),Oe.append('\n                <div id=\'allsettings\'>\n                <fieldset class="igiftMsg_fs">\n                    <legend style="color: black">\u4ECA\u65E5\u7EDF\u8BA1</legend>\n                    <div id="giftCount" style="font-size: large; text-shadow: 1px 1px #00000066; color: blueviolet;">\n                        \u8FA3\u6761&nbsp;<span>'+_e.GIFT_COUNT.COUNT+'</span>\n                        \u94F6\u74DC\u5B50&nbsp;<span>'+_e.GIFT_COUNT.SILVER_COUNT+'\u4E07</span>\n                        <button style="font-size: small" class="igiftMsg_btn" data-action="save">\u4FDD\u5B58\u6240\u6709\u8BBE\u7F6E</button>\n                    </div>\n                </fieldset>\n                <div id="left_fieldset" style="float:left;">\n                    <fieldset class="igiftMsg_fs">\n                        <legend style="color: black">\u62BD\u5956\u8BBE\u7F6E</legend>\n                        <div data-toggle="RANDOM_DELAY">\n                            <label style="cursor: pointer; margin: 5px auto; color: darkgreen">\n                                <input style="vertical-align: text-top;" type="checkbox">\u62BD\u5956\u9644\u52A0\u968F\u673A\u5EF6\u8FDF\n                                <input class="RND_DELAY_START igiftMsg_input" style="width: 30px;vertical-align: top;" type="text">~\n                                <input class="RND_DELAY_END igiftMsg_input" style="width: 30px;vertical-align: top;" type="text">s\n                            </label>\n                        </div>\n                        <div data-toggle="TIME_AREA_DISABLE">\n                            <label style="cursor: pointer; margin: 5px auto; color: darkgreen">\n                                <input style="vertical-align: text-top;" type="checkbox">\u542F\u7528\n                                <input class="startHour igiftMsg_input" style="width: 20px;" type="text">\u70B9\n                                <input class="startMinute igiftMsg_input" style="width: 20px;" type="text">\u5206\u81F3\n                                <input class="endHour igiftMsg_input" style="width: 20px;" type="text">\u70B9\n                                <input class="endMinute igiftMsg_input" style="width: 20px;" type="text">\u5206\u4E0D\u62BD\u5956(24\u5C0F\u65F6\u5236)\n                            </label>\n                        </div>\n                        <div data-toggle="RANDOM_SKIP">\n                            <label style="cursor: pointer; margin: 5px auto; color: darkgreen">\n                                \u968F\u673A\u8DF3\u8FC7\u793C\u7269(0\u5230100,\u4E3A0\u5219\u4E0D\u8DF3\u8FC7)<input class="per igiftMsg_input" style="width: 30px;" type="text">%\n                            </label>\n                        </div>\n                        <div data-toggle="MAX_GIFT">\n                            <label style="cursor: pointer; margin: 5px auto; color: darkgreen">\n                                \u5F53\u5929\u6700\u591A\u62A2\u8FA3\u6761\u6570\u91CF<input class="num igiftMsg_input" style="width: 100px;" type="text">\n                            </label>\n                        </div>\n                        <div data-toggle="RANDOM_SEND_DANMU">\n                            <label style="cursor: pointer; margin: 5px auto; color: darkgreen">\n                                \u62BD\u5956\u65F6\u6D3B\u8DC3\u5F39\u5E55\u53D1\u9001\u6982\u7387(0\u52305,\u4E3A0\u5219\u4E0D\u53D1\u9001)<input class="per igiftMsg_input" style="width: 30px;" type="text">%\n                            </label>\n                        </div>\n                        <div data-toggle="CHECK_HOUR_ROOM_INTERVAL">\n                            <label style="cursor: pointer; margin: 5px auto; color: darkgreen">\n                                \u68C0\u67E5\u5C0F\u65F6\u699C\u95F4\u9694\u65F6\u95F4<input class="num igiftMsg_input" style="width: 25px;" type="text">\u79D2\n                            </label>\n                        </div>\n                        <div data-toggle="FORCE_LOTTERY" style="line-height: 20px">\n                        <label style="margin: 5px auto; color: red;">\n                            <input style="vertical-align: text-top;" type="checkbox">\u8BBF\u95EE\u88AB\u62D2\u7EDD\u540E\u5F3A\u5236\u91CD\u590D\u62BD\u5956(\u6700\u591A5\u6B21)\n                        </label>\n                    </div>\n                    </fieldset>\n            \n                    <fieldset class="igiftMsg_fs">\n                        <legend style="color: black">\u6BCF\u65E5\u4EFB\u52A1\u8BBE\u7F6E</legend>\n                        <div data-toggle="LOGIN" style=" color: black">\n                            <input style="vertical-align: text-top;" type="checkbox">\n                            \u767B\u9646\n                        </div>\n                        <div data-toggle="WATCH" style=" color: black">\n                            <input style="vertical-align: text-top;" type="checkbox">\n                            \u89C2\u770B\u89C6\u9891\n                        </div>\n                        <div data-toggle="COIN" style=" color: black">\n                            <label style="cursor: pointer">\n                                <input style="cursor: pointer; vertical-align: text-top;" type="checkbox">\n                                \u81EA\u52A8\u6295\u5E01<input class="coin_number igiftMsg_input" style="width: 40px;" type="text">\u4E2A(0-5)\n                            </label>\n                        </div>\n                        <div data-toggle="COIN_TYPE" style=" color: black">\n                            <div data-toggle="COIN_UID">\n                            <input style="vertical-align: text-top;" type="radio" name="COIN_TYPE">\n                            \u7ED9\u7528\u6237(UID:<input class="num igiftMsg_input" style="width: 80px;" type="text">)\n                            \u7684\u89C6\u9891\u6295\u5E01\n                            </div>\n                            <div data-toggle="COIN_DYN">\n                                <input style="vertical-align: text-top;" type="radio" name="COIN_TYPE">\n                                \u7ED9\u52A8\u6001\u4E2D\u7684\u7684\u89C6\u9891\u6295\u5E01\n                            </div>\n                        </div>\n                        <div data-toggle="SHARE" style=" color: black">\n                            <input style="vertical-align: text-top;" type="checkbox">\n                            \u5206\u4EAB\u89C6\u9891\n                        </div>\n                        <div data-toggle="SILVER2COIN" style=" color: black">\n                            <input style="vertical-align: text-top;" type="checkbox">\n                            \u94F6\u74DC\u5B50\u6362\u786C\u5E01\n                        </div>\n                        <div data-toggle="LIVE_SIGN" style=" color: black">\n                            <input style="vertical-align: text-top;" type="checkbox">\n                            \u76F4\u64AD\u533A\u7B7E\u5230\n                        </div>\n                        <div data-toggle="AUTO_GROUP_SIGN" style=" color: darkgreen">\n                            <input style="vertical-align: text-top;" type="checkbox">\n                            \u5E94\u63F4\u56E2\u7B7E\u5230\n                        </div>\n                        <div data-toggle="AUTO_TREASUREBOX" style=" color: purple">\n                            <input style="vertical-align: text-top;" type="checkbox">\n                            \u81EA\u52A8\u9886\u94F6\u74DC\u5B50\u5B9D\u7BB1\n                        </div>\n                        <div data-toggle="MOBILE_HEARTBEAT" style=" color: gray">\n                        <input style="vertical-align: text-top;" type="checkbox">\n                        \u6A21\u62DF\u79FB\u52A8\u7AEF\u5FC3\u8DF3\n                        </div>\n                    </fieldset>\n                    <fieldset class="igiftMsg_fs">\n                        <legend style="color: black">\u81EA\u52A8\u9001\u793C\u8BBE\u7F6E</legend>\n                        <div data-toggle="AUTO_GIFT" style=" color: purple">\n                            <input style="vertical-align: text-top;" type="checkbox">\n                            \u81EA\u52A8\u9001\u793C\n                        </div>\n            \n                        <div data-toggle="AUTO_GIFT_ROOMID" style=" color: purple">\n                            \u4F18\u5148\u9001\u793C\u623F\u95F4\n                            <input class="num igiftMsg_input" style="width: 150px;" type="text">\n                        </div>\n            \n                        <div data-toggle="EXCLUDE_ROOMID" style=" color: purple">\n                            \u4E0D\u9001\u793C\u623F\u95F4\n                            <input class="num igiftMsg_input" style="width: 150px;" type="text">\n                        </div>\n                        <div data-toggle="GIFT_INTERVAL" style=" color: black">\n                            <input style="vertical-align: text-top;" type="radio" name="GIFT_TYPE">\n                            \u95F4\u9694\n                            <input class="num igiftMsg_input" style="width: 30px;" type="text">\n                            \u5206\u949F\u9001\u793C\n                        </div>\n                        <div data-toggle="GIFT_SEND_TIME" style=" color: purple">\n                            <input style="vertical-align: text-top;" type="radio" name="GIFT_TYPE">\n                            \u5B9A\u65F6\u9001\u793C<br>\n                            \u9001\u793C\u65F6\u95F4\n                            <input class="Hour igiftMsg_input" style="width: 20px;" type="text">\u70B9\n                            <input class="Minute igiftMsg_input" style="width: 20px;" type="text">\u5206\n                            <button style="font-size: small" class="igiftMsg_btn" data-action="sendGiftNow">\u7ACB\u523B\u5F00\u59CB\u9001\u793C</button>\n                        </div>\n                        \n                        <div data-toggle="GIFT_LIMIT" style=" color: purple">\n                            \u793C\u7269\u5230\u671F\u65F6\u95F4\n                            <input class="num igiftMsg_input" style="width: 20px;" type="text">\n                            \u5929\n                        </div>\n                        <div data-toggle="GIFT_SORT" style=" color: purple">\n                            <input style="vertical-align: text-top;" type="checkbox">\n                            \u9001\u793C\u4F18\u5148\u9AD8\u7B49\u7EA7\u7C89\u4E1D\u724C\n                        </div>\n                        <div data-toggle="SEND_ALL_GIFT" style=" color: purple">\n                            <input style="vertical-align: text-top;" type="checkbox">\n                            \u9001\u6EE1\u5168\u90E8\u52CB\u7AE0\n                        </div>\n                        <div data-toggle="SPARE_GIFT_ROOM" style=" color: black">\n                            \u5269\u4F59\u793C\u7269\u9001\u793C\u76F4\u64AD\u95F4\uFF1A\n                            <input class="num igiftMsg_input" type="text" style="width: 100px;">\n                        </div>\n                        <div data-toggle="SPARE_GIFT_UID" style=" color: black">\n                            \u5269\u4F59\u793C\u7269\u9001\u793C\u76F4\u64AD\u95F4\u62E5\u6709\u8005UID\uFF1A\n                            <input class="num igiftMsg_input" type="text" style="width: 100px;">\n                        </div>\n                    </fieldset>\n                    <fieldset class="igiftMsg_fs">\n                        <legend style="color: black">\u8282\u594F\u98CE\u66B4\u8BBE\u7F6E</legend>\n                        <div data-toggle="STORM" style="line-height: 15px">\n                            <label style="margin: 5px auto; color: #ff5200">\n                                <input style="vertical-align: text-top;" type="checkbox">\u53C2\u4E0E\u8282\u594F\u98CE\u66B4\n                            </label>\n                        </div>\n                        <div data-toggle="STORM_QUEUE_SIZE" style="color: black">\n                            \u5141\u8BB8\u540C\u65F6\u53C2\u4E0E\u7684\u8282\u594F\u98CE\u66B4\u6B21\u6570\uFF1A\n                            <input class="num igiftMsg_input" type="text" style="width: 30px;">\n                        </div>\n                        <div data-toggle="STORM_MAX_COUNT" style="color: black">\n                            \u5355\u4E2A\u98CE\u66B4\u6700\u5927\u5C1D\u8BD5\u6B21\u6570\uFF1A\n                            <input class="num igiftMsg_input" type="text" style="width: 30px;">\n                        </div>\n                        <div data-toggle="STORM_ONE_LIMIT" style="color: black">\n                            \u5355\u4E2A\u98CE\u66B4\u53C2\u4E0E\u6B21\u6570\u95F4\u9694\uFF1A\n                            <input class="num igiftMsg_input" type="text" style="width: 30px;">\n                            \u6BEB\u79D2\n                        </div>\n                    </fieldset>\n                </div>\n            \n            \n            \n                <div id="right_fieldset" style="float:left;">\n                    <fieldset class="igiftMsg_fs">\n                        <legend style="color: black">\u8BF4\u660E</legend>\n                        \u81EA\u52A8\u9001\u793C\u76EE\u524D\u53EA\u4F1A\u9001\u51FA\u8FA3\u6761\uFF0C\u4EBF\u5706\u548C\u5C0F\u5FC3\u5FC3\u3002<br>\n                        \u793C\u7269\u5230\u671F\u65F6\u95F4: \u5C06\u8981\u5728\u8FD9\u4E2A\u65F6\u95F4\u6BB5\u91CC\u8FC7\u671F\u7684\u793C\u7269\u4F1A\u88AB\u9001\u51FA<br>\n                        \u52FE\u9009\u9001\u6EE1\u5168\u90E8\u52CB\u7AE0\u65F6\u65E0\u8BBA\u662F\u5426\u5C06\u8981\u8FC7\u671F\u90FD\u4F1A\u88AB\u9001\u51FA<br>\n                        \u5982\u679C\u8981\u586B\u5199\u591A\u4E2A\u4F18\u5148\u9001\u793C\u623F\u95F4\uFF0C<br>\n                        \u6BCF\u4E2A\u623F\u95F4\u53F7\u4E4B\u95F4\u9700\u7528\u534A\u89D2\u9017\u53F7,\u9694\u5F00\u3002(\u4E0D\u9001\u793C\u623F\u95F4\uFF0C\u81EA\u52A8\u70B9\u4EAE\u52CB\u7AE0\u623F\u95F4\u53F7\u540C\u7406)<br>\n                        \u5982 666,777,888\u3002\u4E3A0\u5219\u4E0D\u9001\u3002<br>\n                        \u5982\u679C\u6CA1\u6709\u8FD9\u4E9B\u623F\u95F4\u7684\u7C89\u4E1D\u724C\u4E5F\u4E0D\u9001\u3002<br>\n                        \u65E0\u8BBA\u3010\u4F18\u5148\u9AD8\u7B49\u7EA7\u7C89\u4E1D\u724C\u3011\u5982\u4F55\u8BBE\u7F6E\uFF0C\u4F1A\u6839\u636E\u3010\u9001\u6EE1\u5168\u90E8\u52CB\u7AE0\u3011<br>\n                        \uFF08\u52FE\u9009\u5219\u8865\u6EE1\uFF0C\u5426\u5219\u53EA\u9001\u5230\u671F\u7684\uFF09\u6761\u4EF6\u53BB\u6309\u4F18\u5148\u9001\u793C\u623F\u95F4\u5148\u540E\u987A\u5E8F\u9001\u793C\u3002<br>\n                        \u4E4B\u540E\u6839\u636E\u3010\u4F18\u5148\u9AD8\u7B49\u7EA7\u7C89\u4E1D\u724C\u3011\u51B3\u5B9A\u5148\u9001\u9AD8\u7EA7\u8FD8\u662F\u4F4E\u7EA7\uFF08\u52FE\u9009\u5148\u9AD8\u7EA7\uFF0C\u4E0D\u52FE\u9009\u5148\u4F4E\u7EA7\uFF09\u3002<br>\n                        \u5269\u4F59\u793C\u7269:\u6307\u9001\u5B8C\u4E86\u6240\u6709\u7C89\u4E1D\u724C\uFF0C\u4F46\u4ECD\u6709\u5269\u4F59\u7684\u5C06\u57281\u5929\u5185\u8FC7\u671F\u7684\u793C\u7269\u3002<br>\n                        \u5269\u4F59\u793C\u7269\u4E5F\u4F1A\u5728\u6307\u5B9A\u9001\u793C\u65F6\u95F4\u88AB\u9001\u51FA\u3002<br>\n                        \u53C2\u4E0E\u8282\u594F\u98CE\u66B4\u98CE\u9669\u8F83\u5927\uFF0C\u5982\u679C\u6CA1\u6709\u5B9E\u540D\u53EF\u80FD\u65E0\u6CD5\u53C2\u52A0\u3002<br>\n                        \u811A\u672C\u4EC5\u80FD\u53C2\u52A0\u5E7F\u64AD\u4E2D\u7684\u8282\u594F\u98CE\u66B4\u3002<br>\n                        \u3010\u7ED9\u7528\u6237(UID:___)\u7684\u89C6\u9891\u6295\u5E01\u3011\u82E5\u586B0\u5219\u7ED9\u52A8\u6001\u4E2D\u7684\u89C6\u9891\u4F9D\u6B21\u6295\u5E01(\u56E0\u4E3A\u65E0UID\u4E3A0\u7684\u7528\u6237)\n            \n                    </fieldset>\n                    <fieldset class="igiftMsg_fs">\n                        <legend style="color: black">\u5C0F\u5FC3\u5FC3</legend>\n                        <div data-toggle="LITTLE_HEART" style="line-height: 15px">\n                            <label style="margin: 5px auto; color: black">\n                                <input style="vertical-align: text-top;" type="checkbox"> \u81EA\u52A8\u540E\u53F0\u5FAA\u73AF\u5F00\u5173\u6807\u7B7E\u9875\u83B7\u53D6\u5C0F\u5FC3\u5FC3\n                            </label>\n                        </div>\n                        <div data-toggle="MAX_TAB" style="line-height: 15px">\n                        <label style="margin: 5px auto; color: black">\n                            \u6253\u5F00\u6807\u7B7E\u9875\u6570\u91CF\u4E0A\u9650\n                            <input class="num igiftMsg_input" type="text" style="width: 30px;">\n                        </label>\n                    </div>\n                        <div data-toggle="LIGHT_MEDALS" style=" color: purple">\n                            \u81EA\u52A8\u70B9\u4EAE\u52CB\u7AE0\u623F\u95F4\u53F7\n                        <input class="num igiftMsg_input" style="width: 300px;" type="text">\n                    </div>\n                    <div data-toggle="LIGHT_METHOD" style="line-height: 15px; color: black; display:inline">\n                        \u52CB\u7AE0\u70B9\u4EAE\u6A21\u5F0F\uFF1A&nbsp;&nbsp;\n                        <div data-toggle="LIGHT_WHITE" style="color: black; display:inline">\n                            <input style="vertical-align: text-top;" type="radio" name="LIGHT_TYPE">\n                            \u767D\u540D\u5355\n                        </div>\n                        <div data-toggle="LIGHT_BLACK" style="color: black; display:inline">\n                            &nbsp;\n                            <input style="vertical-align: text-top;" type="radio" name="LIGHT_TYPE">\n                            \u9ED1\u540D\u5355\n                        </div>\n                    </div>\n                    <div data-toggle="FORCE_LIGHT" style="line-height: 15px">\n                    <label style="margin: 5px auto; color: black">\n                        <input style="vertical-align: text-top;" type="checkbox"> \u70B9\u4EAE\u52CB\u7AE0\u65F6\u5FFD\u7565\u4EB2\u5BC6\u5EA6\u4E0A\u9650\n                    </label>\n                    </div>\n                    </fieldset>\n                    <fieldset class="igiftMsg_fs">\n                        <legend style="color: black">\u5185\u5BB9\u5C4F\u853D</legend>\n                        <div data-toggle="REMOVE_ELEMENT_2233" style="line-height: 15px">\n                            <label style="margin: 5px auto; color: black">\n                                <input style="vertical-align: text-top;" type="checkbox"> \u79FB\u96642233\u6A21\u578B\n                            </label>\n                        </div>\n                        <div data-toggle="REMOVE_ELEMENT_july" style="line-height: 15px">\n                            <label style="margin: 5px auto; color: black">\n                                <input style="vertical-align: text-top;" type="checkbox"> \u79FB\u9664\u590F\u65E5\u6D3B\u52A8\u5165\u53E3\n                            </label>\n                        </div>\n                        <div data-toggle="REMOVE_ELEMENT_player" style="line-height: 15px">\n                        <label style="margin: 5px auto; color: black">\n                            <input style="vertical-align: text-top;" type="checkbox"> \u79FB\u9664\u76F4\u64AD\u753B\u9762\n                        </label>\n                    </div>\n                    </fieldset>\n                    <fieldset class="igiftMsg_fs" style="line-height: 15px">\n                        <legend style="color: black">\u5176\u4ED6\u8BBE\u7F6E</legend>\n                        <div data-toggle="TIME_RELOAD" style="color: black">\n                            \u672C\u76F4\u64AD\u95F4\u5237\u65B0\u65F6\u95F4\uFF1A\n                            <input class="delay-seconds igiftMsg_input" type="text" style="width: 30px;">\u5206\n                        </div>\n                        <div data-toggle="IN_TIME_RELOAD_DISABLE" style="line-height: 15px">\n                            <label style="margin: 5px auto; color: darkgreen">\n                                <input style="vertical-align: text-top;" type="checkbox">\u4E0D\u62BD\u5956\u65F6\u6BB5\u4E0D\u91CD\u8F7D\u76F4\u64AD\u95F4\n                            </label>\n                        </div>\n                        <div id="resetArea">\n                            <button data-action="reset" style="color: red;" class="igiftMsg_btn">\u91CD\u7F6E\u6240\u6709\u4E3A\u9ED8\u8BA4</button>\n                            <button data-action="redo_dailyTasks" style="color: red;" class="igiftMsg_btn">\u518D\u6B21\u6267\u884C\u6240\u6709\u4EFB\u52A1</button>\n                            <button style="font-size: small" class="igiftMsg_btn" data-action="countReset">\u91CD\u7F6E\u7EDF\u8BA1</button>\n                        </div>\n            \n                    </fieldset>\n                    <label style="color: darkblue; font-size:large;">\n                        v'+GM_info.script.version+' <a href="https://github.com/andywang425/BLTH"\n                            target="_blank">\u66F4\u591A\u8BF4\u660E\u548C\u66F4\u65B0\u65E5\u5FD7\u89C1github\u4E0A\u7684\u9879\u76EE\u8BF4\u660E(\u70B9\u6211)</a>\n                    </label>\n                </div>\n            </div>\n    '),'show'==D?$('.live-player-mounter').append(Oe):$('.live-player-mounter').append(Oe.hide()),Oe.find('div[data-toggle="MAX_TAB"] .num').val(parseInt(_e.CONFIG.MAX_TAB).toString()),Oe.find('div[data-toggle="GIFT_INTERVAL"] .num').val(parseInt(_e.CONFIG.GIFT_INTERVAL).toString()),Oe.find('div[data-toggle="LIGHT_MEDALS"] .num').val(_e.CONFIG.LIGHT_MEDALS.toString()),Oe.find('div[data-toggle="STORM_MAX_COUNT"] .num').val(parseInt(_e.CONFIG.STORM_MAX_COUNT).toString()),Oe.find('div[data-toggle="STORM_ONE_LIMIT"] .num').val(parseInt(_e.CONFIG.STORM_ONE_LIMIT).toString()),Oe.find('div[data-toggle="STORM_QUEUE_SIZE"] .num').val(parseInt(_e.CONFIG.STORM_QUEUE_SIZE).toString()),Oe.find('div[data-toggle="SPARE_GIFT_UID"] .num').val(_e.CONFIG.SPARE_GIFT_UID.toString()),Oe.find('div[data-toggle="SPARE_GIFT_ROOM"] .num').val(_e.CONFIG.SPARE_GIFT_ROOM.toString()),Oe.find('div[data-toggle="TIME_RELOAD"] .delay-seconds').val(parseInt(_e.CONFIG.TIME_RELOAD).toString()),Oe.find('div[data-toggle="RANDOM_SKIP"] .per').val(parseFloat(_e.CONFIG.RANDOM_SKIP).toString()),Oe.find('div[data-toggle="RANDOM_SEND_DANMU"] .per').val(parseFloat(_e.CONFIG.RANDOM_SEND_DANMU).toString()),Oe.find('div[data-toggle="MAX_GIFT"] .num').val(parseInt(_e.CONFIG.MAX_GIFT).toString()),Oe.find('div[data-toggle="COIN"] .coin_number').val(parseInt(_e.CONFIG.COIN_NUMBER).toString()),Oe.find('div[data-toggle="COIN_UID"] .num').val(parseInt(_e.CONFIG.COIN_UID).toString()),Oe.find('div[data-toggle="RANDOM_DELAY"] .RND_DELAY_START').val(parseFloat(_e.CONFIG.RND_DELAY_START).toString()),Oe.find('div[data-toggle="RANDOM_DELAY"] .RND_DELAY_END').val(parseFloat(_e.CONFIG.RND_DELAY_END).toString()),Oe.find('div[data-toggle="TIME_AREA_DISABLE"] .startHour').val(parseInt(_e.CONFIG.TIME_AREA_START_H0UR).toString()),Oe.find('div[data-toggle="TIME_AREA_DISABLE"] .endHour').val(parseInt(_e.CONFIG.TIME_AREA_END_H0UR).toString()),Oe.find('div[data-toggle="TIME_AREA_DISABLE"] .startMinute').val(parseInt(_e.CONFIG.TIME_AREA_START_MINUTE).toString()),Oe.find('div[data-toggle="TIME_AREA_DISABLE"] .endMinute').val(parseInt(_e.CONFIG.TIME_AREA_END_MINUTE).toString()),Oe.find('div[data-toggle="CHECK_HOUR_ROOM_INTERVAL"] .num').val(parseInt(_e.CONFIG.CHECK_HOUR_ROOM_INTERVAL).toString()),Oe.find('div[data-toggle="AUTO_GIFT_ROOMID"] .num').val(_e.CONFIG.AUTO_GIFT_ROOMID.toString()),Oe.find('div[data-toggle="EXCLUDE_ROOMID"] .num').val(_e.CONFIG.EXCLUDE_ROOMID.toString()),Oe.find('div[data-toggle="GIFT_SEND_TIME"] .Hour').val(_e.CONFIG.GIFT_SEND_HOUR.toString()),Oe.find('div[data-toggle="GIFT_SEND_TIME"] .Minute').val(_e.CONFIG.GIFT_SEND_MINUTE.toString()),Oe.find('div[data-toggle="GIFT_LIMIT"] .num').val(parseInt(_e.CONFIG.GIFT_LIMIT).toString());Oe.find('div[id="giftCount"] [data-action="save"]').click(function(){ge()}),Oe.find('button[data-action="reset"]').click(function(){_e.setDefaults()}),Oe.find('button[data-action="checkUpdate"]').click(function(){_e.checkUpdate()}),Oe.find('button[data-action="redo_dailyTasks"]').click(function(){_e.ReDoDailyTasks()}),Oe.find('#resetArea [data-action="countReset"]').click(function(){_e.GIFT_COUNT={COUNT:0,SILVER_COUNT:0,CLEAR_TS:0},_e.saveGiftCount(),$('#giftCount span:eq(0)').text(_e.GIFT_COUNT.COUNT),$('#giftCount span:eq(1)').text(_e.GIFT_COUNT.SILVER_COUNT),_e.chatLog('\u5DF2\u91CD\u7F6E\u7EDF\u8BA1\u6570\u636E')}),Oe.find('button[data-action="sendGiftNow"]').click(function(){w=!0,_e.Gift.run()});var xe=['RANDOM_DELAY','TIME_AREA_DISABLE','AUTO_GROUP_SIGN','FORCE_LOTTERY','LOGIN','WATCH','COIN','SHARE','SILVER2COIN','LIVE_SIGN','IN_TIME_RELOAD_DISABLE','AUTO_TREASUREBOX','IN_TIME_RELOAD_DISABLE','AUTO_GIFT','GIFT_SORT','SEND_ALL_GIFT','MOBILE_HEARTBEAT','STORM','LITTLE_HEART','REMOVE_ELEMENT_2233','REMOVE_ELEMENT_july','REMOVE_ELEMENT_player','FORCE_LIGHT'],he=!0,Ce=!1,Ge=void 0;try{for(var Ne,Re=function _loop(){var ye=Ne.value,De=Oe.find('div[data-toggle="'+ye+'"] input:checkbox');_e.CONFIG[ye]&&De.attr('checked',''),De.change(function(){_e.CONFIG[ye]=$(this).prop('checked'),_e.saveConfig()})},Ae=xe[Symbol.iterator]();!(he=(Ne=Ae.next()).done);he=!0)Re()}catch(ye){Ce=!0,Ge=ye}finally{try{!he&&Ae.return&&Ae.return()}finally{if(Ce)throw Ge}}$('input:text').bind('keydown',function(ye){'13'==ye.keyCode&&ge()}),'COIN_DYN'==_e.CONFIG.COIN_TYPE?$('div[data-toggle=\'COIN_DYN\'] input:radio').attr('checked',''):$('div[data-toggle=\'COIN_UID\'] input:radio').attr('checked','');'LIGHT_WHITE'==_e.CONFIG.LIGHT_METHOD?$('div[data-toggle=\'LIGHT_WHITE\'] input:radio').attr('checked',''):$('div[data-toggle=\'LIGHT_BLACK\'] input:radio').attr('checked','');'GIFT_INTERVAL'==_e.CONFIG.GIFT_METHOD?$('div[data-toggle=\'GIFT_INTERVAL\'] input:radio').attr('checked',''):$('div[data-toggle=\'GIFT_SEND_TIME\'] input:radio').attr('checked','');$('input:radio[name=\'COIN_TYPE\']').change(function(){var ye=$('div[data-toggle=\'COIN_DYN\'] input:radio').is(':checked');_e.CONFIG.COIN_TYPE=!0==ye?'COIN_DYN':'COIN_UID',_e.saveConfig()}),$('input:radio[name=\'LIGHT_TYPE\']').change(function(){var ye=$('div[data-toggle=\'LIGHT_WHITE\'] input:radio').is(':checked');_e.CONFIG.LIGHT_METHOD=!0==ye?'LIGHT_WHITE':'LIGHT_BLACK',_e.saveConfig()}),$('input:radio[name=\'GIFT_TYPE\']').change(function(){var ye=$('div[data-toggle=\'GIFT_INTERVAL\'] input:radio').is(':checked');_e.CONFIG.GIFT_METHOD=!0==ye?'GIFT_INTERVAL':'GIFT_SEND_TIME',_e.saveConfig()})},chatLog:function chatLog(ge){var ue=1<arguments.length&&arguments[1]!==void 0?arguments[1]:'info',ce=$('<div class=\'igiftMsg\'>'),Ie=$('<div>'),pe=$('#chat-history-list'),Te=new Date;Ie.text(ge),ce.text(Te.toLocaleString()),ce.append(Ie),ce.css({"text-align":'center',"border-radius":'4px',"min-height":'30px',width:'256px',color:'#9585FF',"line-height":'30px',padding:'0 10px',margin:'10px auto'}),Ie.css({"word-wrap":'break-word',width:'100%',"line-height":'1em',"margin-bottom":'10px'});'warning'===ue?ce.css({border:'1px solid rgb(236, 221, 192)',color:'rgb(218, 142, 36)',background:'rgb(245, 235, 221) none repeat scroll 0% 0%'}):'success'===ue?ce.css({border:'1px solid rgba(22, 140, 0, 0.28)',color:'rgb(69, 171, 69)',background:'none 0% 0% repeat scroll rgba(16, 255, 0, 0.18)'}):'error'===ue?ce.css({border:'1px solid rgb(255, 46, 0)',color:'white',background:'none 0% 0% repeat scroll #ff4c4c'}):ce.css({border:'1px solid rgb(203, 195, 255)',background:'rgb(233, 230, 255) none repeat scroll 0% 0%'});'show'==D?pe.find('#chat-items').append(ce):pe.find('#chat-items').append(ce.hide()),pe.scrollTop(pe.prop('scrollHeight'))},blocked:!1,max_blocked:!1,listen:function listen(ge,ue){var ce=2<arguments.length&&arguments[2]!==void 0?arguments[2]:'\u672C\u76F4\u64AD\u95F4';M.room.getConf(ge).then(function(Ie){K('\u83B7\u53D6\u5F39\u5E55\u670D\u52A1\u5668\u4FE1\u606F '+ce,Ie);var pe=new M.DanmuWebSocket(ue,ge,Ie.data.host_server_list,Ie.data.token);pe.bind(function(Te){pe=Te,_e.chatLog(ce+'\u5F39\u5E55\u670D\u52A1\u5668\u8FDE\u63A5\u65AD\u5F00\uFF0C\u5C1D\u8BD5\u91CD\u8FDE','warning')},function(){_e.chatLog('\u2014\u2014\u2014\u2014\u2014\u2014\u8FDE\u63A5\u5F39\u5E55\u670D\u52A1\u5668\u6210\u529F\u2014\u2014\u2014\u2014\u2014\u2014\n\u623F\u95F4\u53F7: '+ge+' \u5206\u533A: '+ce,'success')},function(){(_e.blocked||_e.stormBlack)&&(pe.close(),_e.chatLog('\u8FDB\u4E86\u5C0F\u9ED1\u5C4B\u4E3B\u52A8\u4E0E\u5F39\u5E55\u670D\u52A1\u5668\u65AD\u5F00\u8FDE\u63A5-'+ce,'warning')),_e.max_blocked&&!_e.CONFIG.STORM&&(pe.close(),_e.chatLog('\u8FA3\u6761\u6700\u5927\u503C\u4E3B\u52A8\u4E0E\u5F39\u5E55\u670D\u52A1\u5668\u65AD\u5F00\u8FDE\u63A5-'+ce,'warning'))},function(Te){if(!(E(_e.CONFIG.TIME_AREA_START_H0UR,_e.CONFIG.TIME_AREA_END_H0UR,_e.CONFIG.TIME_AREA_START_MINUTE,_e.CONFIG.TIME_AREA_END_MINUTE)&&_e.CONFIG.TIME_AREA_DISABLE))switch(K('\u5F39\u5E55\u516C\u544A'+ce,Te),Te.cmd){case'GUARD_MSG':Te.roomid===Te.real_roomid?_e.checkRoom(Te.roomid,ce):(_e.checkRoom(Te.roomid,ce),_e.checkRoom(Te.real_roomid,ce));break;case'PK_BATTLE_SETTLE_USER':Te.data.winner?_e.checkRoom(Te.data.winner.room_id,ce):_e.checkRoom(Te.data.my_info.room_id,ce),_e.checkRoom(Te.data.winner.room_id,ce);break;case'NOTICE_MSG':switch(Te.msg_type){case 1:break;case 2:case 3:case 4:case 8:Te.roomid===Te.real_roomid?_e.checkRoom(Te.roomid,ce):(_e.checkRoom(Te.roomid,ce),_e.checkRoom(Te.real_roomid,ce));break;case 5:break;case 6:window.toast('\u76D1\u63A7\u5230\u623F\u95F4 '+Te.roomid+' \u7684\u8282\u594F\u98CE\u66B4','info'),_e.Storm.run(Te.roomid);}break;case'SPECIAL_GIFT':if(Te.data[39])switch(Te.data[39].action){case'start':window.toast('\u76D1\u63A7\u5230\u623F\u95F4 '+Te.roomid+' \u7684\u8282\u594F\u98CE\u66B4','info'),_e.Storm.run(Te.roomid);case'end':};break;default:}})},function(){_e.chatLog('\u83B7\u53D6\u5F39\u5E55\u670D\u52A1\u5668\u5730\u5740\u9519\u8BEF','error')})},EntryRoom_list_history:{add:function add(ge){var ue=[];try{var ce=JSON.parse(localStorage.getItem(N+'_EntryRoom_list'));ue=[].concat(ce.list),ue.push(ge),100<ue.length&&ue.splice(0,50),localStorage.setItem(N+'_EntryRoom_list',JSON.stringify({list:ue})),K(N+'_EntryRoom_list_add',ue)}catch(ce){ue.push(ge),localStorage.setItem(N+'_EntryRoom_list',JSON.stringify({list:ue}))}},isIn:function isIn(ge){var ue=[];try{var ce=JSON.parse(localStorage.getItem(N+'_EntryRoom_list'));return ue=null===ce?[]:[].concat(ce.list),K(N+'_EntryRoom_list_read',ce),-1<ue.indexOf(ge)}catch(ce){return localStorage.setItem(N+'_EntryRoom_list',JSON.stringify({list:ue})),K('\u8BFB\u53D6'+(N+'_EntryRoom_list\u7F13\u5B58\u9519\u8BEF\u5DF2\u91CD\u7F6E')),-1<ue.indexOf(ge)}}},RoomId_list:[],err_roomId:[],auto_danmu_list:['(=\u30FB\u03C9\u30FB=)','\uFF08\uFFE3\u25BD\uFFE3\uFF09','nice','666','kksk','(\u2312\u25BD\u2312)','(\uFF40\u30FB\u03C9\u30FB\xB4)','\u256E(\uFFE3\u25BD\uFFE3)\u256D','(\uFFE33\uFFE3)','\u03A3( \uFFE3\u25A1\uFFE3||)','(^\u30FB\u03C9\u30FB^ )','_(:3\u300D\u2220)_'],checkRoom:function checkRoom(ge){var ue=1<arguments.length&&arguments[1]!==void 0?arguments[1]:'\u672C\u76F4\u64AD\u95F4';_e.blocked||_e.max_blocked||0<=_e.RoomId_list.indexOf(ge)||(_e.RoomId_list.push(ge),_e.EntryRoom_list_history.isIn(ge)||(M.room.room_entry_action(ge),_e.EntryRoom_list_history.add(ge)),C(_e.CONFIG.RANDOM_SEND_DANMU)&&M.sendLiveDanmu(_e.auto_danmu_list[_Mathfloor(12*Math.random())],ge).then(function(ce){K('\u5F39\u5E55\u53D1\u9001\u8FD4\u56DE\u4FE1\u606F',ce)}),M.xlive.lottery.check(ge).then(function(ce){_e.RoomId_list.remove(ge),K('\u68C0\u67E5\u623F\u95F4\u8FD4\u56DE\u4FE1\u606F',ce);var Ie=ce.data;if(0===ce.code){var pe;if(Ie.gift)for(var Te in pe=Ie.gift,pe)pe.hasOwnProperty(Te)&&_e.creat_join(ge,pe[Te],'gift',ue);if(Ie.guard)for(var Te in pe=Ie.guard,pe)pe.hasOwnProperty(Te)&&_e.creat_join(ge,pe[Te],'guard',ue);if(Ie.pk)for(var Te in pe=Ie.pk,pe)pe.hasOwnProperty(Te)&&_e.creat_join(ge,pe[Te],'pk',ue)}else _e.chatLog('[\u68C0\u67E5\u623F\u95F4\u51FA\u9519]'+response.msg,'error'),-1<_e.err_roomId.indexOf(ge)?K('[\u68C0\u67E5\u6B64\u623F\u95F4\u51FA\u9519\u591A\u6B21]'+ge+ce.message):(_e.err_roomId.push(ge),_e.checkRoom(ge,ue),K('[\u68C0\u67E5\u623F\u95F4\u51FA\u9519_\u91CD\u8BD5\u4E00\u6B21]'+ge+ce.message))}))},Id_list_history:{add:function add(ge,ue){var ce=[];try{var Ie=JSON.parse(localStorage.getItem(N+'_'+ue+'Id_list'));ce=[].concat(Ie.list),ce.push(ge),200<ce.length&&ce.splice(0,50),localStorage.setItem(N+'_'+ue+'Id_list',JSON.stringify({list:ce})),K(N+'_'+ue+'Id_list_add',ce)}catch(Ie){ce.push(ge),localStorage.setItem(N+'_'+ue+'Id_list',JSON.stringify({list:ce}))}},isIn:function isIn(ge,ue){var ce=[];try{var Ie=JSON.parse(localStorage.getItem(N+'_'+ue+'Id_list'));return ce=null===Ie?[]:[].concat(Ie.list),K(N+'_'+ue+'Id_list_read',Ie),-1<ce.indexOf(ge)}catch(Ie){return localStorage.setItem(N+'_'+ue+'Id_list',JSON.stringify({list:ce})),K('\u8BFB\u53D6'+(N+'_'+ue+'Id_list\u7F13\u5B58\u9519\u8BEF\u5DF2\u91CD\u7F6E')),-1<ce.indexOf(ge)}}},raffleId_list:[],guardId_list:[],pkId_list:[],creat_join:function creat_join(ge,ue,ce){var Ie=3<arguments.length&&void 0!==arguments[3]?arguments[3]:'\u672C\u76F4\u64AD\u95F4';if(K('\u793C\u7269\u4FE1\u606F',ue),_e.GIFT_COUNT.COUNT>=_e.CONFIG.MAX_GIFT)return K('\u8D85\u8FC7\u4ECA\u65E5\u8FA3\u6761\u9650\u5236\uFF0C\u4E0D\u53C2\u4E0E\u62BD\u5956'),void(_e.max_blocked=!0);switch(ce){case'gift':if(_e.Id_list_history.isIn(ue.raffleId,'raffle'))return void K('\u793C\u7269\u91CD\u590D','raffleId '+ue.raffleId);_e.raffleId_list.push(ue.raffleId),_e.Id_list_history.add(ue.raffleId,'raffle');break;case'guard':if(_e.Id_list_history.isIn(ue.id,'guard'))return void K('\u8230\u957F\u91CD\u590D','id '+ue.id);_e.guardId_list.push(ue.id),_e.Id_list_history.add(ue.id,'guard');break;case'pk':if(_e.Id_list_history.isIn(ue.id,'pk'))return void K('pk\u91CD\u590D','id '+ue.id);_e.pkId_list.push(ue.id),_e.Id_list_history.add(ue.id,'pk');}var pe=ue.time_wait||0;_e.CONFIG.RANDOM_DELAY&&(pe+=_Mathfloor(Math.random()*(_e.CONFIG.RND_DELAY_END-_e.CONFIG.RND_DELAY_START+1))+_e.CONFIG.RND_DELAY_START);var Te=$('<div class=\'igiftMsg\'>'),fe=$('<div>'),Ee=$('<div>'),me=$('#chat-history-list'),Oe=new Date;fe.text('['+Ie+']'+ue.thank_text.split('<%')[1].split('%>')[0]+ue.thank_text.split('%>')[1]),Te.text(Oe.toLocaleString()),Te.append(fe),Ee.css('color','red'),Ee.text('\u7B49\u5F85\u62BD\u5956'),fe.append(Ee),Te.css({"text-align":'center',"border-radius":'4px',"min-height":'30px',width:'256px',color:'#9585FF',"line-height":'30px',padding:'0 10px',margin:'10px auto'}),fe.css({"word-wrap":'break-word',width:'100%',"line-height":'1em',"margin-bottom":'10px'}),Te.css({border:'1px solid rgb(203, 195, 255)',background:'rgb(233, 230, 255) none repeat scroll 0% 0%'}),'show'==D?me.find('#chat-items').append(Te):me.find('#chat-items').append(Te.hide()),me.scrollTop(me.prop('scrollHeight'));var ve=setInterval(function(){Ee.text('\u7B49\u5F85\u62BD\u5956\u5012\u8BA1\u65F6'+pe+'\u79D2'),0>=pe&&(C(_e.CONFIG.RANDOM_SKIP)?Ee.text('\u8DF3\u8FC7\u6B64\u793C\u7269\u62BD\u5956'):(Ee.text('\u8FDB\u884C\u62BD\u5956...'),'gift'===ce?_e.gift_join(ge,ue.raffleId,ue.type).then(function(xe,he){Ee.text(xe),he&&(-1<xe.indexOf('\u8FA3\u6761')?_e.addGift(he):-1<xe.indexOf('\u94F6\u74DC\u5B50')&&_e.addSilver(he)),_e.raffleId_list.remove(ue.raffleId)}):'guard'===ce?_e.guard_join(ge,ue.id).then(function(xe,he){Ee.text(xe),he&&(-1<xe.indexOf('\u8FA3\u6761')?_e.addGift(he):-1<xe.indexOf('\u94F6\u74DC\u5B50')&&_e.addSilver(he)),_e.guardId_list.remove(ue.id)}):'pk'===ce?_e.pk_join(ge,ue.id).then(function(xe,he){Ee.text(xe),he&&(-1<xe.indexOf('\u8FA3\u6761')?_e.addGift(he):-1<xe.indexOf('\u94F6\u74DC\u5B50')&&_e.addSilver(he)),_e.pkId_list.remove(ue.id)}):void 0),Ee.css('color','green'),clearInterval(ve)),pe--},1e3)},gift_join:function gift_join(ge,ue,ce){var Ie=$.Deferred();return M.Lottery.Gift.join(ge,ue,ce).then(function(pe){switch(K('\u62BD\u5956\u8FD4\u56DE\u4FE1\u606F',pe),pe.code){case 0:pe.data.award_text?Ie.resolve(pe.data.award_text,pe.data.award_num):Ie.resolve(pe.data.award_name+'X'+pe.data.award_num.toString(),pe.data.award_num);break;default:-1<pe.msg.indexOf('\u62D2\u7EDD')?!1==_e.CONFIG.FORCE_LOTTERY?(_e.blocked=!0,Ie.resolve('\u8BBF\u95EE\u88AB\u62D2\u7EDD\uFF0C\u60A8\u7684\u5E10\u53F7\u53EF\u80FD\u5DF2\u7ECF\u88AB\u5173\u5C0F\u9ED1\u5C4B\uFF0C\u5DF2\u505C\u6B62')):5>=++L?_e.gift_join(ge,ue,ce):(L=0,Ie.resolve('[\u793C\u7269\u62BD\u5956](roomid='+ge+',id='+ue+',type='+ce+')'+pe.msg)):Ie.resolve('[\u793C\u7269\u62BD\u5956](roomid='+ge+',id='+ue+',type='+ce+')'+pe.msg);}}),Ie},guard_join:function guard_join(ge,ue){var ce=$.Deferred();return M.Lottery.Guard.join(ge,ue).then(function(Ie){switch(K('\u4E0A\u8239\u62BD\u5956\u8FD4\u56DE\u4FE1\u606F',Ie),Ie.code){case 0:Ie.data.award_text?ce.resolve(Ie.data.award_text,Ie.data.award_num):ce.resolve(Ie.data.award_name+'X'+Ie.data.award_num.toString(),Ie.data.award_num);break;default:-1<Ie.msg.indexOf('\u62D2\u7EDD')?!1==_e.CONFIG.FORCE_LOTTERY?(_e.blocked=!0,ce.resolve('\u8BBF\u95EE\u88AB\u62D2\u7EDD\uFF0C\u60A8\u7684\u5E10\u53F7\u53EF\u80FD\u5DF2\u7ECF\u88AB\u5173\u5C0F\u9ED1\u5C4B\uFF0C\u5DF2\u505C\u6B62')):5>=++S?_e.guard_join(ge,id):(S=0,ce.resolve('[\u793C\u7269\u62BD\u5956](roomid='+ge+',id='+raffleId+',type='+type+')'+Ie.msg)):ce.resolve('[\u4E0A\u8239](roomid='+ge+',id='+ue+')'+Ie.msg);}}),ce},pk_join:function pk_join(ge,ue){var ce=$.Deferred();return M.Lottery.Pk.join(ge,ue).then(function(Ie){switch(K('PK\u62BD\u5956\u8FD4\u56DE\u4FE1\u606F',Ie),Ie.code){case 0:Ie.data.award_text?ce.resolve(Ie.data.award_text,Ie.data.award_num):ce.resolve(Ie.data.award_name+'X'+Ie.data.award_num.toString(),Ie.data.award_num);break;default:-1<Ie.msg.indexOf('\u62D2\u7EDD')?!1==_e.CONFIG.FORCE_LOTTERY?(_e.blocked=!0,ce.resolve('\u8BBF\u95EE\u88AB\u62D2\u7EDD\uFF0C\u60A8\u7684\u5E10\u53F7\u53EF\u80FD\u5DF2\u7ECF\u88AB\u5173\u5C0F\u9ED1\u5C4B\uFF0C\u5DF2\u505C\u6B62')):5>=++F?_e.pk_join(ge,id):(F=0,ce.resolve('[\u793C\u7269\u62BD\u5956](roomid='+ge+',id='+raffleId+',type='+type+')'+Ie.msg)):ce.resolve('[PK](roomid='+ge+',id='+ue+')'+Ie.msg);}}),ce},GroupSign:{getGroups:function getGroups(){return M.Group.my_groups().then(function(ge){return(K('GroupSign.getGroups: API.Group.my_groups',ge),0===ge.code)?$.Deferred().resolve(ge.data.list):(window.toast('[\u81EA\u52A8\u5E94\u63F4\u56E2\u7B7E\u5230]\''+ge.msg,'caution'),$.Deferred().reject())},function(){return window.toast('[\u81EA\u52A8\u5E94\u63F4\u56E2\u7B7E\u5230]\u83B7\u53D6\u5E94\u63F4\u56E2\u5217\u8868\u5931\u8D25\uFF0C\u8BF7\u68C0\u67E5\u7F51\u7EDC','error'),V(function(){return _e.GroupSign.getGroups()})})},signInList:function signInList(ge){var ue=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0;if(ue>=ge.length)return $.Deferred().resolve();var ce=ge[ue];return ce.owner_uid==Y.uid?GroupSign.signInList(ge,ue+1):M.Group.sign_in(ce.group_id,ce.owner_uid).then(function(Ie){K('GroupSign.signInList: API.Group.sign_in',Ie);var pe=$.Deferred();if(0===Ie.code)0<Ie.data.add_num?(window.toast('[\u81EA\u52A8\u5E94\u63F4\u56E2\u7B7E\u5230]\u5E94\u63F4\u56E2(group_id='+ce.group_id+',owner_uid='+ce.owner_uid+')\u7B7E\u5230\u6210\u529F\uFF0C\u5F53\u524D\u52CB\u7AE0\u4EB2\u5BC6\u5EA6+'+Ie.data.add_num,'success'),pe.resolve()):0==Ie.data.add_num?(window.toast('[\u81EA\u52A8\u5E94\u63F4\u56E2\u7B7E\u5230]\u5E94\u63F4\u56E2(group_id='+ce.group_id+',owner_uid='+ce.owner_uid+')\u5DF2\u7B7E\u5230','caution'),pe.resolve()):pe.reject();else return window.toast('[\u81EA\u52A8\u5E94\u63F4\u56E2\u7B7E\u5230]\''+Ie.msg,'caution'),$.Deferred().reject();return $.when(_e.GroupSign.signInList(ge,ue+1),pe)},function(){return window.toast('[\u81EA\u52A8\u5E94\u63F4\u56E2\u7B7E\u5230]\u5E94\u63F4\u56E2(group_id='+ce.group_id+',owner_uid='+ce.owner_uid+')\u7B7E\u5230\u5931\u8D25\uFF0C\u8BF7\u68C0\u67E5\u7F51\u7EDC','error'),V(function(){return _e.GroupSign.signInList(ge,ue)})})},run:function run(){try{return _e.CONFIG.AUTO_GROUP_SIGN?de(_e.CACHE.AUTO_GROUP_SIGH_TS)?8>new Date().getHours()&&0!=_e.CACHE.AUTO_GROUP_SIGH_TS?(setTimeout(_e.GroupSign.run,u(8,0)),$.Deferred().resolve()):_e.GroupSign.getGroups().then(function(ge){return _e.GroupSign.signInList(ge).then(function(){return _e.CACHE.AUTO_GROUP_SIGH_TS=B(),_e.saveCache(),Z(_e.GroupSign.run,8,0,'\u5E94\u63F4\u56E2\u7B7E\u5230'),$.Deferred().resolve()},function(){return V(function(){return _e.GroupSign.run()})})},function(){return V(function(){return _e.GroupSign.run()})}):(Z(_e.GroupSign.run,8,0,'\u5E94\u63F4\u56E2\u7B7E\u5230'),$.Deferred().resolve()):$.Deferred().resolve()}catch(ge){return window.toast('[\u81EA\u52A8\u5E94\u63F4\u56E2\u7B7E\u5230]\u8FD0\u884C\u65F6\u51FA\u73B0\u5F02\u5E38\uFF0C\u5DF2\u505C\u6B62','error'),console.error('['+N+']',ge),$.Deferred().reject()}}},DailyReward:{coin_exp:0,login:function login(){return M.DailyReward.login().then(function(){K('DailyReward.login: API.DailyReward.login'),window.toast('[\u81EA\u52A8\u6BCF\u65E5\u5956\u52B1][\u6BCF\u65E5\u767B\u5F55]\u5B8C\u6210','success')},function(){return window.toast('[\u81EA\u52A8\u6BCF\u65E5\u5956\u52B1][\u6BCF\u65E5\u767B\u5F55]\u5B8C\u6210\u5931\u8D25\uFF0C\u8BF7\u68C0\u67E5\u7F51\u7EDC','error'),V(function(){return _e.DailyReward.login()})})},watch:function watch(ge,ue){return _e.CONFIG.WATCH?M.DailyReward.watch(ge,ue,Y.uid,P()).then(function(ce){K('DailyReward.watch: API.DailyReward.watch',ce),0===ce.code?window.toast('[\u81EA\u52A8\u6BCF\u65E5\u5956\u52B1][\u6BCF\u65E5\u89C2\u770B]\u5B8C\u6210(av='+ge+')','success'):window.toast('[\u81EA\u52A8\u6BCF\u65E5\u5956\u52B1][\u6BCF\u65E5\u89C2\u770B]\''+ce.msg,'caution')},function(){return window.toast('[\u81EA\u52A8\u6BCF\u65E5\u5956\u52B1][\u6BCF\u65E5\u89C2\u770B]\u5B8C\u6210\u5931\u8D25\uFF0C\u8BF7\u68C0\u67E5\u7F51\u7EDC','error'),V(function(){return _e.DailyReward.watch(ge,ue)})}):$.Deferred().resolve()},coin:function coin(ge,ue){var ce=2<arguments.length&&arguments[2]!==void 0?arguments[2]:0,Ie=3<arguments.length&&arguments[3]!==void 0&&arguments[3];if(!_e.CONFIG.COIN)return $.Deferred().resolve();if(_e.DailyReward.coin_exp>=10*_e.CONFIG.COIN_NUMBER)return window.toast('[\u81EA\u52A8\u6BCF\u65E5\u5956\u52B1][\u6BCF\u65E5\u6295\u5E01]\u4ECA\u65E5\u6295\u5E01\u5DF2\u5B8C\u6210','info'),$.Deferred().resolve();if(ce>=ge.length)return window.toast('[\u81EA\u52A8\u6BCF\u65E5\u5956\u52B1][\u6BCF\u65E5\u6295\u5E01]\u52A8\u6001\u91CC\u53EF\u6295\u5E01\u7684\u89C6\u9891\u4E0D\u8DB3','caution'),$.Deferred().resolve();var pe=JSON.parse(ge[ce].card),Te=_Mathmin(2,ue);Ie&&(Te=1),M.x.getCoinInfo('','jsonp',pe.aid,B()).then(function(fe){return 2===fe.data.multiply?(K('API.x.getCoinInfo','\u5DF2\u6295\u5E01\u4E24\u4E2A aid = '+pe.aid),_e.DailyReward.coin(vlist,ue,ce+1)):M.DailyReward.coin(pe.aid,Te).then(function(Ee){return(K('DailyReward.coin: API.DailyReward.coin',Ee),0===Ee.code)?(_e.DailyReward.coin_exp+=10*Te,window.toast('[\u81EA\u52A8\u6BCF\u65E5\u5956\u52B1][\u6BCF\u65E5\u6295\u5E01]\u6295\u5E01\u6210\u529F(av='+pe.aid+',num='+Te+')','success'),_e.DailyReward.coin(ge,ue-Te,ce+1)):-110===Ee.code?(window.toast('[\u81EA\u52A8\u6BCF\u65E5\u5956\u52B1][\u6BCF\u65E5\u6295\u5E01]\u672A\u7ED1\u5B9A\u624B\u673A\uFF0C\u5DF2\u505C\u6B62','error'),$.Deferred().reject()):34003===Ee.code?Ie?_e.DailyReward.coin(ge,ue,ce+1):_e.DailyReward.coin(ge,ue,ce,!0):34005===Ee.code?_e.DailyReward.coin(ge,ue,ce+1):-104===Ee.code?(window.toast('[\u81EA\u52A8\u6BCF\u65E5\u5956\u52B1][\u6BCF\u65E5\u6295\u5E01]\u5269\u4F59\u786C\u5E01\u4E0D\u8DB3\uFF0C\u5DF2\u505C\u6B62','warning'),$.Deferred().reject()):(window.toast('[\u81EA\u52A8\u6BCF\u65E5\u5956\u52B1][\u6BCF\u65E5\u6295\u5E01]\''+Ee.msg,'caution'),_e.DailyReward.coin(ge,ue,ce+1))},function(){return V(function(){return _e.DailyReward.coin(ge,ue,ce)})})})},coin_uid:function coin_uid(ge,ue,ce,Ie){var pe=4<arguments.length&&arguments[4]!==void 0?arguments[4]:0,Te=5<arguments.length&&arguments[5]!==void 0&&arguments[5];if(!_e.CONFIG.COIN)return $.Deferred().resolve();if(_e.DailyReward.coin_exp>=10*_e.CONFIG.COIN_NUMBER)return window.toast('[\u81EA\u52A8\u6BCF\u65E5\u5956\u52B1][\u6BCF\u65E5\u6295\u5E01]\u4ECA\u65E5\u6295\u5E01\u5DF2\u5B8C\u6210','info'),$.Deferred().resolve();pe>=ge.length&&_e.DailyReward.UserSpace(_e.CONFIG.COIN_UID,30,0,ce++,'','pubdate','jsonp');var fe=ge[pe];if(1===fe.is_union_video||fe.mid!=Ie)return K('DailyReward.coin_uid','\u8054\u5408\u6295\u7A3F\u4E14UP\u4E0D\u662F\u6307\u5B9AUID\u7528\u6237 aid = '+fe.aid),_e.DailyReward.coin_uid(ge,ue,ce,Ie,pe+1);var Ee=_Mathmin(2,ue);Te&&(Ee=1),M.x.getCoinInfo('','jsonp',fe.aid,B()).then(function(me){return 2===me.data.multiply?(K('API.x.getCoinInfo','\u5DF2\u6295\u5E01\u4E24\u4E2A aid = '+fe.aid),_e.DailyReward.coin_uid(ge,ue,ce,Ie,pe+1)):M.DailyReward.coin(fe.aid,Ee).then(function(Oe){return(K('DailyReward.coin_uid: API.DailyReward.coin_uid',Oe),0===Oe.code)?(_e.DailyReward.coin_exp+=10*Ee,window.toast('[\u81EA\u52A8\u6BCF\u65E5\u5956\u52B1][\u6BCF\u65E5\u6295\u5E01]\u6295\u5E01\u6210\u529F(av='+fe.aid+',num='+Ee+')','success'),_e.DailyReward.coin_uid(ge,ue-Ee,ce,Ie,pe+1)):-110===Oe.code?(window.toast('[\u81EA\u52A8\u6BCF\u65E5\u5956\u52B1][\u6BCF\u65E5\u6295\u5E01]\u672A\u7ED1\u5B9A\u624B\u673A\uFF0C\u5DF2\u505C\u6B62','error'),$.Deferred().reject()):34003===Oe.code?Te?_e.DailyReward.coin_uid(ge,ue,ce,Ie,pe+1):_e.DailyReward.coin_uid(ge,ue,pe,ce,Ie,!0):34005===Oe.code?_e.DailyReward.coin_uid(ge,ue,ce,Ie,pe+1):-104===Oe.code?(window.toast('[\u81EA\u52A8\u6BCF\u65E5\u5956\u52B1][\u6BCF\u65E5\u6295\u5E01]\u5269\u4F59\u786C\u5E01\u4E0D\u8DB3\uFF0C\u5DF2\u505C\u6B62','warning'),$.Deferred().reject()):(window.toast('[\u81EA\u52A8\u6BCF\u65E5\u5956\u52B1][\u6BCF\u65E5\u6295\u5E01]\''+Oe.msg,'caution'),_e.DailyReward.coin_uid(ge,ue,ce,Ie,pe+1))},function(){return V(function(){return _e.DailyReward.coin_uid(ge,ue,ce,Ie,pe)})})})},share:function share(ge){return _e.CONFIG.SHARE?M.DailyReward.share(ge).then(function(ue){K('DailyReward.share: API.DailyReward.share',ue),0===ue.code?window.toast('[\u81EA\u52A8\u6BCF\u65E5\u5956\u52B1][\u6BCF\u65E5\u5206\u4EAB]\u5206\u4EAB\u6210\u529F(av='+ge+')','success'):71000===ue.code?window.toast('[\u81EA\u52A8\u6BCF\u65E5\u5956\u52B1][\u6BCF\u65E5\u5206\u4EAB]\u4ECA\u65E5\u5206\u4EAB\u5DF2\u5B8C\u6210','info'):window.toast('[\u81EA\u52A8\u6BCF\u65E5\u5956\u52B1][\u6BCF\u65E5\u5206\u4EAB]\''+ue.msg,'caution')},function(){return window.toast('[\u81EA\u52A8\u6BCF\u65E5\u5956\u52B1][\u6BCF\u65E5\u5206\u4EAB]\u5206\u4EAB\u5931\u8D25\uFF0C\u8BF7\u68C0\u67E5\u7F51\u7EDC','error'),V(function(){return _e.DailyReward.share(ge)})}):$.Deferred().resolve()},dynamic:function(){var ge=_asyncToGenerator(regeneratorRuntime.mark(function ue(){var ce,Ie;return regeneratorRuntime.wrap(function(Te){for(;;)switch(Te.prev=Te.next){case 0:return ce=void 0,Ie=_e.CONFIG.COIN_NUMBER-_e.DailyReward.coin_exp/10,Te.next=4,M.getuserinfo().then(function(fe){return K('DailyReward.dynamic: API.getuserinfo',fe),fe.data.biliCoin<Ie?fe.data.biliCoin:Ie});case 4:return ce=Te.sent,ce<Ie&&window.toast('[\u81EA\u52A8\u6BCF\u65E5\u5956\u52B1][\u6BCF\u65E5\u6295\u5E01]\u5269\u4F59\u786C\u5E01\u4E0D\u8DB3\uFF0C\u4EC5\u80FD\u6295'+ce+'\u4E2A\u5E01','warning'),Te.abrupt('return',M.dynamic_svr.dynamic_new(Y.uid,8).then(function(fe){if(K('DailyReward.dynamic: API.dynamic_svr.dynamic_new',fe),0===fe.code){if(!!fe.data.cards){var Oe,Ee=JSON.parse(fe.data.cards[0].card),me=_e.DailyReward.watch(Ee.aid,Ee.cid);Oe=0==_e.CONFIG.COIN_UID||'COIN_DYN'==_e.CONFIG.COIN_TYPE?_e.DailyReward.coin(fe.data.cards,_Mathmax(ce,0)):_e.DailyReward.UserSpace(_e.CONFIG.COIN_UID,30,0,1,'','pubdate','jsonp');var ve=_e.DailyReward.share(Ee.aid);return $.when(me,Oe,ve)}window.toast('[\u81EA\u52A8\u6BCF\u65E5\u5956\u52B1]"\u52A8\u6001-\u6295\u7A3F\u89C6\u9891"\u4E2D\u6682\u65E0\u52A8\u6001','info')}else window.toast('[\u81EA\u52A8\u6BCF\u65E5\u5956\u52B1]\u83B7\u53D6"\u52A8\u6001-\u6295\u7A3F\u89C6\u9891"\''+fe.msg,'caution')},function(){return window.toast('[\u81EA\u52A8\u6BCF\u65E5\u5956\u52B1]\u83B7\u53D6"\u52A8\u6001-\u6295\u7A3F\u89C6\u9891"\u5931\u8D25\uFF0C\u8BF7\u68C0\u67E5\u7F51\u7EDC','error'),V(function(){return _e.DailyReward.dynamic()})}));case 7:case'end':return Te.stop();}},ue,se)}));return function dynamic(){return ge.apply(this,arguments)}}(),UserSpace:function UserSpace(ge,ue,ce,Ie,pe,Te,fe){return M.x.getUserSpace(ge,ue,ce,Ie,pe,Te,fe).then(function(Ee){if(K('DailyReward.UserSpace: API.dynamic_svr.UserSpace',Ee),0===Ee.code){if(!!Ee.data.list.vlist){var me=_e.CONFIG.COIN_NUMBER-_e.DailyReward.coin_exp/10,Oe=_e.DailyReward.coin_uid(Ee.data.list.vlist,_Mathmax(me,0),Ie,ge);return Oe}window.toast('[\u81EA\u52A8\u6BCF\u65E5\u5956\u52B1]"\u7A7A\u95F4-\u6295\u7A3F\u89C6\u9891"\u4E2D\u6682\u65E0\u89C6\u9891','info')}else window.toast('[\u81EA\u52A8\u6BCF\u65E5\u5956\u52B1]\u83B7\u53D6"\u7A7A\u95F4-\u6295\u7A3F\u89C6\u9891"\''+Ee.msg,'caution')},function(){return window.toast('[\u81EA\u52A8\u6BCF\u65E5\u5956\u52B1]\u83B7\u53D6"\u7A7A\u95F4-\u6295\u7A3F\u89C6\u9891"\u5931\u8D25\uFF0C\u8BF7\u68C0\u67E5\u7F51\u7EDC','error'),V(function(){return _e.DailyReward.UserSpace(ge,ue,ce,Ie,pe,Te,fe)})})},run:function run(){try{return de(_e.CACHE.DailyReward_TS)?M.DailyReward.exp().then(function(ge){return K('DailyReward.run: API.DailyReward.exp',ge),0===ge.code?(_e.DailyReward.coin_exp=ge.number,_e.DailyReward.login(),_e.DailyReward.dynamic().then(function(){_e.CACHE.DailyReward_TS=B(),_e.saveCache(),Q(_e.DailyReward.run,'\u6BCF\u65E5\u4EFB\u52A1')})):void window.toast('[\u81EA\u52A8\u6BCF\u65E5\u5956\u52B1]'+ge.message,'caution')},function(){return window.toast('[\u81EA\u52A8\u6BCF\u65E5\u5956\u52B1]\u83B7\u53D6\u6BCF\u65E5\u5956\u52B1\u4FE1\u606F\u5931\u8D25\uFF0C\u8BF7\u68C0\u67E5\u7F51\u7EDC','error'),V(function(){return _e.DailyReward.run()})}):(Q(_e.DailyReward.run,'\u6BCF\u65E5\u4EFB\u52A1'),$.Deferred().resolve())}catch(ge){return window.toast('[\u81EA\u52A8\u6BCF\u65E5\u5956\u52B1]\u8FD0\u884C\u65F6\u51FA\u73B0\u5F02\u5E38','error'),console.error('['+N+']',ge),$.Deferred().reject()}}},LiveReward:{dailySignIn:function dailySignIn(){return M.xlive.dosign().then(function(ge){K('LiveReward.dailySignIn: API.xlive.dosign',ge),0===ge.code?window.toast('[\u81EA\u52A8\u76F4\u64AD\u7B7E\u5230]\u5B8C\u6210','success'):1011040===ge.code?window.toast('[\u81EA\u52A8\u76F4\u64AD\u7B7E\u5230]\u4ECA\u65E5\u76F4\u64AD\u7B7E\u5230\u5DF2\u5B8C\u6210','info'):window.toast('[\u81EA\u52A8\u76F4\u64AD\u7B7E\u5230]'+ge.message,'caution')},function(){return window.toast('[\u81EA\u52A8\u76F4\u64AD\u7B7E\u5230]\u76F4\u64AD\u7B7E\u5230\u5931\u8D25\uFF0C\u8BF7\u68C0\u67E5\u7F51\u7EDC','error'),V(function(){return _e.LiveReward.dailySignIn()})})},run:function run(){try{if(!_e.CONFIG.LIVE_SIGN)return $.Deferred().resolve();if(!de(_e.CACHE.LiveReward_TS))return Q(_e.LiveReward.run,'\u76F4\u64AD\u7B7E\u5230'),$.Deferred().resolve();_e.LiveReward.dailySignIn(),_e.CACHE.LiveReward_TS=B(),_e.saveCache(),Q(_e.LiveReward.run,'\u76F4\u64AD\u7B7E\u5230')}catch(ge){return window.toast('[\u81EA\u52A8\u76F4\u64AD\u7B7E\u5230]\u8FD0\u884C\u65F6\u51FA\u73B0\u5F02\u5E38','error'),console.error('['+N+']',ge),$.Deferred().reject()}}},Exchange:{silver2coin:function silver2coin(){return M.Exchange.silver2coin().then(function(ge){K('Exchange.silver2coin: API.SilverCoinExchange.silver2coin',ge),0===ge.code?window.toast('[\u94F6\u74DC\u5B50\u6362\u786C\u5E01]'+ge.msg,'success'):403===ge.code?window.toast('[\u94F6\u74DC\u5B50\u6362\u786C\u5E01]'+ge.msg,'info'):window.toast('[\u94F6\u74DC\u5B50\u6362\u786C\u5E01]'+ge.msg,'caution')},function(){return window.toast('[\u94F6\u74DC\u5B50\u6362\u786C\u5E01]\u5151\u6362\u5931\u8D25\uFF0C\u8BF7\u68C0\u67E5\u7F51\u7EDC','error'),V(function(){return _e.Exchange.silver2coin()})})},runS2C:function runS2C(){try{return _e.CONFIG.SILVER2COIN?de(_e.CACHE.Silver2Coin_TS)?_e.Exchange.silver2coin().then(function(){_e.CACHE.Silver2Coin_TS=B(),_e.saveCache(),Q(_e.Exchange.runS2C,'\u74DC\u5B50\u6362\u786C\u5E01')},function(){return V(function(){return _e.Exchange.runS2C()})}):(Q(_e.Exchange.runS2C,'\u74DC\u5B50\u6362\u786C\u5E01'),$.Deferred().resolve()):$.Deferred().resolve()}catch(ge){return window.toast('[\u94F6\u74DC\u5B50\u6362\u786C\u5E01]\u8FD0\u884C\u65F6\u51FA\u73B0\u5F02\u5E38\uFF0C\u5DF2\u505C\u6B62','error'),console.error('['+N+']',ge),$.Deferred().reject()}}},TreasureBox:{timer:void 0,time_end:void 0,time_start:void 0,promise:{calc:void 0,timer:void 0},DOM:{image:void 0,canvas:void 0,div_tip:void 0,div_timer:void 0},init:function init(){if(!_e.CONFIG.AUTO_TREASUREBOX)return $.Deferred().resolve();var ge=$.Deferred();return X(function(){try{if($('.draw-box.gift-left-part').length)return window.toast('[\u81EA\u52A8\u9886\u53D6\u74DC\u5B50]\u5F53\u524D\u76F4\u64AD\u95F4\u6709\u5B9E\u7269\u62BD\u5956\uFF0C\u6682\u505C\u9886\u74DC\u5B50\u529F\u80FD','caution'),ge.resolve(),!0;var ue=$('#gift-control-vm div.treasure-box.p-relative');if(!ue.length)return!1;ue=ue.first(),ue.attr('id','old_treasure_box'),ue.hide();var ce=$('<div id="'+N+'_treasure_div" class="treasure-box p-relative" style="min-width: 46px;display: inline-block;float: left;padding: 22px 0 0 15px;"></div>');_e.TreasureBox.DOM.div_tip=$('<div id="'+N+'_treasure_div_tip" class="t-center b-box none-select">\u81EA\u52A8<br>\u9886\u53D6\u4E2D</div>'),_e.TreasureBox.DOM.div_timer=$('<div id="'+N+'_treasure_div_timer" class="t-center b-box none-select">0</div>'),_e.TreasureBox.DOM.image=$('<img id="'+N+'_treasure_image" style="display:none">'),_e.TreasureBox.DOM.canvas=$('<canvas id="'+N+'_treasure_canvas" style="display:none" height="40" width="120"></canvas>');var Ie='min-width: 40px;padding: 2px 3px;margin-top: 3px;font-size: 12px;color: #fff;background-color: rgba(0,0,255,.5);border-radius: 10px;';_e.TreasureBox.DOM.div_tip[0].style=Ie,_e.TreasureBox.DOM.div_timer[0].style=Ie,ce.append(_e.TreasureBox.DOM.div_tip),ce.append(_e.TreasureBox.DOM.image),ce.append(_e.TreasureBox.DOM.canvas),_e.TreasureBox.DOM.div_tip.after(_e.TreasureBox.DOM.div_timer),ue.after(ce);try{if(OCRAD);}catch(pe){return _e.TreasureBox.setMsg('\u521D\u59CB\u5316<br>\u5931\u8D25'),window.toast('[\u81EA\u52A8\u9886\u53D6\u74DC\u5B50]OCRAD\u521D\u59CB\u5316\u5931\u8D25\uFF0C\u8BF7\u68C0\u67E5\u7F51\u7EDC','error'),console.error('['+N+']',pe),ge.resolve(),!0}return _e.TreasureBox.timer=setInterval(function(){var pe=parseInt(_e.TreasureBox.DOM.div_timer.text(),10);isNaN(pe)&&(pe=0),0<pe?_e.TreasureBox.DOM.div_timer.text(pe-1+'s'):_e.TreasureBox.DOM.div_timer.hide()},1e3),_e.TreasureBox.DOM.image[0].onload=function(){var pe=_e.TreasureBox.DOM.canvas[0].getContext('2d');pe.font='40px agencyfbbold',pe.textBaseline='top',pe.clearRect(0,0,_e.TreasureBox.DOM.canvas[0].width,_e.TreasureBox.DOM.canvas[0].height),pe.drawImage(_e.TreasureBox.DOM.image[0],0,0);var Te=_e.TreasureBox.captcha.OCR.getGrayscaleMap(pe),fe=_e.TreasureBox.captcha.OCR.orderFilter2In3x3(Te);pe.clearRect(0,0,120,40);for(var me,Ee=0;Ee<fe.length;++Ee)me=fe[Ee],pe.fillStyle='rgb('+me+', '+me+', '+me+')',pe.fillRect(Ee%120,_Mathround(Ee/120),1,1);try{var Ee=_e.TreasureBox.captcha.correctQuestion(OCRAD(pe.getImageData(0,0,120,40)));K('TreasureBox.DOM.image.load','question =',Ee);var me=_e.TreasureBox.captcha.eval(Ee);K('TreasureBox.DOM.image.load','answer =',me),void 0!==me&&(console.info('['+N+'][\u81EA\u52A8\u9886\u53D6\u74DC\u5B50]\u9A8C\u8BC1\u7801\u8BC6\u522B\u7ED3\u679C: '+Ee+' = '+me),_e.TreasureBox.promise.calc.resolve(me))}catch(Ee){_e.TreasureBox.promise.calc.reject()}},ge.resolve(),!0}catch(ue){return window.toast('[\u81EA\u52A8\u9886\u53D6\u74DC\u5B50]\u521D\u59CB\u5316\u65F6\u51FA\u73B0\u5F02\u5E38\uFF0C\u5DF2\u505C\u6B62','error'),console.error('['+N+']',ue),ge.reject(),!0}}),ge},run:function run(){try{if(!_e.CONFIG.AUTO_TREASUREBOX||!_e.TreasureBox.timer)return;if(Y.blocked)return _e.TreasureBox.setMsg('\u5C0F\u9ED1\u5C4B'),void window.toast('[\u81EA\u52A8\u9886\u53D6\u74DC\u5B50]\u5E10\u53F7\u88AB\u5173\u5C0F\u9ED1\u5C4B\uFF0C\u505C\u6B62\u9886\u53D6\u74DC\u5B50','caution');if(!de(_e.CACHE.TreasureBox_TS))return _e.TreasureBox.setMsg('\u4ECA\u65E5<br>\u5DF2\u9886\u5B8C'),void Q(_e.TreasureBox.run,'\u9886\u94F6\u74DC\u5B50\u5B9D\u7BB1');_e.TreasureBox.getCurrentTask().then(function(ge){if(K('TreasureBox.run: TreasureBox.getCurrentTask().then',ge),0===ge.code){_e.TreasureBox.promise.timer=$.Deferred(),_e.TreasureBox.promise.timer.then(function(){_e.TreasureBox.captcha.calc().then(function(ce){_e.TreasureBox.getAward(ce).then(function(){return _e.TreasureBox.run()},function(){return _e.TreasureBox.run()})},function(){return TreasureBox.run()})}),_e.TreasureBox.time_end=ge.data.time_end,_e.TreasureBox.time_start=ge.data.time_start;var ue=_e.TreasureBox.time_end-P()+1;0>ue&&(ue=0),setTimeout(function(){_e.TreasureBox.promise.timer&&_e.TreasureBox.promise.timer.resolve()},1e3*ue),_e.TreasureBox.DOM.div_timer.text(ue+'s'),_e.TreasureBox.DOM.div_timer.show(),_e.TreasureBox.DOM.div_tip.html('\u8F6E\u6570<br>'+ge.data.times+'/'+ge.data.max_times+'<br>\u94F6\u74DC\u5B50<br>'+ge.data.silver)}else if(-10017===ge.code)_e.TreasureBox.setMsg('\u4ECA\u65E5<br>\u5DF2\u9886\u5B8C'),_e.CACHE.TreasureBox_TS=B(),_e.saveCache(),Q(_e.TreasureBox.run,'\u9886\u94F6\u74DC\u5B50\u5B9D\u7BB1');else if(-500===ge.code)location.reload();else return window.toast('[\u81EA\u52A8\u9886\u53D6\u74DC\u5B50]'+ge.msg,'caution'),_e.TreasureBox.run()})}catch(ge){_e.TreasureBox.setMsg('\u8FD0\u884C<br>\u5F02\u5E38'),window.toast('[\u81EA\u52A8\u9886\u53D6\u74DC\u5B50]\u8FD0\u884C\u65F6\u51FA\u73B0\u5F02\u5E38\uFF0C\u5DF2\u505C\u6B62','error'),console.error('['+N+']',ge)}},setMsg:function setMsg(ge){_e.CONFIG.AUTO_TREASUREBOX&&(_e.TreasureBox.promise.timer&&(_e.TreasureBox.promise.timer.reject(),_e.TreasureBox.promise.timer=void 0),_e.TreasureBox.DOM.div_timer&&_e.TreasureBox.DOM.div_timer.hide(),_e.TreasureBox.DOM.div_tip&&_e.TreasureBox.DOM.div_tip.html(ge))},getAward:function getAward(ge){var ue=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0;return _e.CONFIG.AUTO_TREASUREBOX?3<ue?$.Deferred().resolve():M.TreasureBox.getAward(_e.TreasureBox.time_start,_e.TreasureBox.time_end,ge).then(function(){var ce=_asyncToGenerator(regeneratorRuntime.mark(function Ie(pe){var Te;return regeneratorRuntime.wrap(function(Ee){for(;;)switch(Ee.prev=Ee.next){case 0:K('TreasureBox.getAward: getAward',pe),Ee.t0=pe.code,Ee.next=0===Ee.t0?4:-903===Ee.t0?5:-902===Ee.t0?6:-901===Ee.t0?6:-10017===Ee.t0?6:-800===Ee.t0?9:-500===Ee.t0?12:400===Ee.t0?15:22;break;case 4:window.toast('[\u81EA\u52A8\u9886\u53D6\u74DC\u5B50]\u9886\u53D6\u4E86 '+pe.data.awardSilver+' \u94F6\u74DC\u5B50','success');case 5:return Ee.abrupt('return',$.Deferred().resolve());case 6:return Ee.next=8,O(150);case 8:return Ee.abrupt('return',_e.TreasureBox.captcha.calc().then(function(me){return _e.TreasureBox.getAward(me,ue)}));case 9:return _e.TreasureBox.setMsg('\u672A\u7ED1\u5B9A<br>\u624B\u673A'),window.toast('[\u81EA\u52A8\u9886\u53D6\u74DC\u5B50]\u672A\u7ED1\u5B9A\u624B\u673A\uFF0C\u5DF2\u505C\u6B62','caution'),Ee.abrupt('return',$.Deferred().reject());case 12:return Te=$.Deferred(),setTimeout(function(){_e.TreasureBox.captcha.calc().then(function(me){_e.TreasureBox.getAward(me,ue+1).then(function(){return Te.resolve()},function(){return Te.reject()})},function(){return Te.reject()})},3e3),Ee.abrupt('return',Te);case 15:if(!(-1<pe.msg.indexOf('\u62D2\u7EDD'))){Ee.next=20;break}return Y.blocked=!0,_e.TreasureBox.setMsg('\u62D2\u7EDD<br>\u8BBF\u95EE'),window.toast('[\u81EA\u52A8\u9886\u53D6\u74DC\u5B50]\u8BBF\u95EE\u88AB\u62D2\u7EDD\uFF0C\u60A8\u7684\u5E10\u53F7\u53EF\u80FD\u5DF2\u7ECF\u88AB\u5173\u5C0F\u9ED1\u5C4B\uFF0C\u5DF2\u505C\u6B62','error'),Ee.abrupt('return',$.Deferred().reject());case 20:return window.toast('[\u81EA\u52A8\u9886\u53D6\u74DC\u5B50]'+pe.msg,'caution'),Ee.abrupt('return',$.Deferred().resolve());case 22:window.toast('[\u81EA\u52A8\u9886\u53D6\u74DC\u5B50]'+pe.msg,'caution');case 23:case'end':return Ee.stop();}},Ie,se)}));return function(){return ce.apply(this,arguments)}}(),function(){return window.toast('[\u81EA\u52A8\u9886\u53D6\u74DC\u5B50]\u83B7\u53D6\u4EFB\u52A1\u5931\u8D25\uFF0C\u8BF7\u68C0\u67E5\u7F51\u7EDC','error'),V(function(){return _e.TreasureBox.getAward(ge,ue)})}):$.Deferred().reject()},getCurrentTask:function getCurrentTask(){return _e.CONFIG.AUTO_TREASUREBOX?M.TreasureBox.getCurrentTask().then(function(ge){return K('TreasureBox.getCurrentTask: API.TreasureBox.getCurrentTask',ge),$.Deferred().resolve(ge)},function(){return window.toast('[\u81EA\u52A8\u9886\u53D6\u74DC\u5B50]\u83B7\u53D6\u5F53\u524D\u4EFB\u52A1\u5931\u8D25\uFF0C\u8BF7\u68C0\u67E5\u7F51\u7EDC','error'),V(function(){return _e.TreasureBox.getCurrentTask()})}):$.Deferred().reject()},captcha:{cnt:0,calc:function calc(){return _e.CONFIG.AUTO_TREASUREBOX?20<_e.TreasureBox.captcha.cnt?(_e.TreasureBox.setMsg('\u9A8C\u8BC1\u7801<br>\u8BC6\u522B<br>\u5931\u8D25'),window.toast('[\u81EA\u52A8\u9886\u53D6\u74DC\u5B50]\u9A8C\u8BC1\u7801\u8BC6\u522B\u5931\u8D25\uFF0C\u5DF2\u505C\u6B62','error'),$.Deferred().reject()):M.TreasureBox.getCaptcha(B()).then(function(ge){if(K('TreasureBox.captcha.calc: getCaptcha',ge),0===ge.code){_e.TreasureBox.captcha.cnt++;var ue=$.Deferred();return _e.TreasureBox.promise.calc=$.Deferred(),_e.TreasureBox.promise.calc.then(function(ce){_e.TreasureBox.captcha.cnt=0,ue.resolve(ce)},function(){_e.TreasureBox.captcha.calc().then(function(ce){ue.resolve(ce)},function(){ue.reject()})}),_e.TreasureBox.DOM.image.attr('src',ge.data.img),ue}return window.toast('[\u81EA\u52A8\u9886\u53D6\u74DC\u5B50]'+ge.msg,'caution'),V(function(){return _e.TreasureBox.captcha.calc()})},function(){return window.toast('[\u81EA\u52A8\u9886\u53D6\u74DC\u5B50]\u52A0\u8F7D\u9A8C\u8BC1\u7801\u5931\u8D25\uFF0C\u8BF7\u68C0\u67E5\u7F51\u7EDC','error'),V(function(){return _e.TreasureBox.captcha.calc()})}):(_e.TreasureBox.captcha.cnt=0,$.Deferred().reject())},OCR:{getGrayscaleMap:function getGrayscaleMap(ge){for(var ue=1<arguments.length&&arguments[1]!==void 0?arguments[1]:235,ce=2<arguments.length&&arguments[2]!==void 0?arguments[2]:120,Ie=3<arguments.length&&arguments[3]!==void 0?arguments[3]:40,pe=ge.getImageData(0,0,ce,Ie).data,Te=[],fe=0;fe<Ie;fe++)for(var Ee=0;Ee<ce;Ee++){var me=4*(fe*ce+Ee),Oe=pe.slice(me,me+4),ve=Oe?77*Oe[0]+150*Oe[1]+29*Oe[2]+128>>8:0;Te.push(ve>ue?ve:0)}return Te},orderFilter2In3x3:function orderFilter2In3x3(ge){for(var ue=1<arguments.length&&arguments[1]!==void 0?arguments[1]:9,ce=2<arguments.length&&arguments[2]!==void 0?arguments[2]:120,Ie=function gray(ve,xe){return 0<=ve+xe*ce?ge[ve+xe*ce]:255},pe=[],Te=ge.length,ve=0;ve<Te;++ve){var Ee=[ve%ce,_Mathfloor(ve/ce)],me=Ee[0],Oe=Ee[1],xe=Array(9);xe[0]=Ie(me-1,Oe-1),xe[1]=Ie(me+0,Oe-1),xe[2]=Ie(me+1,Oe-1),xe[3]=Ie(me-1,Oe+0),xe[4]=Ie(me+0,Oe+0),xe[5]=Ie(me+1,Oe+0),xe[6]=Ie(me-1,Oe+1),xe[7]=Ie(me+0,Oe+1),xe[8]=Ie(me+1,Oe+1),xe.sort(function(he,Ce){return he-Ce}),pe.push(xe[ue-1])}return pe}},eval:function _eval(ge){var ue=Function;return new ue('return '+ge)()},correctStr:{i:1,I:1,"|":1,l:1,o:0,O:0,D:0,S:6,s:6,b:6,R:8,B:8,z:2,Z:2,".":'-',_:4,g:9,">":3},correctQuestion:function correctQuestion(ge){var ue='';for(var ce in ge=ge.trim(),ge){var Ie=_e.TreasureBox.captcha.correctStr[ge[ce]];ue+=void 0===Ie?ge[ce]:Ie}'4'===ue[2]&&(ue[2]='+');for(var ce=0;ce<=parseInt(ue.length-2);ce++)'\''===ue[ce]&&'1'===ue[ce+1]&&(ue[ce]='7',ue.splice(ce+1,1));return ue}}},Gift:(le={run_timer:void 0,ruid:void 0,room_id:void 0,medal_list:void 0,bag_list:void 0,time:void 0,remain_feed:void 0,over:!1},_defineProperty(le,'run_timer',void 0),_defineProperty(le,'sendGiftList',[1,6,30607]),_defineProperty(le,'getMedalList',function(){var ge=_asyncToGenerator(regeneratorRuntime.mark(function ue(){var ce=0<arguments.length&&arguments[0]!==void 0?arguments[0]:1;return regeneratorRuntime.wrap(function(pe){for(;;)switch(pe.prev=pe.next){case 0:return 1===ce&&(_e.Gift.medal_list=[]),pe.next=3,M.i.medal(ce,25).then(function(Te){if(K('Gift.getMedalList: API.i.medal',Te),_e.Gift.medal_list=_e.Gift.medal_list.concat(Te.data.fansMedalList),Te.data.pageinfo.curPage<Te.data.pageinfo.totalpages)return _e.Gift.getMedalList(ce+1)},function(){return window.toast('[\u81EA\u52A8\u9001\u793C]\u83B7\u53D6\u52CB\u7AE0\u5217\u8868\u5931\u8D25\uFF0C\u8BF7\u68C0\u67E5\u7F51\u7EDC','error'),V(function(){return _e.Gift.getMedalList()})});case 3:return pe.abrupt('return',pe.sent);case 4:case'end':return pe.stop();}},ue,se)}));return function getMedalList(){return ge.apply(this,arguments)}}()),_defineProperty(le,'getBagList',function(){var ge=_asyncToGenerator(regeneratorRuntime.mark(function ue(){return regeneratorRuntime.wrap(function(Ie){for(;;)switch(Ie.prev=Ie.next){case 0:return Ie.next=2,M.gift.bag_list().then(function(pe){K('Gift.getBagList: API.gift.bag_list',pe),_e.Gift.bag_list=pe.data.list,_e.Gift.time=pe.data.time},function(){return window.toast('[\u81EA\u52A8\u9001\u793C]\u83B7\u53D6\u5305\u88F9\u5217\u8868\u5931\u8D25\uFF0C\u8BF7\u68C0\u67E5\u7F51\u7EDC','error'),V(function(){return _e.Gift.getBagList()})});case 2:return Ie.abrupt('return',Ie.sent);case 3:case'end':return Ie.stop();}},ue,se)}));return function getBagList(){return ge.apply(this,arguments)}}()),_defineProperty(le,'getFeedByGiftID',function getFeedByGiftID(ge){for(var ue=Y.gift_list.length-1;0<=ue;--ue)if(Y.gift_list[ue].id===ge)return Math.ceil(Y.gift_list[ue].price/100);return 0}),_defineProperty(le,'sort_medals',function sort_medals(ge){if(_e.CONFIG.GIFT_SORT?ge.sort(function(Ee,me){return 0==me.level-Ee.level?me.intimacy-Ee.intimacy:me.level-Ee.level}):ge.sort(function(Ee,me){return 0==Ee.level-me.level?Ee.intimacy-me.intimacy:Ee.level-me.level}),_e.CONFIG.AUTO_GIFT_ROOMID&&0<_e.CONFIG.AUTO_GIFT_ROOMID.length){var Ee=_e.CONFIG.AUTO_GIFT_ROOMID.split(',');Ee.reverse();var ue=!0,ce=!1,Ie=void 0;try{for(var fe,pe=function _loop2(){var me=fe.value,Oe=ge.findIndex(function(ve){return ve.roomid==me});if(-1!=Oe){var ve=ge[Oe];ge.splice(Oe,1),ge.unshift(ve)}},Te=Ee[Symbol.iterator]();!(ue=(fe=Te.next()).done);ue=!0)pe()}catch(me){ce=!0,Ie=me}finally{try{!ue&&Te.return&&Te.return()}finally{if(ce)throw Ie}}}return ge}),_defineProperty(le,'auto_light',function(){var ge=_asyncToGenerator(regeneratorRuntime.mark(function ue(ce){var Ie,pe,Te,fe,Ee,me,Oe,ve,xe,he,Ce,Ge,Re,Ae,Ne,ye;return regeneratorRuntime.wrap(function(Me){for(;;)switch(Me.prev=Me.next){case 0:Me.prev=0,Ie=_e.Gift.getFeedByGiftID(30607),pe=_e.CONFIG.LIGHT_MEDALS.split(','),Te=void 0,Te='LIGHT_WHITE'==_e.CONFIG.LIGHT_METHOD?ce.filter(function(be){return 0==be.is_lighted&&be.day_limit-be.today_feed>=Ie&&0<=pe.findIndex(function(Le){return Le==be.roomid})}):ce.filter(function(be){return 0==be.is_lighted&&be.day_limit-be.today_feed>=Ie&&-1==pe.findIndex(function(Le){return Le==be.roomid})});;if(K('[auto_light]\u5373\u5C06\u70B9\u4EAE\u52CB\u7AE0\u623F\u95F4\u5217\u8868',Te),!(Te&&0<Te.length)){Me.next=52;break}return Te=_e.Gift.sort_medals(Te),Me.next=11,_e.Gift.getBagList();case 11:if(fe=_e.Gift.bag_list.filter(function(be){return 30607==be.gift_id}),!(fe&&0<fe.length)){Me.next=52;break}Ee=!0,me=!1,Oe=void 0,Me.prev=16,ve=Te[Symbol.iterator]();case 18:if(Ee=(xe=ve.next()).done){Me.next=38;break}if(he=xe.value,Ce=fe.find(function(be){return 30607==be.gift_id&&0<be.gift_num}),!Ce){Me.next=34;break}if(Ge=he.day_limit-he.today_feed,!(0<=Ge-Ie||_e.CONFIG.FORCE_LIGHT)){Me.next=33;break}return Me.next=26,M.room.room_init(parseInt(he.roomid,10));case 26:return Re=Me.sent,Ae=parseInt(Re.data.room_id,10),Ne=1,Me.next=31,M.gift.bag_send(Y.uid,30607,he.target_id,Ne,Ce.bag_id,Ae,Y.rnd);case 31:ye=Me.sent,0===ye.code?(Ce.gift_num-=Ne,he.today_feed+=Ne*Ie,Ge-=Ne*Ie,window.toast('[\u81EA\u52A8\u9001\u793C]\u52CB\u7AE0['+he.medalName+']\u70B9\u4EAE\u6210\u529F\uFF0C\u9001\u51FA'+Ne+'\u4E2A'+Ce.gift_name+'\uFF0C['+he.today_feed+'/'+he.day_limit+']\u8DDD\u79BB\u5347\u7EA7\u8FD8\u9700['+Ge+']','success'),K('Gift.auto_light','\u52CB\u7AE0['+he.medalName+']\u70B9\u4EAE\u6210\u529F\uFF0C\u9001\u51FA'+Ne+'\u4E2A'+Ce.gift_name+'\uFF0C['+he.today_feed+'/'+he.day_limit+']')):window.toast('[\u81EA\u52A8\u9001\u793C]\u52CB\u7AE0['+he.medalName+']\u70B9\u4EAE\u5931\u8D25\u3010'+Re.msg+'\u3011','caution');case 33:return Me.abrupt('continue',35);case 34:return Me.abrupt('break',38);case 35:Ee=!0,Me.next=18;break;case 38:Me.next=44;break;case 40:Me.prev=40,Me.t0=Me['catch'](16),me=!0,Oe=Me.t0;case 44:Me.prev=44,Me.prev=45,!Ee&&ve.return&&ve.return();case 47:if(Me.prev=47,!me){Me.next=50;break}throw Oe;case 50:return Me.finish(47);case 51:return Me.finish(44);case 52:Me.next=58;break;case 54:Me.prev=54,Me.t1=Me['catch'](0),console.error(Me.t1),window.toast('[\u81EA\u52A8\u9001\u793C]\u70B9\u4EAE\u52CB\u7AE0\u51FA\u9519:'+Me.t1,'error');case 58:case'end':return Me.stop();}},ue,se,[[0,54],[16,40,44,52],[45,,47,51]])}));return function auto_light(){return ge.apply(this,arguments)}}()),_defineProperty(le,'run',function(){var ge=_asyncToGenerator(regeneratorRuntime.mark(function ue(){var ce,Ie,pe,Te,fe,Ee,me,Oe,ve,xe,he,Ce,Ge,Re;return regeneratorRuntime.wrap(function(Ne){for(;;)switch(Ne.prev=Ne.next){case 0:if(ce=function FailFunc(){return window.toast('[\u81EA\u52A8\u9001\u793C]\u9001\u793C\u5931\u8D25\uFF0C\u8BF7\u68C0\u67E5\u7F51\u7EDC','error'),V(function(){return _e.Gift.run()})},Ie=function nextTimeDebug(){if('GIFT_SEND_TIME'==_e.CONFIG.GIFT_METHOD){var ye=u(_e.CONFIG.GIFT_SEND_HOUR,_e.CONFIG.GIFT_SEND_MINUTE);_e.Gift.run_timer=setTimeout(_e.Gift.run,ye);var De=new Date(B()+ye).toLocaleString();K('[\u81EA\u52A8\u9001\u793C]','\u5C06\u5728'+De+'\u8FDB\u884C\u81EA\u52A8\u9001\u793C'),_e.CACHE.Gift_TS=B(),_e.saveCache()}else K('[\u81EA\u52A8\u9001\u793C]','\u5C06\u5728'+_e.CONFIG.GIFT_INTERVAL+'\u5206\u949F\u540E\u8FDB\u884C\u81EA\u52A8\u9001\u793C'),_e.CACHE.GiftInterval_TS=B(),_e.saveCache()},Ne.prev=2,_e.CONFIG.AUTO_GIFT){Ne.next=5;break}return Ne.abrupt('return',$.Deferred().resolve());case 5:if(_e.Gift.run_timer&&clearTimeout(_e.Gift.run_timer),'GIFT_SEND_TIME'!=_e.CONFIG.GIFT_METHOD||f(_e.CONFIG.GIFT_SEND_HOUR,_e.CONFIG.GIFT_SEND_MINUTE)||!1!=w){Ne.next=14;break}return pe=u(_e.CONFIG.GIFT_SEND_HOUR,_e.CONFIG.GIFT_SEND_MINUTE),_e.Gift.run_timer=setTimeout(_e.Gift.run,pe),Te=new Date(B()+pe).toLocaleString(),K('[\u81EA\u52A8\u9001\u793C]','\u5C06\u5728'+Te+'\u8FDB\u884C\u81EA\u52A8\u9001\u793C'),Ne.abrupt('return',$.Deferred().resolve());case 14:if('GIFT_INTERVAL'!=_e.CONFIG.GIFT_METHOD||!1!=w){Ne.next=27;break}if(fe=6e4*_e.CONFIG.GIFT_INTERVAL,!_e.CACHE.GiftInterval_TS){Ne.next=25;break}if(Ee=B()-_e.CACHE.GiftInterval_TS,!(Ee<fe)){Ne.next=23;break}return me=fe-Ee,_e.Gift.run_timer=setTimeout(function(){return _e.Gift.run()},me),K('[\u81EA\u52A8\u9001\u793C]','\u5C06\u5728'+me+'\u6BEB\u79D2\u540E\u8FDB\u884C\u81EA\u52A8\u9001\u793C'),Ne.abrupt('return');case 23:Ne.next=27;break;case 25:_e.CACHE.GiftInterval_TS=B(),_e.saveCache();case 27:return _e.Gift.over=!1,Ne.next=30,_e.Gift.getMedalList();case 30:if(Oe=_e.Gift.medal_list,K('Gift.run: Gift.getMedalList().then: Gift.medal_list',Oe),!(Oe&&0<Oe.length)){Ne.next=34;break}return Ne.delegateYield(regeneratorRuntime.mark(function ye(){var De,Me,be,Le,Se,Fe,we,Ue,ke,He;return regeneratorRuntime.wrap(function(Pe){for(;;)switch(Pe.prev=Pe.next){case 0:Oe=Oe.filter(function(je){return 0<je.day_limit-je.today_feed&&20>je.level}),Oe=_e.Gift.sort_medals(Oe),_e.CONFIG.EXCLUDE_ROOMID&&0<_e.CONFIG.EXCLUDE_ROOMID.length&&(De=_e.CONFIG.EXCLUDE_ROOMID.split(','),Oe=Oe.filter(function(je){return-1==De.findIndex(function(Ye){return Ye==je.roomid})}));;return Pe.next=6,_e.Gift.auto_light(Oe);case 6:Me=86400*_e.CONFIG.GIFT_LIMIT,be=!0,Le=!1,Se=void 0,Pe.prev=10,Fe=Oe[Symbol.iterator]();case 12:if(be=(we=Fe.next()).done){Pe.next=30;break}if(Ue=we.value,!_e.Gift.over){Pe.next=16;break}return Pe.abrupt('break',30);case 16:return Pe.next=18,M.room.room_init(parseInt(Ue.roomid,10));case 18:if(ke=Pe.sent,_e.Gift.room_id=parseInt(ke.data.room_id,10),_e.Gift.ruid=Ue.target_id,_e.Gift.remain_feed=Ue.day_limit-Ue.today_feed,!(0<_e.Gift.remain_feed)){Pe.next=27;break}return Pe.delegateYield(regeneratorRuntime.mark(function je(){var Ye,Xe,Ve;return regeneratorRuntime.wrap(function(Qe){for(;;)switch(Qe.prev=Qe.next){case 0:return Qe.next=2,_e.Gift.getBagList();case 2:if(Ye=P(),_e.CONFIG.SEND_ALL_GIFT){Qe.next=7;break}if(Xe=_e.Gift.bag_list.filter(function(We){return _e.Gift.sendGiftList.includes(We.gift_id)&&0<We.gift_num&&We.expire_at>Ye&&We.expire_at-Ye<Me}),0!=Xe.length){Qe.next=7;break}return Qe.abrupt('return','break');case 7:;if(!(0<_e.Gift.remain_feed)){Qe.next=21;break}return window.toast('[\u81EA\u52A8\u9001\u793C]\u52CB\u7AE0['+Ue.medalName+'] \u4ECA\u65E5\u4EB2\u5BC6\u5EA6\u672A\u6EE1['+Ue.today_feed+'/'+Ue.day_limit+']\uFF0C\u9884\u8BA1\u9700\u8981['+_e.Gift.remain_feed+']\u9001\u793C\u5F00\u59CB','info'),Qe.next=12,_e.Gift.sendGift(Ue);case 12:if(_e.CONFIG.SEND_ALL_GIFT){Qe.next=19;break}if(Ve=_e.Gift.bag_list.filter(function(We){return _e.Gift.sendGiftList.includes(We.gift_id)&&0<We.gift_num&&We.expire_at>Ye&&We.expire_at-Ye<Me}),0!=Ve.length){Qe.next=18;break}return Qe.abrupt('return','break');case 18:_e.Gift.bag_list=Ve;case 19:Qe.next=22;break;case 21:window.toast('[\u81EA\u52A8\u9001\u793C]\u52CB\u7AE0['+Ue.medalName+'] \u4ECA\u65E5\u4EB2\u5BC6\u5EA6\u5DF2\u6EE1','info');case 22:case'end':return Qe.stop();}},je,se)})(),'t0',24);case 24:if(He=Pe.t0,'break'!==He){Pe.next=27;break}return Pe.abrupt('break',30);case 27:be=!0,Pe.next=12;break;case 30:Pe.next=36;break;case 32:Pe.prev=32,Pe.t1=Pe['catch'](10),Le=!0,Se=Pe.t1;case 36:Pe.prev=36,Pe.prev=37,!be&&Fe.return&&Fe.return();case 39:if(Pe.prev=39,!Le){Pe.next=42;break}throw Se;case 42:return Pe.finish(39);case 43:return Pe.finish(36);case 44:case'end':return Pe.stop();}},ye,se,[[10,32,36,44],[37,,39,43]])})(),'t0',34);case 34:return Ne.next=36,_e.Gift.getBagList();case 36:ve=0,ve=0;case 38:if(!(ve<=_e.Gift.bag_list.length-1)){Ne.next=44;break}if(1!=_e.Gift.bag_list[ve].gift_id){Ne.next=41;break}return Ne.abrupt('break',44);case 41:ve++,Ne.next=38;break;case 44:if(xe=_e.Gift.bag_list[ve],void 0!=xe){Ne.next=49;break}return w=!1,Ie(),Ne.abrupt('return',$.Deferred().resolve());case 49:if(he=_e.Gift.getFeedByGiftID(xe.gift_id),Ce=86400,Ge=P(),!(0!=_e.Gift.bag_list.filter(function(ye){return _e.Gift.sendGiftList.includes(ye.gift_id)&&0<ye.gift_num&&ye.expire_at>Ge&&ye.expire_at-Ge<Ce}).length&&xe.expire_at>_e.Gift.time&&xe.expire_at-_e.Gift.time<Ce&&'0'!=_e.CONFIG.SPARE_GIFT_ROOM&&'0'!=_e.CONFIG.SPARE_GIFT_UID&&0<he)){Ne.next=55;break}return Re=xe.gift_num,Ne.abrupt('return',M.gift.bag_send(Y.uid,xe.gift_id,_e.CONFIG.SPARE_GIFT_UID,Re,xe.bag_id,_e.CONFIG.SPARE_GIFT_ROOM,Y.rnd).then(function(ye){K('Gift.sendGift(\u5269\u4F59\u793C\u7269): API.gift.bag_send',ye),0===ye.code?window.toast('[\u81EA\u52A8\u9001\u793C](\u5269\u4F59\u793C\u7269)\u623F\u95F4['+_e.CONFIG.SPARE_GIFT_ROOM+'] \u9001\u793C\u6210\u529F\uFF0C\u9001\u51FA'+Re+'\u4E2A'+xe.gift_name,'success'):window.toast('[\u81EA\u52A8\u9001\u793C](\u5269\u4F59\u793C\u7269)\u623F\u95F4['+_e.CONFIG.SPARE_GIFT_ROOM+'] \u9001\u793C\u5F02\u5E38:'+ye.msg,'caution')},function(){return window.toast('[\u81EA\u52A8\u9001\u793C](\u5269\u4F59\u793C\u7269)\u5305\u88F9\u9001\u793C\u5931\u8D25\uFF0C\u8BF7\u68C0\u67E5\u7F51\u7EDC','error'),V(function(){return _e.Gift.sendGift(medal)})}));case 55:Ne.next=63;break;case 57:return Ne.prev=57,Ne.t1=Ne['catch'](2),ce(),window.toast('[\u81EA\u52A8\u9001\u793C]\u8FD0\u884C\u65F6\u51FA\u73B0\u5F02\u5E38\uFF0C\u5DF2\u505C\u6B62','error'),console.error('['+N+']',Ne.t1),Ne.abrupt('return',$.Deferred().reject());case 63:return w=!1,Ie(),Ne.abrupt('return',$.Deferred().resolve());case 66:case'end':return Ne.stop();}},ue,se,[[2,57]])}));return function run(){return ge.apply(this,arguments)}}()),_defineProperty(le,'sendGift',function(){var ge=_asyncToGenerator(regeneratorRuntime.mark(function ue(ce){var Ie,pe,Te,fe,Ee,me,Oe,ve,xe,he;return regeneratorRuntime.wrap(function(Ge){for(;;)switch(Ge.prev=Ge.next){case 0:return Ge.next=2,_e.Gift.getBagList();case 2:if(Ie=void 0,!(0>=_e.Gift.remain_feed)){Ge.next=6;break}return window.toast('[\u81EA\u52A8\u9001\u793C]\u52CB\u7AE0['+ce.medalName+'] \u9001\u793C\u7ED3\u675F\uFF0C\u4ECA\u65E5\u4EB2\u5BC6\u5EA6\u5DF2\u6EE1['+ce.today_feed+'/'+ce.day_limit+']','info'),Ge.abrupt('return',$.Deferred().resolve());case 6:if(0>=_e.Gift.time&&(_e.Gift.time=P()),_e.CONFIG.SEND_ALL_GIFT){Ge.next=17;break}if(pe=_e.Gift.bag_list.filter(function(Re){return _e.Gift.sendGiftList.includes(Re.gift_id)&&0<Re.gift_num&&Re.expire_at>_e.Gift.time&&Re.expire_at-_e.Gift.time<86400*_e.CONFIG.GIFT_LIMIT&&'\u6C38\u4E45'!=Re.corner_mark}),0!=pe.length){Ge.next=14;break}return _e.Gift.over=!0,Ge.abrupt('return');case 14:Ie=pe;case 15:Ge.next=24;break;case 17:if(Te=_e.Gift.bag_list.filter(function(Re){return 0<Re.gift_num&&'\u6C38\u4E45'!=Re.corner_mark}),0!=Te.length){Ge.next=23;break}return _e.Gift.over=!0,Ge.abrupt('return');case 23:Ie=Te;case 24:K('bag_list',Ie),fe=!0,Ee=!1,me=void 0,Ge.prev=28,Oe=regeneratorRuntime.mark(function(){var Re,Ae,Ne;return regeneratorRuntime.wrap(function(De){for(;;)switch(De.prev=De.next){case 0:if(Re=xe.value,!(0>=ce.day_limit-ce.today_feed)){De.next=4;break}return window.toast('[\u81EA\u52A8\u9001\u793C]\u52CB\u7AE0['+ce.medalName+'] \u9001\u793C\u7ED3\u675F\uFF0C\u4ECA\u65E5\u4EB2\u5BC6\u5EA6\u5DF2\u6EE1['+ce.today_feed+'/'+ce.day_limit+']','info'),De.abrupt('return',{v:void 0});case 4:if(Ae=_e.Gift.getFeedByGiftID(Re.gift_id),!(0<Ae)){De.next=11;break}if(Ne=_Mathfloor(_e.Gift.remain_feed/Ae),Ne>Re.gift_num&&(Ne=Re.gift_num),!(0<Ne)){De.next=11;break}return De.next=11,M.gift.bag_send(Y.uid,Re.gift_id,_e.Gift.ruid,Ne,Re.bag_id,_e.Gift.room_id,Y.rnd).then(function(Me){K('Gift.sendGift: API.gift.bag_send',Me),0===Me.code?(Re.gift_num-=Ne,ce.today_feed+=Ne*Ae,_e.Gift.remain_feed-=Ne*Ae,window.toast('[\u81EA\u52A8\u9001\u793C]\u52CB\u7AE0['+ce.medalName+'] \u9001\u793C\u6210\u529F\uFF0C\u9001\u51FA'+Ne+'\u4E2A'+Re.gift_name+'\uFF0C['+ce.today_feed+'/'+ce.day_limit+']\u8DDD\u79BB\u5347\u7EA7\u8FD8\u9700['+_e.Gift.remain_feed+']','success')):window.toast('[\u81EA\u52A8\u9001\u793C]\u52CB\u7AE0['+ce.medalName+'] \u9001\u793C\u5F02\u5E38:'+Me.msg,'caution')},function(){return window.toast('[\u81EA\u52A8\u9001\u793C]\u5305\u88F9\u9001\u793C\u5931\u8D25\uFF0C\u8BF7\u68C0\u67E5\u7F51\u7EDC','error'),V(function(){return _e.Gift.sendGift(ce)})});case 11:case'end':return De.stop();}},Oe,se)}),ve=Ie[Symbol.iterator]();case 31:if(fe=(xe=ve.next()).done){Ge.next=39;break}return Ge.delegateYield(Oe(),'t0',33);case 33:if(he=Ge.t0,'object'!==('undefined'==typeof he?'undefined':_typeof(he))){Ge.next=36;break}return Ge.abrupt('return',he.v);case 36:fe=!0,Ge.next=31;break;case 39:Ge.next=45;break;case 41:Ge.prev=41,Ge.t1=Ge['catch'](28),Ee=!0,me=Ge.t1;case 45:Ge.prev=45,Ge.prev=46,!fe&&ve.return&&ve.return();case 48:if(Ge.prev=48,!Ee){Ge.next=51;break}throw me;case 51:return Ge.finish(48);case 52:return Ge.finish(45);case 53:case'end':return Ge.stop();}},ue,se,[[28,41,45,53],[46,,48,52]])}));return function sendGift(){return ge.apply(this,arguments)}}()),le),MobileHeartBeat:{run:function(){var ge=_asyncToGenerator(regeneratorRuntime.mark(function ue(){var ce,Ie,pe,Te;return regeneratorRuntime.wrap(function(Ee){for(;;)switch(Ee.prev=Ee.next){case 0:if(!1!=_e.CONFIG.MOBILE_HEARTBEAT){Ee.next=2;break}return Ee.abrupt('return',$.Deferred().resolve());case 2:if(de(_e.CACHE.MobileHeartBeat_TS)){Ee.next=5;break}return Q(_e.MobileHeartBeat.run,'\u79FB\u52A8\u7AEF\u5FC3\u8DF3'),Ee.abrupt('return',$.Deferred().resolve());case 5:if(!1!==Y.mobile_verify){Ee.next=9;break}return window.toast('[\u79FB\u52A8\u7AEF\u5FC3\u8DF3]\u672A\u7ED1\u5B9A\u624B\u673A\uFF0C\u5DF2\u505C\u6B62','warning'),K('MobileHeartBeat','\u672A\u7ED1\u5B9A\u624B\u673A mobile_verify = '+Y.mobile_verify),Ee.abrupt('return',$.Deferred().resolve());case 9:return ce=function mobileOnline(){G({GM:!0,anonymous:!0,method:'POST',url:'https://api.live.bilibili.com/heartbeat/v1/OnLine/mobileOnline?'+BilibiliToken.signQuery('access_key='+ie.access_token+'&'+ee),data:'room_id='+Y.room_id+'&scale=xxhdpi',responseType:'json',headers:J.headers})},Ie=function EndFunc(me){K('MobileHeartBeat GetAward',me),clearInterval(Te),_e.CACHE.MobileHeartBeat_TS=B(),_e.saveCache(),Q(_e.MobileHeartBeat.run,'\u79FB\u52A8\u7AEF\u5FC3\u8DF3')},pe=function getWatchingAward(){M.activity.receive_award('double_watch_task').then(function(me){return 0===me.code?(window.toast('[\u53CC\u7AEF\u89C2\u770B\u76F4\u64AD]\u5956\u52B1\u9886\u53D6\u6210\u529F','success'),Ie(me),$.Deferred().resolve()):-400===me.code?(window.toast('[\u53CC\u7AEF\u89C2\u770B\u76F4\u64AD]\u5956\u52B1\u5DF2\u9886\u53D6','info'),Ie(me),$.Deferred().resolve()):(window.toast('[\u53CC\u7AEF\u89C2\u770B\u76F4\u64AD]'+me,'warning'),Ie(me),$.Deferred().resolve())},function(me){return window.toast('[\u53CC\u7AEF\u89C2\u770B\u76F4\u64AD]\u5956\u52B1\u9886\u53D6\u5931\u8D25\uFF0C\u8BF7\u68C0\u67E5\u7F51\u7EDC','error'),console.error('MobileHeartBeat GetAward',me),clearInterval(Te),V(function(){return _e.MobileHeartBeat.run()})})},Ee.next=14,ae();case 14:if(Ee.t1=Ee.sent,Ee.t2=void 0,Ee.t0=Ee.t1===Ee.t2,!Ee.t0){Ee.next=19;break}Ee.t0=void 0===ie.access_token;case 19:if(!Ee.t0){Ee.next=22;break}return K('MobileHeartBeat','token\u8BBE\u7F6E\u5931\u8D25'),Ee.abrupt('return');case 22:K('MobileHeartBeat','\u5F00\u59CB\u5BA2\u6237\u7AEF\u5FC3\u8DF3'),ce(),Te=void 0,Te=setInterval(function(){return ce()},300000),setTimeout(function(){return pe()},360000);case 27:case'end':return Ee.stop();}},ue,se)}));return function run(){return ge.apply(this,arguments)}}()},stormQueue:[],stormBlack:!1,stormIdSet:{add:function add(ge){var ue=[];try{var ce=JSON.parse(localStorage.getItem(N+'stormIdSet'));ue=[].concat(ce.list),ue.push(ge),50<ue.length&&ue.splice(0,10),localStorage.setItem(N+'stormIdSet',JSON.stringify({list:ue})),K(N+'storm_Id_list_add',ue)}catch(ce){ue.push(ge),localStorage.setItem(N+'stormIdSet',JSON.stringify({list:ue}))}},isIn:function isIn(ge){var ue=[];try{var ce=JSON.parse(localStorage.getItem(N+'stormIdSet'));return ue=null===ce?[]:[].concat(ce.list),K(N+'storm_Id_list_read',ce),-1<ue.indexOf(ge)}catch(ce){return localStorage.setItem(N+'stormIdSet',JSON.stringify({list:ue})),K('\u8BFB\u53D6'+(N+'stormIdSet\u7F13\u5B58\u9519\u8BEF\u5DF2\u91CD\u7F6E')),-1<ue.indexOf(ge)}}},Storm:{check:function check(ge){return-1<_e.stormQueue.indexOf(ge)},append:function append(ge){_e.stormQueue.push(ge),_e.stormQueue.length>_e.CONFIG.STORM_QUEUE_SIZE&&_e.stormQueue.shift()},over:function over(ge){var ue=_e.stormQueue.indexOf(ge);-1<ue&&_e.stormQueue.splice(ge,1)},run:function run(ge){try{return _e.CONFIG.STORM?_e.stormBlack?$.Deferred().resolve():E(_e.CONFIG.TIME_AREA_START_H0UR,_e.CONFIG.TIME_AREA_END_H0UR,_e.CONFIG.TIME_AREA_START_MINUTE,_e.CONFIG.TIME_AREA_END_MINUTE)&&_e.CONFIG.TIME_AREA_DISABLE?(K('\u8282\u594F\u98CE\u66B4','\u81EA\u52A8\u4F11\u7720\uFF0C\u8DF3\u8FC7\u68C0\u6D4Broomid='+ge),$.Deferred().resolve()):M.Storm.check(ge).then(function(ue){if(K('MY_API.Storm.run: MY_API.API.Storm.check',ue),0===ue.code){var ce=ue.data;return _e.Storm.join(ce.id,ce.roomid,_Mathround(new Date().getTime()/1e3)+ce.time),$.Deferred().resolve()}window.toast('[\u81EA\u52A8\u62BD\u5956][\u8282\u594F\u98CE\u66B4](roomid='+ge+')'+ue.msg,'caution')},function(){window.toast('[\u81EA\u52A8\u62BD\u5956][\u8282\u594F\u98CE\u66B4]\u68C0\u67E5\u76F4\u64AD\u95F4('+ge+')\u5931\u8D25\uFF0C\u8BF7\u68C0\u67E5\u7F51\u7EDC','error')}):$.Deferred().resolve()}catch(ue){return window.toast('[\u81EA\u52A8\u62BD\u5956][\u8282\u594F\u98CE\u66B4]\u8FD0\u884C\u65F6\u51FA\u73B0\u5F02\u5E38','error'),console.error('['+N+']',ue),$.Deferred().reject()}},join:function join(ge,ue,ce){var Ie=function(){var Ee=_asyncToGenerator(regeneratorRuntime.mark(function me(){var Oe,ve;return regeneratorRuntime.wrap(function(he){for(;;)switch(he.prev=he.next){case 0:if(he.prev=0,_e.Storm.check(ge)){he.next=4;break}return clearInterval(Te),he.abrupt('return');case 4:if(Oe=_Mathround(new Date().getTime()/1e3),!(Oe>ce&&0<ce)){he.next=9;break}return _e.Storm.over(ge),clearInterval(Te),he.abrupt('return');case 9:if(fe++,!(fe>_e.CONFIG.STORM_MAX_COUNT&&0<_e.CONFIG.STORM_MAX_COUNT)){he.next=15;break}return _e.Storm.over(ge),clearInterval(Te),window.toast('[\u81EA\u52A8\u62BD\u5956][\u8282\u594F\u98CE\u66B4]\u62BD\u5956(roomid='+ue+',id='+ge+')\u5230\u8FBE\u5C1D\u8BD5\u6B21\u6570\u3002\r\n\u5C1D\u8BD5\u6B21\u6570:'+fe+',\u8DDD\u79BB\u5230\u671F:'+(ce-Oe)+'s','caution'),he.abrupt('return');case 15:if(ve=void 0,he.prev=16,!(te&&J&&ie.access_token)){he.next=23;break}return he.next=20,M.Storm.join_ex(ge,ue,ie.access_token,BilibiliToken.appKey,BilibiliToken.headers);case 20:ve=he.sent,he.next=26;break;case 23:return he.next=25,M.Storm.join(ge,captcha_token='',captcha_phrase='',ue);case 25:ve=he.sent;case 26:if(K('MY_API.Storm.join: MY_API.API.Storm.join',ve),!ve.code){he.next=51;break}if(-1==ve.msg.indexOf('\u9886\u53D6')){he.next=33;break}return _e.Storm.over(ge),clearInterval(Te),window.toast('[\u81EA\u52A8\u62BD\u5956][\u8282\u594F\u98CE\u66B4]\u9886\u53D6(roomid='+ue+',id='+ge+')\u6210\u529F,'+ve.msg+'\r\n\u5C1D\u8BD5\u6B21\u6570:'+fe,'success'),he.abrupt('return');case 33:if(-1==ve.msg.indexOf('\u9A8C\u8BC1\u7801')){he.next=39;break}return _e.Storm.over(ge),clearInterval(Te),_e.stormBlack=!0,window.toast('[\u81EA\u52A8\u62BD\u5956][\u8282\u594F\u98CE\u66B4]\u62BD\u5956(roomid='+ue+',id='+ge+')\u5931\u8D25,\u7591\u4F3C\u8D26\u53F7\u4E0D\u652F\u6301,'+ve.msg,'caution'),he.abrupt('return');case 39:if(!(ve.data&&0==ve.data.length&&-1!=ve.msg.indexOf('\u4E0B\u6B21\u8981\u66F4\u5FEB\u4E00\u70B9'))){he.next=46;break}return _e.Storm.over(ge),window.toast('[\u81EA\u52A8\u62BD\u5956][\u8282\u594F\u98CE\u66B4]\u62BD\u5956(roomid='+ue+',id='+ge+')\u7591\u4F3C\u98CE\u66B4\u9ED1\u5C4B,\u7EC8\u6B62\uFF01','error'),clearInterval(Te),_e.stormBlack=!0,setTimeout(function(){_e.stormBlack=!1},3600000),he.abrupt('return');case 46:if(-1!=ve.msg.indexOf('\u4E0B\u6B21\u8981\u66F4\u5FEB\u4E00\u70B9')){he.next=49;break}return clearInterval(Te),he.abrupt('return');case 49:he.next=56;break;case 51:return _e.Storm.over(ge),Statistics.appendGift(ve.data.gift_name,ve.data.gift_num),window.toast('[\u81EA\u52A8\u62BD\u5956][\u8282\u594F\u98CE\u66B4]\u9886\u53D6(roomid='+ue+',id='+ge+')\u6210\u529F,'+(ve.data.gift_name+'x'+ve.data.gift_num)+'\r\n'+ve.data.mobile_content+'\r\n\u5C1D\u8BD5\u6B21\u6570:'+fe,'success'),clearInterval(Te),he.abrupt('return');case 56:he.next=65;break;case 58:return he.prev=58,he.t0=he['catch'](16),_e.Storm.over(ge),window.toast('[\u81EA\u52A8\u62BD\u5956][\u8282\u594F\u98CE\u66B4]\u62BD\u5956(roomid='+ue+',id='+ge+')\u7591\u4F3C\u89E6\u53D1\u98CE\u63A7,\u7EC8\u6B62\uFF01\r\n\u5C1D\u8BD5\u6B21\u6570:'+fe,'error'),console.error(he.t0),clearInterval(Te),he.abrupt('return');case 65:he.next=74;break;case 67:return he.prev=67,he.t1=he['catch'](0),_e.Storm.over(ge),window.toast('[\u81EA\u52A8\u62BD\u5956][\u8282\u594F\u98CE\u66B4]\u62BD\u5956(roomid='+ue+',id='+ge+')\u62BD\u5956\u5F02\u5E38,\u7EC8\u6B62\uFF01','error'),console.error(he.t1),clearInterval(Te),he.abrupt('return');case 74:case'end':return he.stop();}},me,this,[[0,67],[16,58]])}));return function(){return Ee.apply(this,arguments)}}();if(ue=parseInt(ue,10),ge=parseInt(ge,10),isNaN(ue)||isNaN(ge))return $.Deferred().reject();var pe=_Mathround(ge/1e6);if(_e.stormIdSet.isIn(pe))return $.Deferred().resolve();if(_e.stormIdSet.add(pe),!_e.Storm.check(ge)){_e.Storm.append(ge);var Te=0;0>=ce&&(ce=_Mathround(new Date().getTime()/1e3)+90);var fe=0;return window.toast('[\u81EA\u52A8\u62BD\u5956][\u8282\u594F\u98CE\u66B4]\u5C1D\u8BD5\u62BD\u5956(roomid='+ue+',id='+ge+')','success'),Te=setInterval(function(){return Ie()},_e.CONFIG.STORM_ONE_LIMIT),$.Deferred().resolve()}}},LITTLE_HEART:{medalRoom_list:[],liveRoom_list:[],getMedalRoomList:function getMedalRoomList(){var ge=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1;return 1===ge&&(_e.LITTLE_HEART.medalRoom_list=[]),M.i.medal(ge,25).then(function(ue){K('LITTLE_HEART.getMedalRoomList: API.i.medal',ue);var ce=!0,Ie=!1,pe=void 0;try{for(var fe,Ee,Te=ue.data.fansMedalList[Symbol.iterator]();!(ce=(fe=Te.next()).done);ce=!0)Ee=fe.value,_e.LITTLE_HEART.medalRoom_list=_e.LITTLE_HEART.medalRoom_list.concat(Ee.roomid)}catch(Ee){Ie=!0,pe=Ee}finally{try{!ce&&Te.return&&Te.return()}finally{if(Ie)throw pe}}K('MY_API.LITTLE_HEART.medalRoom_list',_e.LITTLE_HEART.medalRoom_list),ue.data.pageinfo.curPage<ue.data.pageinfo.totalpages&&_e.LITTLE_HEART.getMedalRoomList(ge+1)},function(){return window.toast('[\u5C0F\u5FC3\u5FC3]\u83B7\u53D6\u52CB\u7AE0\u5217\u8868\u5931\u8D25\uFF0C\u8BF7\u68C0\u67E5\u7F51\u7EDC','error'),V(function(){return _e.LITTLE_HEART.getMedalRoomList(ge)})})},checkRoomList:function(){var ge=_asyncToGenerator(regeneratorRuntime.mark(function ue(ce){var Ie,pe,Te,fe,Ee,me,Oe;return regeneratorRuntime.wrap(function(xe){for(;;)switch(xe.prev=xe.next){case 0:Ie=[],pe=!0,Te=!1,fe=void 0,xe.prev=4,Ee=ce[Symbol.iterator]();case 6:if(pe=(me=Ee.next()).done){xe.next=13;break}return Oe=me.value,xe.next=10,M.room.get_info(Oe).then(function(he){if(1===he.data.live_status)return void(Ie=Ie.concat(he.data.room_id))},function(){return window.toast('[\u5C0F\u5FC3\u5FC3]\u83B7\u53D6\u623F\u95F4\u4FE1\u606F\u5931\u8D25\uFF0C\u8BF7\u68C0\u67E5\u7F51\u7EDC','error'),V(function(){return _e.LITTLE_HEART.checkRoomList(ce)})});case 10:pe=!0,xe.next=6;break;case 13:xe.next=19;break;case 15:xe.prev=15,xe.t0=xe['catch'](4),Te=!0,fe=xe.t0;case 19:xe.prev=19,xe.prev=20,!pe&&Ee.return&&Ee.return();case 22:if(xe.prev=22,!Te){xe.next=25;break}throw fe;case 25:return xe.finish(22);case 26:return xe.finish(19);case 27:;if(K('MY_API.LITTLE_HEART.checkRoomList returnRoom',Ie),void 0==Ie){xe.next=33;break}return xe.abrupt('return',Ie);case 33:return window.toast('[\u5C0F\u5FC3\u5FC3]\u5F53\u524D\u7C89\u4E1D\u52CB\u7AE0\u5217\u8868\u4E2D\u65E0\u6B63\u5728\u76F4\u64AD\u623F\u95F4\uFF0C5\u5206\u949F\u540E\u91CD\u8BD5'),xe.abrupt('return',V(function(){return _e.LITTLE_HEART.getMedalRoomList(page)},3e5));case 35:case'end':return xe.stop();}},ue,se,[[4,15,19,27],[20,,22,26]])}));return function checkRoomList(){return ge.apply(this,arguments)}}(),checkRoom:function(){var ge=_asyncToGenerator(regeneratorRuntime.mark(function ue(ce){var Ie;return regeneratorRuntime.wrap(function(Te){for(;;)switch(Te.prev=Te.next){case 0:return Ie=void 0,Te.next=3,M.room.get_info(ce).then(function(fe){Ie=1===fe.data.live_status},function(){return window.toast('[\u5C0F\u5FC3\u5FC3]\u83B7\u53D6\u623F\u95F4\u4FE1\u606F\u5931\u8D25\uFF0C\u8BF7\u68C0\u67E5\u7F51\u7EDC','error'),V(function(){return _e.LITTLE_HEART.checkRoomList(roomList)})});case 3:return Te.abrupt('return',Ie);case 4:case'end':return Te.stop();}},ue,se)}));return function checkRoom(){return ge.apply(this,arguments)}}(),doHeartBeat:function(){var ge=_asyncToGenerator(regeneratorRuntime.mark(function ue(ce){var Ie,pe;return regeneratorRuntime.wrap(function(fe){for(;;)switch(fe.prev=fe.next){case 0:if(-1!=k.indexOf(ce)){fe.next=2;break}return fe.abrupt('return');case 2:return window.toast('[\u5C0F\u5FC3\u5FC3]\u5728\u65B0\u6807\u7B7E\u9875\u4E2D\u6253\u5F00\u623F\u95F4'+ce+'\u3010\u8BF7\u52FF\u70B9\u51FB\u3011','info'),K('[\u5C0F\u5FC3\u5FC3]\u6253\u5F00\u6807\u7B7E\u9875\u623F\u95F4',k),fe.next=6,GM_openInTab('https://live.bilibili.com/'+(ce+''),'loadInBackground');case 6:return Ie=fe.sent,U.push(Ie),pe=setInterval(_asyncToGenerator(regeneratorRuntime.mark(function Ee(){return regeneratorRuntime.wrap(function(Oe){for(;;)switch(Oe.prev=Oe.next){case 0:;if(void 0!=Ie&&Ie.close(),de(_e.CACHE.LittleHeart_TS)){Oe.next=6;break}return clearInterval(pe),K('[\u5C0F\u5FC3\u5FC3]','\u4ECA\u65E5\u4EFB\u52A1\u5B8C\u6210\uFF0C\u623F\u95F4'+ce+'\u4E0D\u518D\u6253\u5F00'),Oe.abrupt('return');case 6:if(!_e.LITTLE_HEART.checkRoom(ce)){Oe.next=12;break}return Oe.next=9,GM_openInTab('https://live.bilibili.com/'+(ce+''),'loadInBackground');case 9:Ie=Oe.sent,Oe.next=17;break;case 12:return window.toast('[\u5C0F\u5FC3\u5FC3]\u623F\u95F4'+ce+'\u4E0B\u64AD\uFF0C\u5373\u5C06\u518D\u6B21\u5BFB\u627E\u5F00\u64AD\u623F\u95F4','info'),clearInterval(pe),I(ce,k),I(Ie,U),Oe.abrupt('return',_e.LITTLE_HEART.run());case 17:case'end':return Oe.stop();}},Ee,se)})),310e3),fe.abrupt('return');case 10:case'end':return fe.stop();}},ue,se)}));return function doHeartBeat(){return ge.apply(this,arguments)}}(),checkHeart:function checkHeart(){var ge=function checkbag(){M.gift.bag_list().then(function(ce){K('[\u5C0F\u5FC3\u5FC3]\u68C0\u67E5\u5305\u88F9',ce);var Ie=ce.data.list.filter(function(pe){return 30607==pe.gift_id&&24==pe.gift_num&&'7\u5929'==pe.corner_mark});if(K('[\u5C0F\u5FC3\u5FC3]\u5305\u88F9\u51857\u592924\u4E2A\u5C0F\u5FC3\u5FC3',Ie),0<Ie.length)return clearInterval(ue),window.toast('[\u5C0F\u5FC3\u5FC3]\u4ECA\u65E5\u5C0F\u5FC3\u5FC3\u5DF2\u5168\u90E8\u83B7\u53D6','success'),_e.CACHE.LittleHeart_TS=B(),_e.saveCache(),K('[\u5C0F\u5FC3\u5FC3]',U),void T(U)})};ge();var ue=setInterval(function(){ge()},3e5)},run:function(){var ge=_asyncToGenerator(regeneratorRuntime.mark(function ue(){var ce,Ie,pe,Te,fe,Ee,me,Oe;return regeneratorRuntime.wrap(function(xe){for(;;)switch(xe.prev=xe.next){case 0:if(_e.CONFIG.LITTLE_HEART){xe.next=2;break}return xe.abrupt('return',$.Deferred().resolve());case 2:if(de(_e.CACHE.LittleHeart_TS)){xe.next=4;break}return xe.abrupt('return',$.Deferred().resolve());case 4:return xe.next=6,_e.LITTLE_HEART.getMedalRoomList();case 6:return xe.next=8,_e.LITTLE_HEART.checkRoomList(_e.LITTLE_HEART.medalRoom_list);case 8:ce=xe.sent,k=ce.filter(function(he){return!k.includes(he)}),Ie=0,pe=!0,Te=!1,fe=void 0,xe.prev=14,Ee=k[Symbol.iterator]();case 16:if(pe=(me=Ee.next()).done){xe.next=28;break}if(Oe=me.value,!(Ie<_e.CONFIG.MAX_TAB)){xe.next=24;break}return xe.next=21,_e.LITTLE_HEART.doHeartBeat(Oe);case 21:Ie++,xe.next=25;break;case 24:return xe.abrupt('break',28);case 25:pe=!0,xe.next=16;break;case 28:xe.next=34;break;case 30:xe.prev=30,xe.t0=xe['catch'](14),Te=!0,fe=xe.t0;case 34:xe.prev=34,xe.prev=35,!pe&&Ee.return&&Ee.return();case 37:if(xe.prev=37,!Te){xe.next=40;break}throw fe;case 40:return xe.finish(37);case 41:return xe.finish(34);case 42:;return _e.LITTLE_HEART.checkHeart(),xe.abrupt('return');case 45:case'end':return xe.stop();}},ue,se,[[14,30,34,42],[35,,37,41]])}));return function run(){return ge.apply(this,arguments)}}()}};_e.init().then(function(){try{var ge=$.Deferred();(function uniqueCheck(){var ce=Date.now();return 0<=ce-_e.CACHE.UNIQUE_CHECK&&15e3>=ce-_e.CACHE.UNIQUE_CHECK?($('.link-toast').hide(),$('.igiftMsg').hide(),_e.CONFIG.AUTO_TREASUREBOX=!1,window.toast('\u6709\u5176\u4ED6\u76F4\u64AD\u95F4\u9875\u9762\u7684\u811A\u672C\u6B63\u5728\u8FD0\u884C\uFF0C\u672C\u9875\u9762\u811A\u672C\u505C\u6B62\u8FD0\u884C','caution'),ge.reject()):ge.resolve()})().then(function(){var ce,Ie=function uniqueMark(){ce=setTimeout(Ie,1e4),_e.CACHE.UNIQUE_CHECK=Date.now(),_e.saveCache(!1)};return(window.addEventListener('unload',function(){ce&&(clearTimeout(ce),_e.CACHE.UNIQUE_CHECK=0,_e.saveCache()),T(U)}),Ie(),0===parseInt(Y.uid)||isNaN(parseInt(Y.uid)))?void _e.chatLog('\u672A\u767B\u5F55\uFF0C\u8BF7\u5148\u767B\u5F55\u518D\u4F7F\u7528\u811A\u672C','warning'):void(_e.newMessage(GM_info.script.version),K('MY_API.CONFIG',_e.CONFIG),_(_e))})}catch(ge){console.error('\u91CD\u590D\u8FD0\u884C\u68C0\u6D4B\u9519\u8BEF',ge)}})}function _(se){'use strict';var le=function clearStat(){se.GIFT_COUNT.COUNT=0,se.GIFT_COUNT.CLEAR_TS=ne(),se.saveGiftCount(),K('\u5DF2\u6E05\u7A7A\u8FA3\u6761\u6570\u91CF')};de(se.GIFT_COUNT.CLEAR_TS)&&le(),z(le,'\u91CD\u7F6E\u7EDF\u8BA1'),se.LITTLE_HEART.run(),se.removeUnnecessary(),setTimeout(function(){se.GroupSign.run(),se.DailyReward.run(),se.LiveReward.run(),se.Exchange.runS2C(),se.TreasureBox.run(),se.Gift.run(),se.MobileHeartBeat.run()},6e3),se.creatSetBox(),M.room.getList().then(function(ce){K('\u76F4\u64AD\u95F4\u5217\u8868',ce);var Ie=!0,pe=!1,Te=void 0;try{for(var me,fe=function _loop4(){var Oe=me.value;M.room.getRoomList(Oe.id,0,0,1,1).then(function(ve){K('\u76F4\u64AD\u95F4\u53F7\u5217\u8868',ve);for(var xe=0;xe<ve.data.length;++xe)se.listen(ve.data[xe].roomid,Y.uid,Oe.name+'\u533A')})},Ee=ce.data[Symbol.iterator]();!(Ie=(me=Ee.next()).done);Ie=!0)fe()}catch(Oe){pe=!0,Te=Oe}finally{try{!Ie&&Ee.return&&Ee.return()}finally{if(pe)throw Te}}});var _e=function check_top_room(){if(se.GIFT_COUNT.COUNT>=se.CONFIG.MAX_GIFT&&(K('\u8D85\u8FC7\u4ECA\u65E5\u8FA3\u6761\u9650\u5236\uFF0C\u4E0D\u53C2\u4E0E\u62BD\u5956'),se.max_blocked=!0),se.blocked||se.max_blocked)return se.blocked?(se.chatLog('\u8FDB\u5165\u5C0F\u9ED1\u5C4B\u68C0\u67E5\u5C0F\u65F6\u699C\u5DF2\u505C\u6B62\u8FD0\u884C'),void clearInterval(ge)):void se.chatLog('\u8FA3\u6761\u5DF2\u8FBE\u5230\u6700\u5927\u503C\u68C0\u67E5\u5C0F\u65F6\u699C\u5DF2\u505C\u6B62\u8FD0\u884C');if(E(se.CONFIG.TIME_AREA_START_H0UR,se.CONFIG.TIME_AREA_END_H0UR,se.CONFIG.TIME_AREA_START_MINUTE,se.CONFIG.TIME_AREA_END_MINUTE)&&se.CONFIG.TIME_AREA_DISABLE)return void se.chatLog('\u5F53\u524D\u65F6\u95F4\u6BB5\u4E0D\u68C0\u67E5\u5C0F\u65F6\u699C\u793C\u7269','warning');var ce=['\u5C0F\u65F6\u603B\u699C','\u5A31\u4E50\u5C0F\u65F6\u699C','\u7F51\u6E38\u5C0F\u65F6\u699C','\u624B\u6E38\u5C0F\u65F6\u699C','\u7ED8\u753B\u5C0F\u65F6\u699C','\u7535\u53F0\u5C0F\u65F6\u699C','\u5355\u673A\u5C0F\u65F6\u699C'],Ie=1,pe=function checkHourRank(fe){M.rankdb.getTopRealTimeHour(fe).then(function(Ee){var me=Ee.data.list;se.chatLog('\u68C0\u67E5'+ce[fe]+'\u623F\u95F4\u7684\u793C\u7269','warning'),K(ce[fe]+'\u623F\u95F4\u5217\u8868',me);var Oe=!0,ve=!1,xe=void 0;try{for(var Ce,Ge,he=me[Symbol.iterator]();!(Oe=(Ce=he.next()).done);Oe=!0)Ge=Ce.value,se.checkRoom(Ge.roomid,'\u5C0F\u65F6\u699C-'+Ge.area_v2_parent_name+'\u533A')}catch(Ge){ve=!0,xe=Ge}finally{try{!Oe&&he.return&&he.return()}finally{if(ve)throw xe}}})},Te=setInterval(function(){Ie<=ce.length-1?(pe(Ie),Ie++):clearInterval(Te)},1e3)};setTimeout(_e,6e3);var ge=setInterval(_e,parseInt(1e3*se.CONFIG.CHECK_HOUR_ROOM_INTERVAL)),ue=function reset(ce){var Ie=setTimeout(function(){if(0<se.raffleId_list.length||0<se.guardId_list.length||0<se.pkId_list.length)return K('[\u5237\u65B0\u76F4\u64AD\u95F4]','\u8FD8\u6709\u793C\u7269\u6CA1\u62BD\uFF0C\u5EF6\u8FDF15s\u540E\u5237\u65B0\u76F4\u64AD\u95F4'),void ue(15000);if(de(se.CACHE.LittleHeart_TS))return K('[\u5237\u65B0\u76F4\u64AD\u95F4]','\u6B63\u5728\u53D1\u9001\u83B7\u53D6\u5C0F\u5FC3\u5FC3\uFF0C10\u5206\u949F\u540E\u518D\u6B21\u68C0\u67E5'),clearTimeout(Ie),void ue(6e5);if(E(se.CONFIG.TIME_AREA_START_H0UR,se.CONFIG.TIME_AREA_END_H0UR,se.CONFIG.TIME_AREA_START_MINUTE,se.CONFIG.TIME_AREA_END_MINUTE)&&se.CONFIG.IN_TIME_RELOAD_DISABLE){var pe=u(se.CONFIG.TIME_AREA_START_MINUTE,se.CONFIG.TIME_AREA_END_MINUTE)+6e4;return ue(pe),void K('[\u5237\u65B0\u76F4\u64AD\u95F4]','\u5904\u4E8E\u4F11\u7720\u65F6\u95F4\u6BB5\uFF0C\u5C06\u5728'+pe+'\u6BEB\u79D2\u540E\u5237\u65B0\u76F4\u64AD\u95F4')}window.location.reload()},ce)};ue(6e4*se.CONFIG.TIME_RELOAD)}function u(se,le){var _e=new Date,ge=_e.getHours(),ue=_e.getMinutes(),ce=_e.getSeconds(),Te=1e3*(3600*se)+1e3*(60*le)-(1e3*(3600*ge)+1e3*(60*ue)+1e3*ce);return K('[getIntervalTime]\u83B7\u53D6\u95F4\u9694\u65F6\u95F4',Te+'\u6BEB\u79D2'),0>Te?86400000+Te:Te}function I(se,le){le.splice(le.indexOf(se),1)}function T(se){if(se!=void 0){var le=!0,_e=!1,ge=void 0;try{for(var ce,Ie,ue=se[Symbol.iterator]();!(le=(ce=ue.next()).done);le=!0)Ie=ce.value,Ie.close()}catch(Ie){_e=!0,ge=Ie}finally{try{!le&&ue.return&&ue.return()}finally{if(_e)throw ge}}}}function f(se,le){var _e=new Date,ge=_e.getHours(),ue=_e.getMinutes();return ge==se&&ue==le||(K('\u9519\u8BEF\u65F6\u95F4'),!1)}function E(se,le,_e,ge){if(23<se||24<le||0>se||1>le||59<_e||0>_e||59<ge||0>ge)return!1;var ue=new Date,ce=ue.getHours(),Ie=ue.getMinutes();if(se<le)return ce>=se&&ce<le||ce==le&&Ie>=_e&&Ie<ge;return se>le?ce>=se||ce<le||ce==le&&Ie>=_e&&Ie<ge:se==le?ce==se&&_e<=ge&&Ie>=_e&&Ie<ge||ce==se&&_e>ge&&Ie<=ge&&Ie>_e:void 0}function O(se){return new Promise(function(le){setTimeout(function(){le()},se)})}function C(se){if(0>=se)return!1;var le=Math.random();return se/100>=le}function G(se){return new Promise(function(le){var _e=function onerror(ge){console.error('XHR',ge),le(void 0)};if(se.GM)'POST'===se.method&&(void 0===se.headers&&(se.headers={}),void 0===se.headers['Content-Type']&&(se.headers['Content-Type']='application/x-www-form-urlencoded; charset=utf-8')),se.timeout=30000,se.onload=function(ge){le(ge.response)},se.onerror=_e,se.ontimeout=_e,GM_xmlhttpRequest(se);else{var ge=new XMLHttpRequest;ge.open(se.method,se.url),'POST'===se.method&&null===ge.getResponseHeader('Content-Type')&&ge.setRequestHeader('Content-Type','application/x-www-form-urlencoded; charset=utf-8'),se.cookie&&(ge.withCredentials=!0),se.responseType!==void 0&&(ge.responseType=se.responseType),ge.timeout=30000,ge.onload=function(ue){var ce=ue.target;le({response:ce,body:ce.response})},ge.onerror=_e,ge.ontimeout=_e,ge.send(se.data)}})}oe.init(),$(function(){var se=function loadInfo(le){setTimeout(function(){var _e='undefined'==typeof unsafeWindow?window:unsafeWindow;_e.BilibiliLive===void 0||0===parseInt(_e.BilibiliLive.UID)||isNaN(parseInt(_e.BilibiliLive.UID))?(se(1e3),window.toast('['+GM_info.script.name+']\u65E0\u914D\u7F6E\u4FE1\u606F','warning'),K('\u65E0\u914D\u7F6E\u4FE1\u606F')):(Y.room_id=_e.BilibiliLive.ROOMID,Y.uid=_e.BilibiliLive.UID,M.live_user.get_info_in_room(Y.room_id).then(function(ge){K('InitData: API.live_user.get_info_in_room',ge),Y.mobile_verify=ge.data.info.mobile_verify,Y.identification=ge.data.info.identification}),M.gift.gift_config().then(function(ge){K('InitData: API.gift.gift_config',ge),!!ge.data&&$.isArray(ge.data)?Y.gift_list=ge.data:!!ge.data.list&&$.isArray(ge.data.list)?Y.gift_list=ge.data.list:(Y.gift_list=[{id:6,price:1000},{id:1,price:100},{id:30607,price:5000}],window.toast('\u76F4\u64AD\u95F4\u793C\u7269\u6570\u636E\u83B7\u53D6\u5931\u8D25\uFF0C\u4F7F\u7528\u5907\u7528\u6570\u636E','error'))}),Y.bili_jct=M.getCookie('bili_jct'),Y.ruid=_e.BilibiliLive.ANCHOR_UID,Y.rnd=_e.BilibiliLive.RND,Y.visit_id=_e.__statisObserver?_e.__statisObserver.__visitId:'',K('Live_info',Y),l())},le)};se(1e3),o()}),Array.prototype.remove=function(se){var le=this.indexOf(se);-1<le&&this.splice(le,1)};var ne=function dateNow(){return Date.now()},de=function checkNewDay(se){if(0===se)return!0;var le=new Date(se),_e=new Date,ge=le.getDate(),ue=_e.getDate();return ue!==ge}})();