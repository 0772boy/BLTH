// ==UserScript==
// @namespace     https://github.com/andywang425
// @name          B站直播间挂机助手
// @name:en       B站直播间挂机助手
// @author        andywang425
// @description   自动参与Bilibili直播区抽奖(现在极少)，直播区签到，完成主站每日任务，领银瓜子宝箱，自动送礼，自动获取小心心，批量点亮勋章，快捷购买粉丝勋章
// @description:en 自动参与Bilibili直播区抽奖(现在极少)，直播区签到，完成主站每日任务，领银瓜子宝箱，自动送礼，自动获取小心心，批量点亮勋章，快捷购买粉丝勋章
// @updateURL     https://raw.githubusercontent.com/andywang425/Bilibili-SGTH/master/B%E7%AB%99%E7%9B%B4%E6%92%AD%E9%97%B4%E6%8C%82%E6%9C%BA%E5%8A%A9%E6%89%8B.user.js
// @downloadURL    https://raw.githubusercontent.com/andywang425/Bilibili-SGTH/master/B%E7%AB%99%E7%9B%B4%E6%92%AD%E9%97%B4%E6%8C%82%E6%9C%BA%E5%8A%A9%E6%89%8B.user.js
// @homepageURL   https://github.com/andywang425/BLTH/
// @supportURL    https://github.com/andywang425/BLTH/issues
// @icon          https://s1.hdslb.com/bfs/live/d57afb7c5596359970eb430655c6aef501a268ab.png
// @copyright     2020, andywang425 (https://github.com/andywang425)
// @license       MIT
// @version       4.1.4
// @include      /https?:\/\/live\.bilibili\.com\/[blanc\/]?[^?]*?\d+\??.*/
// @run-at       document-start
// @connect      passport.bilibili.com
// @connect      api.live.bilibili.com
// @connect      live-trace.bilibili.com
//@require https://cdn.jsdelivr.net/gh/jquery/jquery@3.2.1/dist/jquery.min.js
//@require https://cdn.jsdelivr.net/gh/andywang425/BLTH@v2.1/BilibiliAPI_Mod.min.js
//@require https://cdn.jsdelivr.net/gh/andywang425/BLTH@v1.3.2/OCRAD.min.js
//@require https://cdn.jsdelivr.net/gh/andywang425/BLTH@v1.3.4/libBilibiliToken.user.js
//@require https:///cdn.jsdelivr.net/gh/sentsin/layer@v3.1.1/dist/layer.js
// @grant       unsafeWindow
// @grant       GM_xmlhttpRequest
// @grant       GM_openInTab
// @grant       GM_getResourceText
// ==/UserScript==
'use strict';var _Mathmax=Math.max,_Mathmin=Math.min,_Mathfloor=Math.floor,_Mathround=Math.round,_typeof='function'==typeof Symbol&&'symbol'==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&'function'==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?'symbol':typeof o};function _defineProperty(o,l,_){return l in o?Object.defineProperty(o,l,{value:_,enumerable:!0,configurable:!0,writable:!0}):o[l]=_,o}function _asyncToGenerator(o){return function(){var l=o.apply(this,arguments);return new Promise(function(_,u){function I(T,f){try{var E=l[T](f),O=E.value}catch(C){return void u(C)}return E.done?void _(O):Promise.resolve(O).then(function(C){I('next',C)},function(C){I('throw',C)})}return I('next')})}}(function(){var A=this,N='IGIFTMSG',D=localStorage.getItem(N+'_block_live')||'pass';function o(){$('head').append('\n        <style>\n            .igiftMsg_input{\n                outline: none;\n                border: 1px solid #e9eaec;\n                background-color: #fff;\n                border-radius: 4px;\n                padding: 1px 0 0;\n                overflow: hidden;\n                font-size: 12px;\n                line-height: 19px;\n                width: 30px;\n                \'z-index\': \'10001\';\n            }\n            .igiftMsg_btn{\n                background-color: #23ade5;\n                color: #fff;\n                border-radius: 4px;\n                border: none;\n                padding: 5px;\n                cursor: pointer;\n                box-shadow: 0 0 2px #00000075;\n                line-height: 10px;\n                \'z-index\': \'10001\';\n            }\n            .igiftMsg_fs{\n                border: 2px solid #d4d4d4;\n                \'z-index\': \'10001\';\n            }\n        </style>\n            '),$('head').append('<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/sentsin/layer@v3.1.1/dist/theme/default/layer.css">')}function l(){var ge,_e=this,ce={CONFIG_DEFAULT:{AUTO_GIFT:!1,AUTO_GIFT_ROOMID:'0',AUTO_GROUP_SIGN:!0,AUTO_TREASUREBOX:!0,CHECK_HOUR_ROOM_INTERVAL:120,COIN:!1,COIN_NUMBER:0,COIN_TYPE:'COIN_DYN',COIN_UID:0,BLOCK_LIVE_VIDEO:!0,EXCLUDE_ROOMID:'0',FORCE_LOTTERY:!1,FORCE_LIGHT:!1,GIFT_LIMIT:1,GIFT_SEND_HOUR:23,GIFT_SEND_MINUTE:59,GIFT_INTERVAL:5,GIFT_METHOD:'GIFT_SEND_TIME',GIFT_SORT:!1,IN_TIME_RELOAD_DISABLE:!1,LIVE_SIGN:!0,LOGIN:!0,LITTLE_HEART:!1,LIGHT_MEDALS:'0',LIGHT_METHOD:'LIGHT_WHITE',MAX_GIFT:99999,MAX_TAB:5,MOBILE_HEARTBEAT:!1,RANDOM_DELAY:!0,RANDOM_SEND_DANMU:0,RANDOM_SKIP:0,REMOVE_ELEMENT_2233:!1,REMOVE_ELEMENT_activity:!1,RND_DELAY_END:5,RND_DELAY_START:2,SEND_ALL_GIFT:!1,SHARE:!0,SILVER2COIN:!1,SPARE_GIFT_ROOM:'0',SPARE_GIFT_UID:'0',STORM:!1,STORM_MAX_COUNT:100,STORM_ONE_LIMIT:200,STORM_QUEUE_SIZE:3,TIME_AREA_DISABLE:!0,TIME_AREA_END_H0UR:8,TIME_AREA_END_MINUTE:0,TIME_AREA_START_H0UR:2,TIME_AREA_START_MINUTE:0,TIME_RELOAD:120,WATCH:!0},CACHE_DEFAULT:{UNIQUE_CHECK:0,AUTO_GROUP_SIGH_TS:0,DailyReward_TS:0,LiveReward_TS:0,TreasureBox_TS:0,Silver2Coin_TS:0,Gift_TS:0,GiftInterval_TS:0,MobileHeartBeat_TS:0,LittleHeart_TS:0},CONFIG:{},CACHE:{},GIFT_COUNT:{COUNT:0,SILVER_COUNT:0,CLEAR_TS:0},init:function init(){try{S.setCommonArgs(P.bili_jct)}catch(Ie){return void console.error('['+N+']',Ie)}var ue=$.Deferred();try{ce.loadConfig().then(function(){ce.chatLog('\u811A\u672C\u8F7D\u5165\u914D\u7F6E\u6210\u529F','success'),ue.resolve()})}catch(Ie){console.error('API\u521D\u59CB\u5316\u51FA\u9519',Ie),ce.chatLog('API\u521D\u59CB\u5316\u51FA\u9519','error'),ue.reject()}try{ce.loadCache().then(function(){window.toast('CACHE\u8F7D\u5165\u6210\u529F','success'),ue.resolve()})}catch(Ie){console.error('CACHE\u521D\u59CB\u5316\u51FA\u9519',Ie),window.toast('CACHE\u521D\u59CB\u5316\u51FA\u9519','error'),ue.reject()}return setTimeout(function(){ce.TreasureBox.init()},5750),ue},loadConfig:function loadConfig(){var ue=$.Deferred();try{var Ie=JSON.parse(localStorage.getItem(N+'_CONFIG'));for(var pe in $.extend(!0,ce.CONFIG,ce.CONFIG_DEFAULT),ce.CONFIG)ce.CONFIG.hasOwnProperty(pe)&&void 0!==Ie[pe]&&null!==Ie[pe]&&(ce.CONFIG[pe]=Ie[pe]);ce.loadGiftCount(),ue.resolve()}catch(Ie){z('API\u8F7D\u5165\u914D\u7F6E\u5931\u8D25\uFF0C\u52A0\u8F7D\u9ED8\u8BA4\u914D\u7F6E',Ie),ce.setDefaults(),ue.reject()}return ue},loadCache:function loadCache(){var ue=$.Deferred();try{var Ie=JSON.parse(localStorage.getItem(N+'_CACHE'));for(var pe in $.extend(!0,ce.CACHE,ce.CACHE_DEFAULT),ce.CACHE)ce.CACHE.hasOwnProperty(pe)&&void 0!==Ie[pe]&&null!==Ie[pe]&&(ce.CACHE[pe]=Ie[pe]);ue.resolve()}catch(Ie){z('CACHE\u8F7D\u5165\u914D\u7F6E\u5931\u8D25\uFF0C\u52A0\u8F7D\u9ED8\u8BA4\u914D\u7F6E',Ie),ce.setDefaults(),ue.reject()}return ue},newMessage:function newMessage(ue){try{var Ie=localStorage.getItem(N+'_NEWMSG_CACHE');(Ie==void 0||null==Ie||'4.1.4'!=Ie)&&'4.1.4'==ue&&(layer.open({title:ue+'\u66F4\u65B0\u63D0\u793A',content:'\u56E0\u4E3A\u6280\u672F\u539F\u56E0\uFF0C\u73B0\u5728\u6539\u4E3A\u7528flash\u64AD\u653E\u7684\u65B9\u5F0F\u62E6\u622A\u76F4\u64AD\u6D41\u3002\n                            \u5982\u679C\u60F3\u8981\u7528\u811A\u672C\u6302\u5C0F\u5FC3\u5FC3\uFF0C\u8BF7\u7981\u7528flash\uFF08\u5927\u591A\u6570\u6D4F\u89C8\u5668\u9ED8\u8BA4\u7981\u7528\uFF09\u3002\n                            \u8DDD\u79BBflash\u88AB\u6DD8\u6C70\u8FD8\u6709\u51E0\u4E2A\u6708\u7684\u65F6\u95F4\uFF0C\u5728\u6B64\u671F\u95F4\u6211\u4F1A\u518D\u60F3\u60F3\u5176\u5B83\u65B9\u6CD5\u3002\n                            \u5982\u679C\u4F60\u6709\u597D\u7684\u60F3\u6CD5\u6B22\u8FCE\u53CD\u9988\u3002'}),localStorage.setItem(N+'_NEWMSG_CACHE',ue))}catch(Ie){z('\u63D0\u793A\u4FE1\u606FCACHE\u8F7D\u5165\u5931\u8D25',Ie)}},saveConfig:function saveConfig(){try{return localStorage.setItem(N+'_CONFIG',JSON.stringify(ce.CONFIG)),ce.chatLog('\u914D\u7F6E\u5DF2\u4FDD\u5B58'),z('MY_API.CONFIG',ce.CONFIG),!0}catch(ue){return z('API\u4FDD\u5B58\u51FA\u9519',ue),!1}},saveCache:function saveCache(ue){try{return localStorage.setItem(N+'_CACHE',JSON.stringify(ce.CACHE)),!1!=ue&&z('CACHE\u5DF2\u4FDD\u5B58',ce.CACHE),!0}catch(Ie){return z('CACHE\u4FDD\u5B58\u51FA\u9519',Ie),!1}},setDefaults:function setDefaults(){ce.CONFIG=ce.CONFIG_DEFAULT,ce.CACHE=ce.CACHE_DEFAULT,ce.saveConfig(),ce.saveCache(),ce.chatLog('\u914D\u7F6E\u548CCACHE\u5DF2\u91CD\u7F6E\u4E3A\u9ED8\u8BA4\u30023\u79D2\u540E\u5237\u65B0\u9875\u9762'),setTimeout(function(){window.location.reload()},3e3)},ReDoDailyTasks:function ReDoDailyTasks(){window.toast('3\u79D2\u540E\u518D\u6B21\u6267\u884C\u6240\u6709\u4EFB\u52A1','info'),setTimeout(function(){ce.CACHE=ce.CACHE_DEFAULT,ce.GroupSign.run(),ce.DailyReward.run(),ce.LiveReward.run(),ce.Exchange.runS2C(),ce.TreasureBox.run(),ce.Gift.run(),ce.LITTLE_HEART.run(),ce.MobileHeartBeat.run()},3e3)},loadGiftCount:function loadGiftCount(){try{var ue=JSON.parse(localStorage.getItem(N+'_GIFT_COUNT'));for(var Ie in ce.GIFT_COUNT)ce.GIFT_COUNT.hasOwnProperty(Ie)&&void 0!==ue[Ie]&&null!==ue[Ie]&&(ce.GIFT_COUNT[Ie]=ue[Ie]);z('MY_API.GIFT_COUNT',ce.GIFT_COUNT)}catch(ue){z('\u8BFB\u53D6\u7EDF\u8BA1\u5931\u8D25',ue)}},saveGiftCount:function saveGiftCount(){try{return localStorage.setItem(N+'_GIFT_COUNT',JSON.stringify(ce.GIFT_COUNT)),z('\u7EDF\u8BA1\u4FDD\u5B58\u6210\u529F',ce.GIFT_COUNT),!0}catch(ue){return z('\u7EDF\u8BA1\u4FDD\u5B58\u51FA\u9519',ue),!1}},addGift:function addGift(ue){ce.GIFT_COUNT.COUNT+=ue,$('#giftCount span:eq(0)').text(ce.GIFT_COUNT.COUNT),ce.saveGiftCount()},addSilver:function addSilver(ue){ce.GIFT_COUNT.SILVER_COUNT+=ue,$('#giftCount span:eq(1)').text(ce.GIFT_COUNT.SILVER_COUNT),ce.saveGiftCount()},removeUnnecessary:function removeUnnecessary(){var ue=['#my-dear-haruna-vm','.activity-entry','.bilibili-live-player'],Ie=function removeUntiSucceed(Te,fe){!0===ce.CONFIG[Te]&&setInterval(function(){0<$(ue[fe]).length&&$(ue[fe]).remove()},200)},pe=function mute(){window.localStorage.videoVolume=0,!!window.localStorage.videoVolume||Q(function(){return pe},200)};ce.CONFIG.LITTLE_HEART&&pe(),Ie('REMOVE_ELEMENT_2233',0),Ie('REMOVE_ELEMENT_activity',1),Ie('REMOVE_ELEMENT_player',2)},creatSetBox:function creatSetBox(){function ue(){var be,Le,Se=ce.CONFIG.TIME_AREA_START_H0UR=parseInt(he.find('div[data-toggle="TIME_AREA_DISABLE"] .startHour').val()),Fe=ce.CONFIG.TIME_AREA_END_H0UR=parseInt(he.find('div[data-toggle="TIME_AREA_DISABLE"] .endHour').val()),we=ce.CONFIG.TIME_AREA_START_MINUTE=parseInt(he.find('div[data-toggle="TIME_AREA_DISABLE"] .startMinute').val()),ke=ce.CONFIG.TIME_AREA_END_MINUTE=parseInt(he.find('div[data-toggle="TIME_AREA_DISABLE"] .endMinute').val());if(0>Se||0>Fe||0>we||0>ke)return void ce.chatLog('[\u5B9A\u65F6\u4F11\u7720]\u6570\u636E\u5C0F\u4E8E0','warning');if(24<=Se||24<=Fe||60<=we||60<=ke)return void ce.chatLog('[\u5B9A\u65F6\u4F11\u7720]\u65F6\u95F4\u9519\u8BEF','warning');if(ce.CONFIG.TIME_AREA_START_H0UR=Se,ce.CONFIG.TIME_AREA_END_H0UR=Fe,ce.CONFIG.TIME_AREA_START_MINUTE=we,ce.CONFIG.TIME_AREA_END_MINUTE=ke,be=parseFloat(he.find('div[data-toggle="RANDOM_SKIP"] .per').val()),0>be||100<be)return void ce.chatLog('[\u968F\u673A\u8DF3\u8FC7\u793C\u7269]\u6570\u636E\u5C0F\u4E8E0\u6216\u5927\u4E8E100','warning');if(ce.CONFIG.RANDOM_SKIP=be,be=parseFloat(he.find('div[data-toggle="RANDOM_SEND_DANMU"] .per').val()),5<be)return void ce.chatLog('[\u6D3B\u8DC3\u5F39\u5E55]\u4E3A\u7EF4\u62A4\u76F4\u64AD\u95F4\u5F39\u5E55\u6C1B\u56F4,\u5F39\u5E55\u53D1\u9001\u6982\u7387\u4E0D\u5F97\u5927\u4E8E5%','warning');if(0>be)return void ce.chatLog('[\u6D3B\u8DC3\u5F39\u5E55]\u6570\u636E\u5C0F\u4E8E0','warning');if(ce.CONFIG.RANDOM_SEND_DANMU=be,be=parseInt(he.find('div[data-toggle="MAX_GIFT"] .num').val()),ce.CONFIG.MAX_GIFT=be,be=parseInt(he.find('div[data-toggle="TIME_RELOAD"] .delay-seconds').val()),0>=be||1e4<be)return void ce.chatLog('[\u76F4\u64AD\u95F4\u91CD\u8F7D\u65F6\u95F4]\u6570\u636E\u5C0F\u4E8E\u7B49\u4E8E0\u6216\u5927\u4E8E10000','warning');if(ce.CONFIG.TIME_RELOAD=be,be=parseFloat(he.find('div[data-toggle="RANDOM_DELAY"] .RND_DELAY_START').val()),Fe=parseFloat(he.find('div[data-toggle="RANDOM_DELAY"] .RND_DELAY_END').val()),0>be||100<Fe)return void ce.chatLog('[\u62BD\u5956\u5EF6\u65F6]\u6570\u636E\u5C0F\u4E8E0\u6216\u5927\u4E8E100','warning');if(Fe<=be)return void ce.chatLog('[\u62BD\u5956\u5EF6\u65F6]\u6570\u636E\u5927\u5C0F\u5173\u7CFB\u4E0D\u6B63\u786E','warning');if(ce.CONFIG.RND_DELAY_START=be,ce.CONFIG.RND_DELAY_END=Fe,be=parseInt(he.find('div[data-toggle="COIN"] .coin_number').val()),0>be||5<be)return void ce.chatLog('[\u81EA\u52A8\u6295\u5E01]\u6570\u636E\u5C0F\u4E8E0\u6216\u5927\u4E8E5','warning');if(ce.CONFIG.COIN_NUMBER=be,be=parseInt(he.find('div[data-toggle="CHECK_HOUR_ROOM_INTERVAL"] .num').val()),0>=be)return void ce.chatLog('[\u68C0\u67E5\u5C0F\u65F6\u699C\u95F4\u9694]\u6570\u636E\u5C0F\u4E8E\u7B49\u4E8E0','warning');ce.CONFIG.CHECK_HOUR_ROOM_INTERVAL=be,be=he.find('div[data-toggle="AUTO_GIFT_ROOMID"] .num').val(),Le=be.split(',');for(var Ue=0;Ue<Le.length;Ue++)''===Le[Ue]&&(Le[Ue]=0);be=Le.join(','),ce.CONFIG.AUTO_GIFT_ROOMID=be,be=he.find('div[data-toggle="EXCLUDE_ROOMID"] .num').val(),Le=be.split(',');for(var Ue=0;Ue<Le.length;Ue++)''===Le[Ue]&&(Le[Ue]=0);return(be=Le.join(','),ce.CONFIG.EXCLUDE_ROOMID=be,be=parseInt(he.find('div[data-toggle="GIFT_LIMIT"] .num').val()),ce.CONFIG.GIFT_LIMIT=be,Se=parseInt(he.find('div[data-toggle="GIFT_SEND_TIME"] .Hour').val()),Fe=parseInt(he.find('div[data-toggle="GIFT_SEND_TIME"] .Minute').val()),0>Se||0>Fe)?void ce.chatLog('[\u9001\u793C\u65F6\u95F4]\u6570\u636E\u5C0F\u4E8E0','warning'):24<=Se||60<=Fe?void ce.chatLog('[\u9001\u793C\u65F6\u95F4]\u65F6\u95F4\u9519\u8BEF','warning'):void(ce.CONFIG.GIFT_SEND_HOUR=Se,ce.CONFIG.GIFT_SEND_MINUTE=Fe,be=he.find('div[data-toggle="SPARE_GIFT_ROOM"] .num').val(),ce.CONFIG.SPARE_GIFT_ROOM=be,be=he.find('div[data-toggle="SPARE_GIFT_UID"] .num').val(),ce.CONFIG.SPARE_GIFT_UID=be,be=parseInt(he.find('div[data-toggle="STORM_QUEUE_SIZE"] .num').val()),ce.CONFIG.STORM_QUEUE_SIZE=be,be=parseInt(he.find('div[data-toggle="STORM_MAX_COUNT"] .num').val()),ce.CONFIG.STORM_MAX_COUNT=be,be=parseInt(he.find('div[data-toggle="STORM_ONE_LIMIT"] .num').val()),ce.CONFIG.STORM_ONE_LIMIT=be,be=parseInt(he.find('div[data-toggle="COIN_UID"] .num').val()),ce.CONFIG.COIN_UID=be,be=he.find('div[data-toggle="LIGHT_MEDALS"] .num').val(),ce.CONFIG.LIGHT_MEDALS=be,be=parseInt(he.find('div[data-toggle="MAX_TAB"] .num').val()),ce.CONFIG.MAX_TAB=be,ce.saveConfig())}function Ie(be){return S.live_user.get_anchor_in_room(be).then(function(Le){z('API.live_user.get_anchor_in_room response',Le),0===Le.code?layer.confirm('\u662F\u5426\u6D88\u801720\u786C\u5E01\u8D2D\u4E70UP\u4E3B\u3010'+Le.data.info.uname+'\u3011\u7684\u7C89\u4E1D\u52CB\u7AE0\uFF1F',{title:'\u8D2D\u4E70\u52CB\u7AE0',btn:['\u662F','\u5426']},function(){return S.link_group.buy_medal(Le.data.info.uid).then(function(Se){z('API.link_group.buy_medal re',Se),0===Se.code?layer.msg('\u8D2D\u4E70\u6210\u529F',{time:2e3,icon:1}):layer.msg('\u8D2D\u4E70\u5931\u8D25 '+Se.message,{time:2500,icon:2})})},function(){layer.msg('\u5DF2\u53D6\u6D88\u8D2D\u4E70',{time:2e3})}):layer.msg('\u68C0\u67E5\u623F\u95F4\u51FA\u9519 '+Le.message,{time:2500})})}var pe=['.chat-history-list','.attention-btn-ctnr','.live-player-mounter'],Te=!0,fe=!1,Ee=void 0;try{for(var Oe,be,me=pe[Symbol.iterator]();!(Te=(Oe=me.next()).done);Te=!0)if(be=Oe.value,0==$(be).length)return Q(function(){return ce.creatSetBox()},200)}catch(be){fe=!0,Ee=be}finally{try{!Te&&me.return&&me.return()}finally{if(fe)throw Ee}}var ve='hide'==L?'\u663E\u793A\u7A97\u53E3\u548C\u63D0\u793A\u4FE1\u606F':'\u9690\u85CF\u7A97\u53E3\u548C\u63D0\u793A\u4FE1\u606F',xe=$('<button style="display: inline-block; float: left; margin-right: 7px;background-color: #23ade5;color: #fff;border-radius: 4px;border: none; padding:4px; cursor: pointer;box-shadow: 1px 1px 2px #00000075;" id="hiderbtn">'+ve+'<br></button>');xe.click(function(){if('show'==L){L='hide',localStorage.setItem(N+'_msgHide',L),$('.igiftMsg').hide(),he.hide(),$('.link-toast').hide();var be=$('.chat-history-list');be.animate({scrollTop:0},0),setTimeout(function(){be.animate({scrollTop:be.prop('scrollHeight')},10)},100),document.getElementById('hiderbtn').innerHTML='\u663E\u793A\u7A97\u53E3\u548C\u63D0\u793A\u4FE1\u606F'}else{L='show',localStorage.setItem(N+'_msgHide',L),$('.igiftMsg').show(),$('.link-toast').show(),he.show();var be=$('.chat-history-list');be.animate({scrollTop:be.prop('scrollHeight')},0),document.getElementById('hiderbtn').innerHTML='\u9690\u85CF\u7A97\u53E3\u548C\u63D0\u793A\u4FE1\u606F'}}),$('.attention-btn-ctnr').append(xe);var he=$('<div>'),Ce=$('.live-player-mounter').height();he.css({width:'auto',height:Ce,position:'absolute',top:'-2px',right:'0px',background:'#F0F0F0',padding:'10px',"z-index":'10001',"border-radius":'4px',overflow:'scroll',"line-height":'15px'}),he.append('\n                <div id=\'allsettings\'>\n                <fieldset class="igiftMsg_fs">\n                    <legend style="color: black">\u4ECA\u65E5\u7EDF\u8BA1</legend>\n                    <div id="giftCount" style="font-size: large; text-shadow: 1px 1px #00000066; color: blueviolet;">\n                        \u8FA3\u6761&nbsp;<span>'+ce.GIFT_COUNT.COUNT+'</span>\n                        \u94F6\u74DC\u5B50&nbsp;<span>'+ce.GIFT_COUNT.SILVER_COUNT+'\u4E07</span>\n                        <button style="font-size: small" class="igiftMsg_btn" data-action="save">\u4FDD\u5B58\u6240\u6709\u8BBE\u7F6E</button>\n                    </div>\n                </fieldset>\n                <div id="left_fieldset" style="float:left;">\n                    <fieldset class="igiftMsg_fs">\n                        <legend style="color: black">\u62BD\u5956\u8BBE\u7F6E</legend>\n                        <div data-toggle="RANDOM_DELAY">\n                            <label style="cursor: pointer; margin: 5px auto; color: darkgreen">\n                                <input style="vertical-align: text-top;" type="checkbox">\u62BD\u5956\u9644\u52A0\u968F\u673A\u5EF6\u8FDF\n                                <input class="RND_DELAY_START igiftMsg_input" style="width: 30px;vertical-align: top;" type="text">~\n                                <input class="RND_DELAY_END igiftMsg_input" style="width: 30px;vertical-align: top;" type="text">s\n                            </label>\n                        </div>\n                        <div data-toggle="TIME_AREA_DISABLE">\n                            <label style="cursor: pointer; margin: 5px auto; color: darkgreen">\n                                <input style="vertical-align: text-top;" type="checkbox">\u542F\u7528\n                                <input class="startHour igiftMsg_input" style="width: 20px;" type="text">\u70B9\n                                <input class="startMinute igiftMsg_input" style="width: 20px;" type="text">\u5206\u81F3\n                                <input class="endHour igiftMsg_input" style="width: 20px;" type="text">\u70B9\n                                <input class="endMinute igiftMsg_input" style="width: 20px;" type="text">\u5206\u4E0D\u62BD\u5956(24\u5C0F\u65F6\u5236)\n                            </label>\n                        </div>\n                        <div data-toggle="RANDOM_SKIP">\n                            <label style="cursor: pointer; margin: 5px auto; color: darkgreen">\n                                \u968F\u673A\u8DF3\u8FC7\u793C\u7269(0\u5230100,\u4E3A0\u5219\u4E0D\u8DF3\u8FC7)<input class="per igiftMsg_input" style="width: 30px;" type="text">%\n                            </label>\n                        </div>\n                        <div data-toggle="MAX_GIFT">\n                            <label style="cursor: pointer; margin: 5px auto; color: darkgreen">\n                                \u5F53\u5929\u6700\u591A\u62A2\u8FA3\u6761\u6570\u91CF<input class="num igiftMsg_input" style="width: 100px;" type="text">\n                            </label>\n                        </div>\n                        <div data-toggle="RANDOM_SEND_DANMU">\n                            <label style="cursor: pointer; margin: 5px auto; color: darkgreen">\n                                \u62BD\u5956\u65F6\u6D3B\u8DC3\u5F39\u5E55\u53D1\u9001\u6982\u7387(0\u52305,\u4E3A0\u5219\u4E0D\u53D1\u9001)<input class="per igiftMsg_input" style="width: 30px;" type="text">%\n                            </label>\n                        </div>\n                        <div data-toggle="CHECK_HOUR_ROOM_INTERVAL">\n                            <label style="cursor: pointer; margin: 5px auto; color: darkgreen">\n                                \u68C0\u67E5\u5C0F\u65F6\u699C\u95F4\u9694\u65F6\u95F4<input class="num igiftMsg_input" style="width: 25px;" type="text">\u79D2\n                            </label>\n                        </div>\n                        <div data-toggle="FORCE_LOTTERY" style="line-height: 20px">\n                        <label style="margin: 5px auto; color: red;">\n                            <input style="vertical-align: text-top;" type="checkbox">\u8BBF\u95EE\u88AB\u62D2\u7EDD\u540E\u5F3A\u5236\u91CD\u590D\u62BD\u5956(\u6700\u591A5\u6B21)\n                        </label>\n                    </div>\n                    </fieldset>\n            \n                    <fieldset class="igiftMsg_fs">\n                        <legend style="color: black">\u6BCF\u65E5\u4EFB\u52A1\u8BBE\u7F6E</legend>\n                        <div data-toggle="LOGIN" style=" color: black">\n                            <input style="vertical-align: text-top;" type="checkbox">\n                            \u767B\u9646\n                        </div>\n                        <div data-toggle="WATCH" style=" color: black">\n                            <input style="vertical-align: text-top;" type="checkbox">\n                            \u89C2\u770B\u89C6\u9891\n                        </div>\n                        <div data-toggle="COIN" style=" color: black">\n                            <label style="cursor: pointer">\n                                <input style="cursor: pointer; vertical-align: text-top;" type="checkbox">\n                                \u81EA\u52A8\u6295\u5E01<input class="coin_number igiftMsg_input" style="width: 40px;" type="text">\u4E2A(0-5)\n                            </label>\n                        </div>\n                        <div data-toggle="COIN_TYPE" style=" color: black">\n                            <div data-toggle="COIN_UID">\n                            <input style="vertical-align: text-top;" type="radio" name="COIN_TYPE">\n                            \u7ED9\u7528\u6237(UID:<input class="num igiftMsg_input" style="width: 80px;" type="text">)\n                            \u7684\u89C6\u9891\u6295\u5E01\n                            </div>\n                            <div data-toggle="COIN_DYN">\n                                <input style="vertical-align: text-top;" type="radio" name="COIN_TYPE">\n                                \u7ED9\u52A8\u6001\u4E2D\u7684\u7684\u89C6\u9891\u6295\u5E01\n                            </div>\n                        </div>\n                        <div data-toggle="SHARE" style=" color: black">\n                            <input style="vertical-align: text-top;" type="checkbox">\n                            \u5206\u4EAB\u89C6\u9891\n                        </div>\n                        <div data-toggle="SILVER2COIN" style=" color: black">\n                            <input style="vertical-align: text-top;" type="checkbox">\n                            \u94F6\u74DC\u5B50\u6362\u786C\u5E01\n                        </div>\n                        <div data-toggle="LIVE_SIGN" style=" color: black">\n                            <input style="vertical-align: text-top;" type="checkbox">\n                            \u76F4\u64AD\u533A\u7B7E\u5230\n                        </div>\n                        <div data-toggle="AUTO_GROUP_SIGN" style=" color: darkgreen">\n                            <input style="vertical-align: text-top;" type="checkbox">\n                            \u5E94\u63F4\u56E2\u7B7E\u5230\n                        </div>\n                        <div data-toggle="AUTO_TREASUREBOX" style=" color: purple">\n                            <input style="vertical-align: text-top;" type="checkbox">\n                            \u81EA\u52A8\u9886\u94F6\u74DC\u5B50\u5B9D\u7BB1\n                        </div>\n                        <div data-toggle="MOBILE_HEARTBEAT" style=" color: gray">\n                        <input style="vertical-align: text-top;" type="checkbox">\n                        \u6A21\u62DF\u79FB\u52A8\u7AEF\u5FC3\u8DF3\n                        </div>\n                    </fieldset>\n                    <fieldset class="igiftMsg_fs">\n                        <legend style="color: black">\u81EA\u52A8\u9001\u793C\u8BBE\u7F6E</legend>\n                        <div data-toggle="AUTO_GIFT" style=" color: purple">\n                            <input style="vertical-align: text-top;" type="checkbox">\n                            \u81EA\u52A8\u9001\u793C\n                        </div>\n            \n                        <div data-toggle="AUTO_GIFT_ROOMID" style=" color: purple">\n                            \u4F18\u5148\u9001\u793C\u623F\u95F4\n                            <input class="num igiftMsg_input" style="width: 150px;" type="text">\n                        </div>\n            \n                        <div data-toggle="EXCLUDE_ROOMID" style=" color: purple">\n                            \u4E0D\u9001\u793C\u623F\u95F4\n                            <input class="num igiftMsg_input" style="width: 150px;" type="text">\n                        </div>\n                        <div data-toggle="GIFT_INTERVAL" style=" color: black">\n                            <input style="vertical-align: text-top;" type="radio" name="GIFT_TYPE">\n                            \u95F4\u9694\n                            <input class="num igiftMsg_input" style="width: 30px;" type="text">\n                            \u5206\u949F\u9001\u793C\n                        </div>\n                        <div data-toggle="GIFT_SEND_TIME" style=" color: purple">\n                            <input style="vertical-align: text-top;" type="radio" name="GIFT_TYPE">\n                            \u5B9A\u65F6\u9001\u793C<br>\n                            \u9001\u793C\u65F6\u95F4\n                            <input class="Hour igiftMsg_input" style="width: 20px;" type="text">\u70B9\n                            <input class="Minute igiftMsg_input" style="width: 20px;" type="text">\u5206\n                            <button style="font-size: small" class="igiftMsg_btn" data-action="sendGiftNow">\u7ACB\u523B\u5F00\u59CB\u9001\u793C</button>\n                        </div>\n                        \n                        <div data-toggle="GIFT_LIMIT" style=" color: purple">\n                            \u793C\u7269\u5230\u671F\u65F6\u95F4\n                            <input class="num igiftMsg_input" style="width: 20px;" type="text">\n                            \u5929\n                        </div>\n                        <div data-toggle="GIFT_SORT" style=" color: purple">\n                            <input style="vertical-align: text-top;" type="checkbox">\n                            \u9001\u793C\u4F18\u5148\u9AD8\u7B49\u7EA7\u7C89\u4E1D\u724C\n                        </div>\n                        <div data-toggle="SEND_ALL_GIFT" style=" color: purple">\n                            <input style="vertical-align: text-top;" type="checkbox">\n                            \u9001\u6EE1\u5168\u90E8\u52CB\u7AE0\n                        </div>\n                        <div data-toggle="SPARE_GIFT_ROOM" style=" color: black">\n                            \u5269\u4F59\u793C\u7269\u9001\u793C\u76F4\u64AD\u95F4\uFF1A\n                            <input class="num igiftMsg_input" type="text" style="width: 100px;">\n                        </div>\n                        <div data-toggle="SPARE_GIFT_UID" style=" color: black">\n                            \u5269\u4F59\u793C\u7269\u9001\u793C\u76F4\u64AD\u95F4\u62E5\u6709\u8005UID\uFF1A\n                            <input class="num igiftMsg_input" type="text" style="width: 100px;">\n                        </div>\n                    </fieldset>\n                    <fieldset class="igiftMsg_fs">\n                        <legend style="color: black">\u8282\u594F\u98CE\u66B4\u8BBE\u7F6E</legend>\n                        <div data-toggle="STORM" style="line-height: 15px">\n                            <label style="margin: 5px auto; color: #ff5200">\n                                <input style="vertical-align: text-top;" type="checkbox">\u53C2\u4E0E\u8282\u594F\u98CE\u66B4\n                            </label>\n                        </div>\n                        <div data-toggle="STORM_QUEUE_SIZE" style="color: black">\n                            \u5141\u8BB8\u540C\u65F6\u53C2\u4E0E\u7684\u8282\u594F\u98CE\u66B4\u6B21\u6570\uFF1A\n                            <input class="num igiftMsg_input" type="text" style="width: 30px;">\n                        </div>\n                        <div data-toggle="STORM_MAX_COUNT" style="color: black">\n                            \u5355\u4E2A\u98CE\u66B4\u6700\u5927\u5C1D\u8BD5\u6B21\u6570\uFF1A\n                            <input class="num igiftMsg_input" type="text" style="width: 30px;">\n                        </div>\n                        <div data-toggle="STORM_ONE_LIMIT" style="color: black">\n                            \u5355\u4E2A\u98CE\u66B4\u53C2\u4E0E\u6B21\u6570\u95F4\u9694\uFF1A\n                            <input class="num igiftMsg_input" type="text" style="width: 30px;">\n                            \u6BEB\u79D2\n                        </div>\n                    </fieldset>\n                </div>\n            \n            \n            \n                <div id="right_fieldset" style="float:left;">\n                    <fieldset class="igiftMsg_fs">\n                        <legend style="color: black">\u8D2D\u4E70\u7C89\u4E1D\u52CB\u7AE0</legend>\n                        <div data-toggle="BUY_MEDAL" style="color: black; line-height: 15px">\n                        \u8F93\u5165\u7C89\u4E1D\u52CB\u7AE0\u5BF9\u5E94\u623F\u95F4\u53F7\uFF1A<input class="num igiftMsg_input" type="text" value = '+P.room_id+' onclick="select();" style="width: 70px">\n                        <button  class="igiftMsg_btn" data-action="buy_medal">\u70B9\u51FB\u8D2D\u4E70\u52CB\u7AE0</button>\n                        \uFF08\u82B1\u8D3920\u786C\u5E01\uFF09\n                    </div>\n                    </fieldset>\n                    <fieldset class="igiftMsg_fs">\n                        <legend style="color: black">\u5C0F\u5FC3\u5FC3</legend>\n                        <div data-toggle="LITTLE_HEART" style="line-height: 15px">\n                            <label style="margin: 5px auto; color: black">\n                                <input style="vertical-align: text-top;" type="checkbox"> \u81EA\u52A8\u83B7\u53D6\u5C0F\u5FC3\u5FC3\n                            </label>\n                        </div>\n                        <div data-toggle="MAX_TAB" style="line-height: 15px">\n                        <label style="margin: 5px auto; color: black">\n                            \u6253\u5F00\u7A97\u53E3\u6570\u91CF\u4E0A\u9650\n                            <input class="num igiftMsg_input" type="text" style="width: 30px;">\n                        </label>\n                    </div>\n                        <div data-toggle="LIGHT_MEDALS" style=" color: purple">\n                            \u81EA\u52A8\u70B9\u4EAE\u52CB\u7AE0\u623F\u95F4\u53F7\n                        <input class="num igiftMsg_input" style="width: 300px;" type="text">\n                    </div>\n                    <div data-toggle="LIGHT_METHOD" style="line-height: 15px; color: black; display:inline">\n                        \u52CB\u7AE0\u70B9\u4EAE\u6A21\u5F0F\uFF1A&nbsp;&nbsp;\n                        <div data-toggle="LIGHT_WHITE" style="color: black; display:inline">\n                            <input style="vertical-align: text-top;" type="radio" name="LIGHT_TYPE">\n                            \u767D\u540D\u5355\n                        </div>\n                        <div data-toggle="LIGHT_BLACK" style="color: black; display:inline">\n                            &nbsp;\n                            <input style="vertical-align: text-top;" type="radio" name="LIGHT_TYPE">\n                            \u9ED1\u540D\u5355\n                        </div>\n                    </div>\n                    <div data-toggle="FORCE_LIGHT" style="line-height: 15px">\n                    <label style="margin: 5px auto; color: black">\n                        <input style="vertical-align: text-top;" type="checkbox"> \u70B9\u4EAE\u52CB\u7AE0\u65F6\u5FFD\u7565\u4EB2\u5BC6\u5EA6\u4E0A\u9650\n                    </label>\n                    </div>\n                    </fieldset>\n                    <fieldset class="igiftMsg_fs">\n                        <legend style="color: black">\u5185\u5BB9\u5C4F\u853D</legend>\n                        <div data-toggle="REMOVE_ELEMENT_2233" style="line-height: 15px">\n                            <label style="margin: 5px auto; color: black">\n                                <input style="vertical-align: text-top;" type="checkbox"> \u79FB\u96642233\u6A21\u578B\n                            </label>\n                        </div>\n                        <div data-toggle="REMOVE_ELEMENT_activity" style="line-height: 15px">\n                            <label style="margin: 5px auto; color: black">\n                                <input style="vertical-align: text-top;" type="checkbox"> \u79FB\u9664\u6D3B\u52A8\u5165\u53E3\n                            </label>\n                        </div>\n                        <div data-toggle="BLOCK_LIVE_VIDEO" style="line-height: 15px">\n                        <label style="margin: 5px auto; color: black">\n                            <input style="vertical-align: text-top;" type="checkbox"> \u62E6\u622A\u6302\u5C0F\u5FC3\u5FC3\u6253\u5F00\u7A97\u53E3\u7684\u76F4\u64AD\u6D41\n                        </label>\n                    </div>\n                    </fieldset>\n                    <fieldset class="igiftMsg_fs" style="line-height: 15px">\n                        <legend style="color: black">\u5176\u4ED6\u8BBE\u7F6E</legend>\n                        <div data-toggle="TIME_RELOAD" style="color: black">\n                            \u672C\u76F4\u64AD\u95F4\u5237\u65B0\u65F6\u95F4\uFF1A\n                            <input class="delay-seconds igiftMsg_input" type="text" style="width: 30px;">\u5206\n                        </div>\n                        <div data-toggle="IN_TIME_RELOAD_DISABLE" style="line-height: 15px">\n                            <label style="margin: 5px auto; color: darkgreen">\n                                <input style="vertical-align: text-top;" type="checkbox">\u4E0D\u62BD\u5956\u65F6\u6BB5\u4E0D\u91CD\u8F7D\u76F4\u64AD\u95F4\n                            </label>\n                        </div>\n                        <div id="resetArea">\n                            <button data-action="reset" style="color: red;" class="igiftMsg_btn">\u91CD\u7F6E\u6240\u6709\u4E3A\u9ED8\u8BA4</button>\n                            <button data-action="redo_dailyTasks" style="color: red;" class="igiftMsg_btn">\u518D\u6B21\u6267\u884C\u6240\u6709\u4EFB\u52A1</button>\n                            <button style="font-size: small" class="igiftMsg_btn" data-action="countReset">\u91CD\u7F6E\u7EDF\u8BA1</button>\n                        </div>\n            \n                    </fieldset>\n                    <label style="color: darkblue; font-size:large;">\n                        v'+GM_info.script.version+' <a href="https://github.com/andywang425/BLTH"\n                            target="_blank">\u66F4\u591A\u8BF4\u660E\u548C\u66F4\u65B0\u65E5\u5FD7\u89C1github\u4E0A\u7684\u9879\u76EE\u8BF4\u660E(\u70B9\u6211)</a>\n                    </label>\n                </div>\n            </div>\n    '),'show'==L?$('.live-player-mounter').append(he):$('.live-player-mounter').append(he.hide()),he.find('div[data-toggle="MAX_TAB"] .num').val(parseInt(ce.CONFIG.MAX_TAB).toString()),he.find('div[data-toggle="GIFT_INTERVAL"] .num').val(parseInt(ce.CONFIG.GIFT_INTERVAL).toString()),he.find('div[data-toggle="LIGHT_MEDALS"] .num').val(ce.CONFIG.LIGHT_MEDALS.toString()),he.find('div[data-toggle="STORM_MAX_COUNT"] .num').val(parseInt(ce.CONFIG.STORM_MAX_COUNT).toString()),he.find('div[data-toggle="STORM_ONE_LIMIT"] .num').val(parseInt(ce.CONFIG.STORM_ONE_LIMIT).toString()),he.find('div[data-toggle="STORM_QUEUE_SIZE"] .num').val(parseInt(ce.CONFIG.STORM_QUEUE_SIZE).toString()),he.find('div[data-toggle="SPARE_GIFT_UID"] .num').val(ce.CONFIG.SPARE_GIFT_UID.toString()),he.find('div[data-toggle="SPARE_GIFT_ROOM"] .num').val(ce.CONFIG.SPARE_GIFT_ROOM.toString()),he.find('div[data-toggle="TIME_RELOAD"] .delay-seconds').val(parseInt(ce.CONFIG.TIME_RELOAD).toString()),he.find('div[data-toggle="RANDOM_SKIP"] .per').val(parseFloat(ce.CONFIG.RANDOM_SKIP).toString()),he.find('div[data-toggle="RANDOM_SEND_DANMU"] .per').val(parseFloat(ce.CONFIG.RANDOM_SEND_DANMU).toString()),he.find('div[data-toggle="MAX_GIFT"] .num').val(parseInt(ce.CONFIG.MAX_GIFT).toString()),he.find('div[data-toggle="COIN"] .coin_number').val(parseInt(ce.CONFIG.COIN_NUMBER).toString()),he.find('div[data-toggle="COIN_UID"] .num').val(parseInt(ce.CONFIG.COIN_UID).toString()),he.find('div[data-toggle="RANDOM_DELAY"] .RND_DELAY_START').val(parseFloat(ce.CONFIG.RND_DELAY_START).toString()),he.find('div[data-toggle="RANDOM_DELAY"] .RND_DELAY_END').val(parseFloat(ce.CONFIG.RND_DELAY_END).toString()),he.find('div[data-toggle="TIME_AREA_DISABLE"] .startHour').val(parseInt(ce.CONFIG.TIME_AREA_START_H0UR).toString()),he.find('div[data-toggle="TIME_AREA_DISABLE"] .endHour').val(parseInt(ce.CONFIG.TIME_AREA_END_H0UR).toString()),he.find('div[data-toggle="TIME_AREA_DISABLE"] .startMinute').val(parseInt(ce.CONFIG.TIME_AREA_START_MINUTE).toString()),he.find('div[data-toggle="TIME_AREA_DISABLE"] .endMinute').val(parseInt(ce.CONFIG.TIME_AREA_END_MINUTE).toString()),he.find('div[data-toggle="CHECK_HOUR_ROOM_INTERVAL"] .num').val(parseInt(ce.CONFIG.CHECK_HOUR_ROOM_INTERVAL).toString()),he.find('div[data-toggle="AUTO_GIFT_ROOMID"] .num').val(ce.CONFIG.AUTO_GIFT_ROOMID.toString()),he.find('div[data-toggle="EXCLUDE_ROOMID"] .num').val(ce.CONFIG.EXCLUDE_ROOMID.toString()),he.find('div[data-toggle="GIFT_SEND_TIME"] .Hour').val(ce.CONFIG.GIFT_SEND_HOUR.toString()),he.find('div[data-toggle="GIFT_SEND_TIME"] .Minute').val(ce.CONFIG.GIFT_SEND_MINUTE.toString()),he.find('div[data-toggle="GIFT_LIMIT"] .num').val(parseInt(ce.CONFIG.GIFT_LIMIT).toString());he.find('div[id="giftCount"] [data-action="save"]').click(function(){ue()}),he.find('div[data-toggle="BUY_MEDAL"] [data-action="buy_medal"]').click(function(){var be=parseInt(he.find('div[data-toggle="BUY_MEDAL"] .num').val());Ie(be)}),he.find('button[data-action="reset"]').click(function(){ce.setDefaults()}),he.find('button[data-action="checkUpdate"]').click(function(){ce.checkUpdate()}),he.find('button[data-action="redo_dailyTasks"]').click(function(){ce.ReDoDailyTasks()}),he.find('#resetArea [data-action="countReset"]').click(function(){ce.GIFT_COUNT={COUNT:0,SILVER_COUNT:0,CLEAR_TS:0},ce.saveGiftCount(),$('#giftCount span:eq(0)').text(ce.GIFT_COUNT.COUNT),$('#giftCount span:eq(1)').text(ce.GIFT_COUNT.SILVER_COUNT),ce.chatLog('\u5DF2\u91CD\u7F6E\u7EDF\u8BA1\u6570\u636E')}),he.find('button[data-action="sendGiftNow"]').click(function(){U=!0,ce.Gift.run()});var Ge=['RANDOM_DELAY','TIME_AREA_DISABLE','AUTO_GROUP_SIGN','FORCE_LOTTERY','LOGIN','WATCH','COIN','SHARE','SILVER2COIN','LIVE_SIGN','IN_TIME_RELOAD_DISABLE','AUTO_TREASUREBOX','IN_TIME_RELOAD_DISABLE','AUTO_GIFT','GIFT_SORT','SEND_ALL_GIFT','MOBILE_HEARTBEAT','STORM','LITTLE_HEART','REMOVE_ELEMENT_2233','REMOVE_ELEMENT_activity','BLOCK_LIVE_VIDEO','FORCE_LIGHT'],Re=!0,Ae=!1,Ne=void 0;try{for(var Me,ye=function _loop(){var be=Me.value,Le=he.find('div[data-toggle="'+be+'"] input:checkbox');ce.CONFIG[be]&&Le.attr('checked',''),Le.change(function(){ce.CONFIG[be]=$(this).prop('checked'),ce.saveConfig(),ce.CONFIG.BLOCK_LIVE_VIDEO?localStorage.setItem(N+'_block_live','block'):localStorage.setItem(N+'_block_live','pass')})},De=Ge[Symbol.iterator]();!(Re=(Me=De.next()).done);Re=!0)ye()}catch(be){Ae=!0,Ne=be}finally{try{!Re&&De.return&&De.return()}finally{if(Ae)throw Ne}}$('input:text').bind('keydown',function(be){'13'==be.keyCode&&ue()}),'COIN_DYN'==ce.CONFIG.COIN_TYPE?$('div[data-toggle=\'COIN_DYN\'] input:radio').attr('checked',''):$('div[data-toggle=\'COIN_UID\'] input:radio').attr('checked','');'LIGHT_WHITE'==ce.CONFIG.LIGHT_METHOD?$('div[data-toggle=\'LIGHT_WHITE\'] input:radio').attr('checked',''):$('div[data-toggle=\'LIGHT_BLACK\'] input:radio').attr('checked','');'GIFT_INTERVAL'==ce.CONFIG.GIFT_METHOD?$('div[data-toggle=\'GIFT_INTERVAL\'] input:radio').attr('checked',''):$('div[data-toggle=\'GIFT_SEND_TIME\'] input:radio').attr('checked','');$('input:radio[name=\'COIN_TYPE\']').change(function(){var be=$('div[data-toggle=\'COIN_DYN\'] input:radio').is(':checked');ce.CONFIG.COIN_TYPE=!0==be?'COIN_DYN':'COIN_UID',ce.saveConfig()}),$('input:radio[name=\'LIGHT_TYPE\']').change(function(){var be=$('div[data-toggle=\'LIGHT_WHITE\'] input:radio').is(':checked');ce.CONFIG.LIGHT_METHOD=!0==be?'LIGHT_WHITE':'LIGHT_BLACK',ce.saveConfig()}),$('input:radio[name=\'GIFT_TYPE\']').change(function(){var be=$('div[data-toggle=\'GIFT_INTERVAL\'] input:radio').is(':checked');ce.CONFIG.GIFT_METHOD=!0==be?'GIFT_INTERVAL':'GIFT_SEND_TIME',ce.saveConfig()})},chatLog:function chatLog(ue){var Ie=1<arguments.length&&arguments[1]!==void 0?arguments[1]:'info',pe=$('<div class=\'igiftMsg\'>'),Te=$('<div>'),fe=$('#chat-history-list'),Ee=new Date;Te.text(ue),pe.text(Ee.toLocaleString()),pe.append(Te),pe.css({"text-align":'center',"border-radius":'4px',"min-height":'30px',width:'256px',color:'#9585FF',"line-height":'30px',padding:'0 10px',margin:'10px auto'}),Te.css({"word-wrap":'break-word',width:'100%',"line-height":'1em',"margin-bottom":'10px'});'warning'===Ie?pe.css({border:'1px solid rgb(236, 221, 192)',color:'rgb(218, 142, 36)',background:'rgb(245, 235, 221) none repeat scroll 0% 0%'}):'success'===Ie?pe.css({border:'1px solid rgba(22, 140, 0, 0.28)',color:'rgb(69, 171, 69)',background:'none 0% 0% repeat scroll rgba(16, 255, 0, 0.18)'}):'error'===Ie?pe.css({border:'1px solid rgb(255, 46, 0)',color:'white',background:'none 0% 0% repeat scroll #ff4c4c'}):pe.css({border:'1px solid rgb(203, 195, 255)',background:'rgb(233, 230, 255) none repeat scroll 0% 0%'});'show'==L?fe.find('#chat-items').append(pe):fe.find('#chat-items').append(pe.hide()),fe.scrollTop(fe.prop('scrollHeight'))},blocked:!1,max_blocked:!1,listen:function listen(ue,Ie){var pe=2<arguments.length&&arguments[2]!==void 0?arguments[2]:'\u672C\u76F4\u64AD\u95F4';S.room.getConf(ue).then(function(Te){z('\u83B7\u53D6\u5F39\u5E55\u670D\u52A1\u5668\u4FE1\u606F '+pe,Te);var fe=new S.DanmuWebSocket(Ie,ue,Te.data.host_server_list,Te.data.token);fe.bind(function(Ee){fe=Ee,ce.chatLog(pe+'\u5F39\u5E55\u670D\u52A1\u5668\u8FDE\u63A5\u65AD\u5F00\uFF0C\u5C1D\u8BD5\u91CD\u8FDE','warning')},function(){ce.chatLog('\u2014\u2014\u2014\u2014\u2014\u2014\u8FDE\u63A5\u5F39\u5E55\u670D\u52A1\u5668\u6210\u529F\u2014\u2014\u2014\u2014\u2014\u2014\n\u623F\u95F4\u53F7: '+ue+' \u5206\u533A: '+pe,'success')},function(){(ce.blocked||ce.stormBlack)&&(fe.close(),ce.chatLog('\u8FDB\u4E86\u5C0F\u9ED1\u5C4B\u4E3B\u52A8\u4E0E\u5F39\u5E55\u670D\u52A1\u5668\u65AD\u5F00\u8FDE\u63A5-'+pe,'warning')),ce.max_blocked&&!ce.CONFIG.STORM&&(fe.close(),ce.chatLog('\u8FA3\u6761\u6700\u5927\u503C\u4E3B\u52A8\u4E0E\u5F39\u5E55\u670D\u52A1\u5668\u65AD\u5F00\u8FDE\u63A5-'+pe,'warning'))},function(Ee){if(!(O(ce.CONFIG.TIME_AREA_START_H0UR,ce.CONFIG.TIME_AREA_END_H0UR,ce.CONFIG.TIME_AREA_START_MINUTE,ce.CONFIG.TIME_AREA_END_MINUTE)&&ce.CONFIG.TIME_AREA_DISABLE))switch(z('\u5F39\u5E55\u516C\u544A'+pe,Ee),Ee.cmd){case'GUARD_MSG':Ee.roomid===Ee.real_roomid?ce.checkRoom(Ee.roomid,pe):(ce.checkRoom(Ee.roomid,pe),ce.checkRoom(Ee.real_roomid,pe));break;case'PK_BATTLE_SETTLE_USER':Ee.data.winner?ce.checkRoom(Ee.data.winner.room_id,pe):ce.checkRoom(Ee.data.my_info.room_id,pe),ce.checkRoom(Ee.data.winner.room_id,pe);break;case'NOTICE_MSG':switch(Ee.msg_type){case 1:break;case 2:case 3:case 4:case 8:Ee.roomid===Ee.real_roomid?ce.checkRoom(Ee.roomid,pe):(ce.checkRoom(Ee.roomid,pe),ce.checkRoom(Ee.real_roomid,pe));break;case 5:break;case 6:window.toast('\u76D1\u63A7\u5230\u623F\u95F4 '+Ee.roomid+' \u7684\u8282\u594F\u98CE\u66B4','info'),ce.Storm.run(Ee.roomid);}break;case'SPECIAL_GIFT':if(Ee.data[39])switch(Ee.data[39].action){case'start':window.toast('\u76D1\u63A7\u5230\u623F\u95F4 '+Ee.roomid+' \u7684\u8282\u594F\u98CE\u66B4','info'),ce.Storm.run(Ee.roomid);case'end':};break;default:}})},function(){ce.chatLog('\u83B7\u53D6\u5F39\u5E55\u670D\u52A1\u5668\u5730\u5740\u9519\u8BEF','error')})},EntryRoom_list_history:{add:function add(ue){var Ie=[];try{var pe=JSON.parse(localStorage.getItem(N+'_EntryRoom_list'));Ie=[].concat(pe.list),Ie.push(ue),100<Ie.length&&Ie.splice(0,50),localStorage.setItem(N+'_EntryRoom_list',JSON.stringify({list:Ie})),z(N+'_EntryRoom_list_add',Ie)}catch(pe){Ie.push(ue),localStorage.setItem(N+'_EntryRoom_list',JSON.stringify({list:Ie}))}},isIn:function isIn(ue){var Ie=[];try{var pe=JSON.parse(localStorage.getItem(N+'_EntryRoom_list'));return Ie=null===pe?[]:[].concat(pe.list),z(N+'_EntryRoom_list_read',pe),-1<Ie.indexOf(ue)}catch(pe){return localStorage.setItem(N+'_EntryRoom_list',JSON.stringify({list:Ie})),z('\u8BFB\u53D6'+(N+'_EntryRoom_list\u7F13\u5B58\u9519\u8BEF\u5DF2\u91CD\u7F6E')),-1<Ie.indexOf(ue)}}},RoomId_list:[],err_roomId:[],auto_danmu_list:['(=\u30FB\u03C9\u30FB=)','\uFF08\uFFE3\u25BD\uFFE3\uFF09','nice','666','kksk','(\u2312\u25BD\u2312)','(\uFF40\u30FB\u03C9\u30FB\xB4)','\u256E(\uFFE3\u25BD\uFFE3)\u256D','(\uFFE33\uFFE3)','\u03A3( \uFFE3\u25A1\uFFE3||)','(^\u30FB\u03C9\u30FB^ )','_(:3\u300D\u2220)_'],checkRoom:function checkRoom(ue){var Ie=1<arguments.length&&arguments[1]!==void 0?arguments[1]:'\u672C\u76F4\u64AD\u95F4';ce.blocked||ce.max_blocked||0<=ce.RoomId_list.indexOf(ue)||(ce.RoomId_list.push(ue),ce.EntryRoom_list_history.isIn(ue)||(S.room.room_entry_action(ue),ce.EntryRoom_list_history.add(ue)),G(ce.CONFIG.RANDOM_SEND_DANMU)&&S.sendLiveDanmu(ce.auto_danmu_list[_Mathfloor(12*Math.random())],ue).then(function(pe){z('\u5F39\u5E55\u53D1\u9001\u8FD4\u56DE\u4FE1\u606F',pe)}),S.xlive.lottery.check(ue).then(function(pe){ce.RoomId_list.remove(ue),z('\u68C0\u67E5\u623F\u95F4\u8FD4\u56DE\u4FE1\u606F',pe);var Te=pe.data;if(0===pe.code){var fe;if(Te.gift)for(var Ee in fe=Te.gift,fe)fe.hasOwnProperty(Ee)&&ce.creat_join(ue,fe[Ee],'gift',Ie);if(Te.guard)for(var Ee in fe=Te.guard,fe)fe.hasOwnProperty(Ee)&&ce.creat_join(ue,fe[Ee],'guard',Ie);if(Te.pk)for(var Ee in fe=Te.pk,fe)fe.hasOwnProperty(Ee)&&ce.creat_join(ue,fe[Ee],'pk',Ie)}else ce.chatLog('[\u68C0\u67E5\u623F\u95F4\u51FA\u9519]'+response.msg,'error'),-1<ce.err_roomId.indexOf(ue)?z('[\u68C0\u67E5\u6B64\u623F\u95F4\u51FA\u9519\u591A\u6B21]'+ue+pe.message):(ce.err_roomId.push(ue),ce.checkRoom(ue,Ie),z('[\u68C0\u67E5\u623F\u95F4\u51FA\u9519_\u91CD\u8BD5\u4E00\u6B21]'+ue+pe.message))}))},Id_list_history:{add:function add(ue,Ie){var pe=[];try{var Te=JSON.parse(localStorage.getItem(N+'_'+Ie+'Id_list'));pe=[].concat(Te.list),pe.push(ue),200<pe.length&&pe.splice(0,50),localStorage.setItem(N+'_'+Ie+'Id_list',JSON.stringify({list:pe})),z(N+'_'+Ie+'Id_list_add',pe)}catch(Te){pe.push(ue),localStorage.setItem(N+'_'+Ie+'Id_list',JSON.stringify({list:pe}))}},isIn:function isIn(ue,Ie){var pe=[];try{var Te=JSON.parse(localStorage.getItem(N+'_'+Ie+'Id_list'));return pe=null===Te?[]:[].concat(Te.list),z(N+'_'+Ie+'Id_list_read',Te),-1<pe.indexOf(ue)}catch(Te){return localStorage.setItem(N+'_'+Ie+'Id_list',JSON.stringify({list:pe})),z('\u8BFB\u53D6'+(N+'_'+Ie+'Id_list\u7F13\u5B58\u9519\u8BEF\u5DF2\u91CD\u7F6E')),-1<pe.indexOf(ue)}}},raffleId_list:[],guardId_list:[],pkId_list:[],creat_join:function creat_join(ue,Ie,pe){var Te=3<arguments.length&&void 0!==arguments[3]?arguments[3]:'\u672C\u76F4\u64AD\u95F4';if(z('\u793C\u7269\u4FE1\u606F',Ie),ce.GIFT_COUNT.COUNT>=ce.CONFIG.MAX_GIFT)return z('\u8D85\u8FC7\u4ECA\u65E5\u8FA3\u6761\u9650\u5236\uFF0C\u4E0D\u53C2\u4E0E\u62BD\u5956'),void(ce.max_blocked=!0);switch(pe){case'gift':if(ce.Id_list_history.isIn(Ie.raffleId,'raffle'))return void z('\u793C\u7269\u91CD\u590D','raffleId '+Ie.raffleId);ce.raffleId_list.push(Ie.raffleId),ce.Id_list_history.add(Ie.raffleId,'raffle');break;case'guard':if(ce.Id_list_history.isIn(Ie.id,'guard'))return void z('\u8230\u957F\u91CD\u590D','id '+Ie.id);ce.guardId_list.push(Ie.id),ce.Id_list_history.add(Ie.id,'guard');break;case'pk':if(ce.Id_list_history.isIn(Ie.id,'pk'))return void z('pk\u91CD\u590D','id '+Ie.id);ce.pkId_list.push(Ie.id),ce.Id_list_history.add(Ie.id,'pk');}var fe=Ie.time_wait||0;ce.CONFIG.RANDOM_DELAY&&(fe+=_Mathfloor(Math.random()*(ce.CONFIG.RND_DELAY_END-ce.CONFIG.RND_DELAY_START+1))+ce.CONFIG.RND_DELAY_START);var Ee=$('<div class=\'igiftMsg\'>'),me=$('<div>'),Oe=$('<div>'),ve=$('#chat-history-list'),xe=new Date;me.text('['+Te+']'+Ie.thank_text.split('<%')[1].split('%>')[0]+Ie.thank_text.split('%>')[1]),Ee.text(xe.toLocaleString()),Ee.append(me),Oe.css('color','red'),Oe.text('\u7B49\u5F85\u62BD\u5956'),me.append(Oe),Ee.css({"text-align":'center',"border-radius":'4px',"min-height":'30px',width:'256px',color:'#9585FF',"line-height":'30px',padding:'0 10px',margin:'10px auto'}),me.css({"word-wrap":'break-word',width:'100%',"line-height":'1em',"margin-bottom":'10px'}),Ee.css({border:'1px solid rgb(203, 195, 255)',background:'rgb(233, 230, 255) none repeat scroll 0% 0%'}),'show'==L?ve.find('#chat-items').append(Ee):ve.find('#chat-items').append(Ee.hide()),ve.scrollTop(ve.prop('scrollHeight'));var he=setInterval(function(){Oe.text('\u7B49\u5F85\u62BD\u5956\u5012\u8BA1\u65F6'+fe+'\u79D2'),0>=fe&&(G(ce.CONFIG.RANDOM_SKIP)?Oe.text('\u8DF3\u8FC7\u6B64\u793C\u7269\u62BD\u5956'):(Oe.text('\u8FDB\u884C\u62BD\u5956...'),'gift'===pe?ce.gift_join(ue,Ie.raffleId,Ie.type).then(function(Ce,Ge){Oe.text(Ce),Ge&&(-1<Ce.indexOf('\u8FA3\u6761')?ce.addGift(Ge):-1<Ce.indexOf('\u94F6\u74DC\u5B50')&&ce.addSilver(Ge)),ce.raffleId_list.remove(Ie.raffleId)}):'guard'===pe?ce.guard_join(ue,Ie.id).then(function(Ce,Ge){Oe.text(Ce),Ge&&(-1<Ce.indexOf('\u8FA3\u6761')?ce.addGift(Ge):-1<Ce.indexOf('\u94F6\u74DC\u5B50')&&ce.addSilver(Ge)),ce.guardId_list.remove(Ie.id)}):'pk'===pe?ce.pk_join(ue,Ie.id).then(function(Ce,Ge){Oe.text(Ce),Ge&&(-1<Ce.indexOf('\u8FA3\u6761')?ce.addGift(Ge):-1<Ce.indexOf('\u94F6\u74DC\u5B50')&&ce.addSilver(Ge)),ce.pkId_list.remove(Ie.id)}):void 0),Oe.css('color','green'),clearInterval(he)),fe--},1e3)},gift_join:function gift_join(ue,Ie,pe){var Te=$.Deferred();return S.Lottery.Gift.join(ue,Ie,pe).then(function(fe){switch(z('\u62BD\u5956\u8FD4\u56DE\u4FE1\u606F',fe),fe.code){case 0:fe.data.award_text?Te.resolve(fe.data.award_text,fe.data.award_num):Te.resolve(fe.data.award_name+'X'+fe.data.award_num.toString(),fe.data.award_num);break;default:-1<fe.msg.indexOf('\u62D2\u7EDD')?!1==ce.CONFIG.FORCE_LOTTERY?(ce.blocked=!0,Te.resolve('\u8BBF\u95EE\u88AB\u62D2\u7EDD\uFF0C\u60A8\u7684\u5E10\u53F7\u53EF\u80FD\u5DF2\u7ECF\u88AB\u5173\u5C0F\u9ED1\u5C4B\uFF0C\u5DF2\u505C\u6B62')):5>=++F?ce.gift_join(ue,Ie,pe):(F=0,Te.resolve('[\u793C\u7269\u62BD\u5956](roomid='+ue+',id='+Ie+',type='+pe+')'+fe.msg)):Te.resolve('[\u793C\u7269\u62BD\u5956](roomid='+ue+',id='+Ie+',type='+pe+')'+fe.msg);}}),Te},guard_join:function guard_join(ue,Ie){var pe=$.Deferred();return S.Lottery.Guard.join(ue,Ie).then(function(Te){switch(z('\u4E0A\u8239\u62BD\u5956\u8FD4\u56DE\u4FE1\u606F',Te),Te.code){case 0:Te.data.award_text?pe.resolve(Te.data.award_text,Te.data.award_num):pe.resolve(Te.data.award_name+'X'+Te.data.award_num.toString(),Te.data.award_num);break;default:-1<Te.msg.indexOf('\u62D2\u7EDD')?!1==ce.CONFIG.FORCE_LOTTERY?(ce.blocked=!0,pe.resolve('\u8BBF\u95EE\u88AB\u62D2\u7EDD\uFF0C\u60A8\u7684\u5E10\u53F7\u53EF\u80FD\u5DF2\u7ECF\u88AB\u5173\u5C0F\u9ED1\u5C4B\uFF0C\u5DF2\u505C\u6B62')):5>=++w?ce.guard_join(ue,id):(w=0,pe.resolve('[\u793C\u7269\u62BD\u5956](roomid='+ue+',id='+raffleId+',type='+type+')'+Te.msg)):pe.resolve('[\u4E0A\u8239](roomid='+ue+',id='+Ie+')'+Te.msg);}}),pe},pk_join:function pk_join(ue,Ie){var pe=$.Deferred();return S.Lottery.Pk.join(ue,Ie).then(function(Te){switch(z('PK\u62BD\u5956\u8FD4\u56DE\u4FE1\u606F',Te),Te.code){case 0:Te.data.award_text?pe.resolve(Te.data.award_text,Te.data.award_num):pe.resolve(Te.data.award_name+'X'+Te.data.award_num.toString(),Te.data.award_num);break;default:-1<Te.msg.indexOf('\u62D2\u7EDD')?!1==ce.CONFIG.FORCE_LOTTERY?(ce.blocked=!0,pe.resolve('\u8BBF\u95EE\u88AB\u62D2\u7EDD\uFF0C\u60A8\u7684\u5E10\u53F7\u53EF\u80FD\u5DF2\u7ECF\u88AB\u5173\u5C0F\u9ED1\u5C4B\uFF0C\u5DF2\u505C\u6B62')):5>=++k?ce.pk_join(ue,id):(k=0,pe.resolve('[\u793C\u7269\u62BD\u5956](roomid='+ue+',id='+raffleId+',type='+type+')'+Te.msg)):pe.resolve('[PK](roomid='+ue+',id='+Ie+')'+Te.msg);}}),pe},GroupSign:{getGroups:function getGroups(){return S.Group.my_groups().then(function(ue){return(z('GroupSign.getGroups: API.Group.my_groups',ue),0===ue.code)?$.Deferred().resolve(ue.data.list):(window.toast('[\u81EA\u52A8\u5E94\u63F4\u56E2\u7B7E\u5230]\''+ue.msg,'caution'),$.Deferred().reject())},function(){return window.toast('[\u81EA\u52A8\u5E94\u63F4\u56E2\u7B7E\u5230]\u83B7\u53D6\u5E94\u63F4\u56E2\u5217\u8868\u5931\u8D25\uFF0C\u8BF7\u68C0\u67E5\u7F51\u7EDC','error'),Q(function(){return ce.GroupSign.getGroups()})})},signInList:function signInList(ue){var Ie=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0;if(Ie>=ue.length)return $.Deferred().resolve();var pe=ue[Ie];return pe.owner_uid==P.uid?GroupSign.signInList(ue,Ie+1):S.Group.sign_in(pe.group_id,pe.owner_uid).then(function(Te){z('GroupSign.signInList: API.Group.sign_in',Te);var fe=$.Deferred();if(0===Te.code)0<Te.data.add_num?(window.toast('[\u81EA\u52A8\u5E94\u63F4\u56E2\u7B7E\u5230]\u5E94\u63F4\u56E2(group_id='+pe.group_id+',owner_uid='+pe.owner_uid+')\u7B7E\u5230\u6210\u529F\uFF0C\u5F53\u524D\u52CB\u7AE0\u4EB2\u5BC6\u5EA6+'+Te.data.add_num,'success'),fe.resolve()):0==Te.data.add_num?(window.toast('[\u81EA\u52A8\u5E94\u63F4\u56E2\u7B7E\u5230]\u5E94\u63F4\u56E2(group_id='+pe.group_id+',owner_uid='+pe.owner_uid+')\u5DF2\u7B7E\u5230','caution'),fe.resolve()):fe.reject();else return window.toast('[\u81EA\u52A8\u5E94\u63F4\u56E2\u7B7E\u5230]\''+Te.msg,'caution'),$.Deferred().reject();return $.when(ce.GroupSign.signInList(ue,Ie+1),fe)},function(){return window.toast('[\u81EA\u52A8\u5E94\u63F4\u56E2\u7B7E\u5230]\u5E94\u63F4\u56E2(group_id='+pe.group_id+',owner_uid='+pe.owner_uid+')\u7B7E\u5230\u5931\u8D25\uFF0C\u8BF7\u68C0\u67E5\u7F51\u7EDC','error'),Q(function(){return ce.GroupSign.signInList(ue,Ie)})})},run:function run(){try{return ce.CONFIG.AUTO_GROUP_SIGN?le(ce.CACHE.AUTO_GROUP_SIGH_TS)?8>new Date().getHours()&&0!=ce.CACHE.AUTO_GROUP_SIGH_TS?(setTimeout(ce.GroupSign.run,u(8,0)),$.Deferred().resolve()):ce.GroupSign.getGroups().then(function(ue){return ce.GroupSign.signInList(ue).then(function(){return ce.CACHE.AUTO_GROUP_SIGH_TS=V(),ce.saveCache(),ee(ce.GroupSign.run,8,0,'\u5E94\u63F4\u56E2\u7B7E\u5230'),$.Deferred().resolve()},function(){return Q(function(){return ce.GroupSign.run()})})},function(){return Q(function(){return ce.GroupSign.run()})}):(ee(ce.GroupSign.run,8,0,'\u5E94\u63F4\u56E2\u7B7E\u5230'),$.Deferred().resolve()):$.Deferred().resolve()}catch(ue){return window.toast('[\u81EA\u52A8\u5E94\u63F4\u56E2\u7B7E\u5230]\u8FD0\u884C\u65F6\u51FA\u73B0\u5F02\u5E38\uFF0C\u5DF2\u505C\u6B62','error'),console.error('['+N+']',ue),$.Deferred().reject()}}},DailyReward:{coin_exp:0,login:function login(){return S.DailyReward.login().then(function(){z('DailyReward.login: API.DailyReward.login'),window.toast('[\u81EA\u52A8\u6BCF\u65E5\u5956\u52B1][\u6BCF\u65E5\u767B\u5F55]\u5B8C\u6210','success')},function(){return window.toast('[\u81EA\u52A8\u6BCF\u65E5\u5956\u52B1][\u6BCF\u65E5\u767B\u5F55]\u5B8C\u6210\u5931\u8D25\uFF0C\u8BF7\u68C0\u67E5\u7F51\u7EDC','error'),Q(function(){return ce.DailyReward.login()})})},watch:function watch(ue,Ie){return ce.CONFIG.WATCH?S.DailyReward.watch(ue,Ie,P.uid,X()).then(function(pe){z('DailyReward.watch: API.DailyReward.watch',pe),0===pe.code?window.toast('[\u81EA\u52A8\u6BCF\u65E5\u5956\u52B1][\u6BCF\u65E5\u89C2\u770B]\u5B8C\u6210(av='+ue+')','success'):window.toast('[\u81EA\u52A8\u6BCF\u65E5\u5956\u52B1][\u6BCF\u65E5\u89C2\u770B]\''+pe.msg,'caution')},function(){return window.toast('[\u81EA\u52A8\u6BCF\u65E5\u5956\u52B1][\u6BCF\u65E5\u89C2\u770B]\u5B8C\u6210\u5931\u8D25\uFF0C\u8BF7\u68C0\u67E5\u7F51\u7EDC','error'),Q(function(){return ce.DailyReward.watch(ue,Ie)})}):$.Deferred().resolve()},coin:function coin(ue,Ie){var pe=2<arguments.length&&arguments[2]!==void 0?arguments[2]:0,Te=3<arguments.length&&arguments[3]!==void 0&&arguments[3];if(!ce.CONFIG.COIN)return $.Deferred().resolve();if(ce.DailyReward.coin_exp>=10*ce.CONFIG.COIN_NUMBER)return window.toast('[\u81EA\u52A8\u6BCF\u65E5\u5956\u52B1][\u6BCF\u65E5\u6295\u5E01]\u4ECA\u65E5\u6295\u5E01\u5DF2\u5B8C\u6210','info'),$.Deferred().resolve();if(pe>=ue.length)return window.toast('[\u81EA\u52A8\u6BCF\u65E5\u5956\u52B1][\u6BCF\u65E5\u6295\u5E01]\u52A8\u6001\u91CC\u53EF\u6295\u5E01\u7684\u89C6\u9891\u4E0D\u8DB3','caution'),$.Deferred().resolve();var fe=JSON.parse(ue[pe].card),Ee=_Mathmin(2,Ie);Te&&(Ee=1),S.x.getCoinInfo('','jsonp',fe.aid,V()).then(function(me){return 2===me.data.multiply?(z('API.x.getCoinInfo','\u5DF2\u6295\u5E01\u4E24\u4E2A aid = '+fe.aid),ce.DailyReward.coin(vlist,Ie,pe+1)):S.DailyReward.coin(fe.aid,Ee).then(function(Oe){return(z('DailyReward.coin: API.DailyReward.coin',Oe),0===Oe.code)?(ce.DailyReward.coin_exp+=10*Ee,window.toast('[\u81EA\u52A8\u6BCF\u65E5\u5956\u52B1][\u6BCF\u65E5\u6295\u5E01]\u6295\u5E01\u6210\u529F(av='+fe.aid+',num='+Ee+')','success'),ce.DailyReward.coin(ue,Ie-Ee,pe+1)):-110===Oe.code?(window.toast('[\u81EA\u52A8\u6BCF\u65E5\u5956\u52B1][\u6BCF\u65E5\u6295\u5E01]\u672A\u7ED1\u5B9A\u624B\u673A\uFF0C\u5DF2\u505C\u6B62','error'),$.Deferred().reject()):34003===Oe.code?Te?ce.DailyReward.coin(ue,Ie,pe+1):ce.DailyReward.coin(ue,Ie,pe,!0):34005===Oe.code?ce.DailyReward.coin(ue,Ie,pe+1):-104===Oe.code?(window.toast('[\u81EA\u52A8\u6BCF\u65E5\u5956\u52B1][\u6BCF\u65E5\u6295\u5E01]\u5269\u4F59\u786C\u5E01\u4E0D\u8DB3\uFF0C\u5DF2\u505C\u6B62','warning'),$.Deferred().reject()):(window.toast('[\u81EA\u52A8\u6BCF\u65E5\u5956\u52B1][\u6BCF\u65E5\u6295\u5E01]\''+Oe.msg,'caution'),ce.DailyReward.coin(ue,Ie,pe+1))},function(){return Q(function(){return ce.DailyReward.coin(ue,Ie,pe)})})})},coin_uid:function coin_uid(ue,Ie,pe,Te){var fe=4<arguments.length&&arguments[4]!==void 0?arguments[4]:0,Ee=5<arguments.length&&arguments[5]!==void 0&&arguments[5];if(!ce.CONFIG.COIN)return $.Deferred().resolve();if(ce.DailyReward.coin_exp>=10*ce.CONFIG.COIN_NUMBER)return window.toast('[\u81EA\u52A8\u6BCF\u65E5\u5956\u52B1][\u6BCF\u65E5\u6295\u5E01]\u4ECA\u65E5\u6295\u5E01\u5DF2\u5B8C\u6210','info'),$.Deferred().resolve();fe>=ue.length&&ce.DailyReward.UserSpace(ce.CONFIG.COIN_UID,30,0,pe++,'','pubdate','jsonp');var me=ue[fe];if(1===me.is_union_video||me.mid!=Te)return z('DailyReward.coin_uid','\u8054\u5408\u6295\u7A3F\u4E14UP\u4E0D\u662F\u6307\u5B9AUID\u7528\u6237 aid = '+me.aid),ce.DailyReward.coin_uid(ue,Ie,pe,Te,fe+1);var Oe=_Mathmin(2,Ie);Ee&&(Oe=1),S.x.getCoinInfo('','jsonp',me.aid,V()).then(function(ve){return 2===ve.data.multiply?(z('API.x.getCoinInfo','\u5DF2\u6295\u5E01\u4E24\u4E2A aid = '+me.aid),ce.DailyReward.coin_uid(ue,Ie,pe,Te,fe+1)):S.DailyReward.coin(me.aid,Oe).then(function(xe){return(z('DailyReward.coin_uid: API.DailyReward.coin_uid',xe),0===xe.code)?(ce.DailyReward.coin_exp+=10*Oe,window.toast('[\u81EA\u52A8\u6BCF\u65E5\u5956\u52B1][\u6BCF\u65E5\u6295\u5E01]\u6295\u5E01\u6210\u529F(av='+me.aid+',num='+Oe+')','success'),ce.DailyReward.coin_uid(ue,Ie-Oe,pe,Te,fe+1)):-110===xe.code?(window.toast('[\u81EA\u52A8\u6BCF\u65E5\u5956\u52B1][\u6BCF\u65E5\u6295\u5E01]\u672A\u7ED1\u5B9A\u624B\u673A\uFF0C\u5DF2\u505C\u6B62','error'),$.Deferred().reject()):34003===xe.code?Ee?ce.DailyReward.coin_uid(ue,Ie,pe,Te,fe+1):ce.DailyReward.coin_uid(ue,Ie,fe,pe,Te,!0):34005===xe.code?ce.DailyReward.coin_uid(ue,Ie,pe,Te,fe+1):-104===xe.code?(window.toast('[\u81EA\u52A8\u6BCF\u65E5\u5956\u52B1][\u6BCF\u65E5\u6295\u5E01]\u5269\u4F59\u786C\u5E01\u4E0D\u8DB3\uFF0C\u5DF2\u505C\u6B62','warning'),$.Deferred().reject()):(window.toast('[\u81EA\u52A8\u6BCF\u65E5\u5956\u52B1][\u6BCF\u65E5\u6295\u5E01]\''+xe.msg,'caution'),ce.DailyReward.coin_uid(ue,Ie,pe,Te,fe+1))},function(){return Q(function(){return ce.DailyReward.coin_uid(ue,Ie,pe,Te,fe)})})})},share:function share(ue){return ce.CONFIG.SHARE?S.DailyReward.share(ue).then(function(Ie){z('DailyReward.share: API.DailyReward.share',Ie),0===Ie.code?window.toast('[\u81EA\u52A8\u6BCF\u65E5\u5956\u52B1][\u6BCF\u65E5\u5206\u4EAB]\u5206\u4EAB\u6210\u529F(av='+ue+')','success'):71000===Ie.code?window.toast('[\u81EA\u52A8\u6BCF\u65E5\u5956\u52B1][\u6BCF\u65E5\u5206\u4EAB]\u4ECA\u65E5\u5206\u4EAB\u5DF2\u5B8C\u6210','info'):window.toast('[\u81EA\u52A8\u6BCF\u65E5\u5956\u52B1][\u6BCF\u65E5\u5206\u4EAB]\''+Ie.msg,'caution')},function(){return window.toast('[\u81EA\u52A8\u6BCF\u65E5\u5956\u52B1][\u6BCF\u65E5\u5206\u4EAB]\u5206\u4EAB\u5931\u8D25\uFF0C\u8BF7\u68C0\u67E5\u7F51\u7EDC','error'),Q(function(){return ce.DailyReward.share(ue)})}):$.Deferred().resolve()},dynamic:function(){var ue=_asyncToGenerator(regeneratorRuntime.mark(function Ie(){var pe,Te;return regeneratorRuntime.wrap(function(Ee){for(;;)switch(Ee.prev=Ee.next){case 0:return pe=void 0,Te=ce.CONFIG.COIN_NUMBER-ce.DailyReward.coin_exp/10,Ee.next=4,S.getuserinfo().then(function(me){return z('DailyReward.dynamic: API.getuserinfo',me),me.data.biliCoin<Te?me.data.biliCoin:Te});case 4:return pe=Ee.sent,pe<Te&&window.toast('[\u81EA\u52A8\u6BCF\u65E5\u5956\u52B1][\u6BCF\u65E5\u6295\u5E01]\u5269\u4F59\u786C\u5E01\u4E0D\u8DB3\uFF0C\u4EC5\u80FD\u6295'+pe+'\u4E2A\u5E01','warning'),Ee.abrupt('return',S.dynamic_svr.dynamic_new(P.uid,8).then(function(me){if(z('DailyReward.dynamic: API.dynamic_svr.dynamic_new',me),0===me.code){if(!!me.data.cards){var xe,Oe=JSON.parse(me.data.cards[0].card),ve=ce.DailyReward.watch(Oe.aid,Oe.cid);xe=0==ce.CONFIG.COIN_UID||'COIN_DYN'==ce.CONFIG.COIN_TYPE?ce.DailyReward.coin(me.data.cards,_Mathmax(pe,0)):ce.DailyReward.UserSpace(ce.CONFIG.COIN_UID,30,0,1,'','pubdate','jsonp');var he=ce.DailyReward.share(Oe.aid);return $.when(ve,xe,he)}window.toast('[\u81EA\u52A8\u6BCF\u65E5\u5956\u52B1]"\u52A8\u6001-\u6295\u7A3F\u89C6\u9891"\u4E2D\u6682\u65E0\u52A8\u6001','info')}else window.toast('[\u81EA\u52A8\u6BCF\u65E5\u5956\u52B1]\u83B7\u53D6"\u52A8\u6001-\u6295\u7A3F\u89C6\u9891"\''+me.msg,'caution')},function(){return window.toast('[\u81EA\u52A8\u6BCF\u65E5\u5956\u52B1]\u83B7\u53D6"\u52A8\u6001-\u6295\u7A3F\u89C6\u9891"\u5931\u8D25\uFF0C\u8BF7\u68C0\u67E5\u7F51\u7EDC','error'),Q(function(){return ce.DailyReward.dynamic()})}));case 7:case'end':return Ee.stop();}},Ie,_e)}));return function dynamic(){return ue.apply(this,arguments)}}(),UserSpace:function UserSpace(ue,Ie,pe,Te,fe,Ee,me){return S.x.getUserSpace(ue,Ie,pe,Te,fe,Ee,me).then(function(Oe){if(z('DailyReward.UserSpace: API.dynamic_svr.UserSpace',Oe),0===Oe.code){if(!!Oe.data.list.vlist){var ve=ce.CONFIG.COIN_NUMBER-ce.DailyReward.coin_exp/10,xe=ce.DailyReward.coin_uid(Oe.data.list.vlist,_Mathmax(ve,0),Te,ue);return xe}window.toast('[\u81EA\u52A8\u6BCF\u65E5\u5956\u52B1]"\u7A7A\u95F4-\u6295\u7A3F\u89C6\u9891"\u4E2D\u6682\u65E0\u89C6\u9891','info')}else window.toast('[\u81EA\u52A8\u6BCF\u65E5\u5956\u52B1]\u83B7\u53D6"\u7A7A\u95F4-\u6295\u7A3F\u89C6\u9891"\''+Oe.msg,'caution')},function(){return window.toast('[\u81EA\u52A8\u6BCF\u65E5\u5956\u52B1]\u83B7\u53D6"\u7A7A\u95F4-\u6295\u7A3F\u89C6\u9891"\u5931\u8D25\uFF0C\u8BF7\u68C0\u67E5\u7F51\u7EDC','error'),Q(function(){return ce.DailyReward.UserSpace(ue,Ie,pe,Te,fe,Ee,me)})})},run:function run(){try{return le(ce.CACHE.DailyReward_TS)?S.DailyReward.exp().then(function(ue){return z('DailyReward.run: API.DailyReward.exp',ue),0===ue.code?(ce.DailyReward.coin_exp=ue.number,ce.DailyReward.login(),ce.DailyReward.dynamic().then(function(){ce.CACHE.DailyReward_TS=V(),ce.saveCache(),Z(ce.DailyReward.run,'\u6BCF\u65E5\u4EFB\u52A1')})):void window.toast('[\u81EA\u52A8\u6BCF\u65E5\u5956\u52B1]'+ue.message,'caution')},function(){return window.toast('[\u81EA\u52A8\u6BCF\u65E5\u5956\u52B1]\u83B7\u53D6\u6BCF\u65E5\u5956\u52B1\u4FE1\u606F\u5931\u8D25\uFF0C\u8BF7\u68C0\u67E5\u7F51\u7EDC','error'),Q(function(){return ce.DailyReward.run()})}):(Z(ce.DailyReward.run,'\u6BCF\u65E5\u4EFB\u52A1'),$.Deferred().resolve())}catch(ue){return window.toast('[\u81EA\u52A8\u6BCF\u65E5\u5956\u52B1]\u8FD0\u884C\u65F6\u51FA\u73B0\u5F02\u5E38','error'),console.error('['+N+']',ue),$.Deferred().reject()}}},LiveReward:{dailySignIn:function dailySignIn(){return S.xlive.dosign().then(function(ue){z('LiveReward.dailySignIn: API.xlive.dosign',ue),0===ue.code?window.toast('[\u81EA\u52A8\u76F4\u64AD\u7B7E\u5230]\u5B8C\u6210','success'):1011040===ue.code?window.toast('[\u81EA\u52A8\u76F4\u64AD\u7B7E\u5230]\u4ECA\u65E5\u76F4\u64AD\u7B7E\u5230\u5DF2\u5B8C\u6210','info'):window.toast('[\u81EA\u52A8\u76F4\u64AD\u7B7E\u5230]'+ue.message,'caution')},function(){return window.toast('[\u81EA\u52A8\u76F4\u64AD\u7B7E\u5230]\u76F4\u64AD\u7B7E\u5230\u5931\u8D25\uFF0C\u8BF7\u68C0\u67E5\u7F51\u7EDC','error'),Q(function(){return ce.LiveReward.dailySignIn()})})},run:function run(){try{if(!ce.CONFIG.LIVE_SIGN)return $.Deferred().resolve();if(!le(ce.CACHE.LiveReward_TS))return Z(ce.LiveReward.run,'\u76F4\u64AD\u7B7E\u5230'),$.Deferred().resolve();ce.LiveReward.dailySignIn(),ce.CACHE.LiveReward_TS=V(),ce.saveCache(),Z(ce.LiveReward.run,'\u76F4\u64AD\u7B7E\u5230')}catch(ue){return window.toast('[\u81EA\u52A8\u76F4\u64AD\u7B7E\u5230]\u8FD0\u884C\u65F6\u51FA\u73B0\u5F02\u5E38','error'),console.error('['+N+']',ue),$.Deferred().reject()}}},Exchange:{silver2coin:function silver2coin(){return S.Exchange.silver2coin().then(function(ue){z('Exchange.silver2coin: API.SilverCoinExchange.silver2coin',ue),0===ue.code?window.toast('[\u94F6\u74DC\u5B50\u6362\u786C\u5E01]'+ue.msg,'success'):403===ue.code?window.toast('[\u94F6\u74DC\u5B50\u6362\u786C\u5E01]'+ue.msg,'info'):window.toast('[\u94F6\u74DC\u5B50\u6362\u786C\u5E01]'+ue.msg,'caution')},function(){return window.toast('[\u94F6\u74DC\u5B50\u6362\u786C\u5E01]\u5151\u6362\u5931\u8D25\uFF0C\u8BF7\u68C0\u67E5\u7F51\u7EDC','error'),Q(function(){return ce.Exchange.silver2coin()})})},runS2C:function runS2C(){try{return ce.CONFIG.SILVER2COIN?le(ce.CACHE.Silver2Coin_TS)?ce.Exchange.silver2coin().then(function(){ce.CACHE.Silver2Coin_TS=V(),ce.saveCache(),Z(ce.Exchange.runS2C,'\u74DC\u5B50\u6362\u786C\u5E01')},function(){return Q(function(){return ce.Exchange.runS2C()})}):(Z(ce.Exchange.runS2C,'\u74DC\u5B50\u6362\u786C\u5E01'),$.Deferred().resolve()):$.Deferred().resolve()}catch(ue){return window.toast('[\u94F6\u74DC\u5B50\u6362\u786C\u5E01]\u8FD0\u884C\u65F6\u51FA\u73B0\u5F02\u5E38\uFF0C\u5DF2\u505C\u6B62','error'),console.error('['+N+']',ue),$.Deferred().reject()}}},TreasureBox:{timer:void 0,time_end:void 0,time_start:void 0,promise:{calc:void 0,timer:void 0},DOM:{image:void 0,canvas:void 0,div_tip:void 0,div_timer:void 0},init:function init(){if(!ce.CONFIG.AUTO_TREASUREBOX)return $.Deferred().resolve();var ue=$.Deferred();return K(function(){try{if($('.draw-box.gift-left-part').length)return window.toast('[\u81EA\u52A8\u9886\u53D6\u74DC\u5B50]\u5F53\u524D\u76F4\u64AD\u95F4\u6709\u5B9E\u7269\u62BD\u5956\uFF0C\u6682\u505C\u9886\u74DC\u5B50\u529F\u80FD','caution'),ue.resolve(),!0;var Ie=$('#gift-control-vm div.treasure-box.p-relative');if(!Ie.length)return!1;Ie=Ie.first(),Ie.attr('id','old_treasure_box'),Ie.hide();var pe=$('<div id="'+N+'_treasure_div" class="treasure-box p-relative" style="min-width: 46px;display: inline-block;float: left;padding: 22px 0 0 15px;"></div>');ce.TreasureBox.DOM.div_tip=$('<div id="'+N+'_treasure_div_tip" class="t-center b-box none-select">\u81EA\u52A8<br>\u9886\u53D6\u4E2D</div>'),ce.TreasureBox.DOM.div_timer=$('<div id="'+N+'_treasure_div_timer" class="t-center b-box none-select">0</div>'),ce.TreasureBox.DOM.image=$('<img id="'+N+'_treasure_image" style="display:none">'),ce.TreasureBox.DOM.canvas=$('<canvas id="'+N+'_treasure_canvas" style="display:none" height="40" width="120"></canvas>');var Te='min-width: 40px;padding: 2px 3px;margin-top: 3px;font-size: 12px;color: #fff;background-color: rgba(0,0,255,.5);border-radius: 10px;';ce.TreasureBox.DOM.div_tip[0].style=Te,ce.TreasureBox.DOM.div_timer[0].style=Te,pe.append(ce.TreasureBox.DOM.div_tip),pe.append(ce.TreasureBox.DOM.image),pe.append(ce.TreasureBox.DOM.canvas),ce.TreasureBox.DOM.div_tip.after(ce.TreasureBox.DOM.div_timer),Ie.after(pe);try{if(OCRAD);}catch(fe){return ce.TreasureBox.setMsg('\u521D\u59CB\u5316<br>\u5931\u8D25'),window.toast('[\u81EA\u52A8\u9886\u53D6\u74DC\u5B50]OCRAD\u521D\u59CB\u5316\u5931\u8D25\uFF0C\u8BF7\u68C0\u67E5\u7F51\u7EDC','error'),console.error('['+N+']',fe),ue.resolve(),!0}return ce.TreasureBox.timer=setInterval(function(){var fe=parseInt(ce.TreasureBox.DOM.div_timer.text(),10);isNaN(fe)&&(fe=0),0<fe?ce.TreasureBox.DOM.div_timer.text(fe-1+'s'):ce.TreasureBox.DOM.div_timer.hide()},1e3),ce.TreasureBox.DOM.image[0].onload=function(){var fe=ce.TreasureBox.DOM.canvas[0].getContext('2d');fe.font='40px agencyfbbold',fe.textBaseline='top',fe.clearRect(0,0,ce.TreasureBox.DOM.canvas[0].width,ce.TreasureBox.DOM.canvas[0].height),fe.drawImage(ce.TreasureBox.DOM.image[0],0,0);var Ee=ce.TreasureBox.captcha.OCR.getGrayscaleMap(fe),me=ce.TreasureBox.captcha.OCR.orderFilter2In3x3(Ee);fe.clearRect(0,0,120,40);for(var ve,Oe=0;Oe<me.length;++Oe)ve=me[Oe],fe.fillStyle='rgb('+ve+', '+ve+', '+ve+')',fe.fillRect(Oe%120,_Mathround(Oe/120),1,1);try{var Oe=ce.TreasureBox.captcha.correctQuestion(OCRAD(fe.getImageData(0,0,120,40)));z('TreasureBox.DOM.image.load','question =',Oe);var ve=ce.TreasureBox.captcha.eval(Oe);z('TreasureBox.DOM.image.load','answer =',ve),void 0!==ve&&(console.info('['+N+'][\u81EA\u52A8\u9886\u53D6\u74DC\u5B50]\u9A8C\u8BC1\u7801\u8BC6\u522B\u7ED3\u679C: '+Oe+' = '+ve),ce.TreasureBox.promise.calc.resolve(ve))}catch(Oe){ce.TreasureBox.promise.calc.reject()}},ue.resolve(),!0}catch(Ie){return window.toast('[\u81EA\u52A8\u9886\u53D6\u74DC\u5B50]\u521D\u59CB\u5316\u65F6\u51FA\u73B0\u5F02\u5E38\uFF0C\u5DF2\u505C\u6B62','error'),console.error('['+N+']',Ie),ue.reject(),!0}}),ue},run:function run(){try{if(!ce.CONFIG.AUTO_TREASUREBOX||!ce.TreasureBox.timer)return;if(P.blocked)return ce.TreasureBox.setMsg('\u5C0F\u9ED1\u5C4B'),void window.toast('[\u81EA\u52A8\u9886\u53D6\u74DC\u5B50]\u5E10\u53F7\u88AB\u5173\u5C0F\u9ED1\u5C4B\uFF0C\u505C\u6B62\u9886\u53D6\u74DC\u5B50','caution');if(!le(ce.CACHE.TreasureBox_TS))return ce.TreasureBox.setMsg('\u4ECA\u65E5<br>\u5DF2\u9886\u5B8C'),void Z(ce.TreasureBox.run,'\u9886\u94F6\u74DC\u5B50\u5B9D\u7BB1');ce.TreasureBox.getCurrentTask().then(function(ue){if(z('TreasureBox.run: TreasureBox.getCurrentTask().then',ue),0===ue.code){ce.TreasureBox.promise.timer=$.Deferred(),ce.TreasureBox.promise.timer.then(function(){ce.TreasureBox.captcha.calc().then(function(pe){ce.TreasureBox.getAward(pe).then(function(){return ce.TreasureBox.run()},function(){return ce.TreasureBox.run()})},function(){return TreasureBox.run()})}),ce.TreasureBox.time_end=ue.data.time_end,ce.TreasureBox.time_start=ue.data.time_start;var Ie=ce.TreasureBox.time_end-X()+1;0>Ie&&(Ie=0),setTimeout(function(){ce.TreasureBox.promise.timer&&ce.TreasureBox.promise.timer.resolve()},1e3*Ie),ce.TreasureBox.DOM.div_timer.text(Ie+'s'),ce.TreasureBox.DOM.div_timer.show(),ce.TreasureBox.DOM.div_tip.html('\u8F6E\u6570<br>'+ue.data.times+'/'+ue.data.max_times+'<br>\u94F6\u74DC\u5B50<br>'+ue.data.silver)}else if(-10017===ue.code)ce.TreasureBox.setMsg('\u4ECA\u65E5<br>\u5DF2\u9886\u5B8C'),ce.CACHE.TreasureBox_TS=V(),ce.saveCache(),Z(ce.TreasureBox.run,'\u9886\u94F6\u74DC\u5B50\u5B9D\u7BB1');else if(-500===ue.code)location.reload();else return window.toast('[\u81EA\u52A8\u9886\u53D6\u74DC\u5B50]'+ue.msg,'caution'),ce.TreasureBox.run()})}catch(ue){ce.TreasureBox.setMsg('\u8FD0\u884C<br>\u5F02\u5E38'),window.toast('[\u81EA\u52A8\u9886\u53D6\u74DC\u5B50]\u8FD0\u884C\u65F6\u51FA\u73B0\u5F02\u5E38\uFF0C\u5DF2\u505C\u6B62','error'),console.error('['+N+']',ue)}},setMsg:function setMsg(ue){ce.CONFIG.AUTO_TREASUREBOX&&(ce.TreasureBox.promise.timer&&(ce.TreasureBox.promise.timer.reject(),ce.TreasureBox.promise.timer=void 0),ce.TreasureBox.DOM.div_timer&&ce.TreasureBox.DOM.div_timer.hide(),ce.TreasureBox.DOM.div_tip&&ce.TreasureBox.DOM.div_tip.html(ue))},getAward:function getAward(ue){var Ie=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0;return ce.CONFIG.AUTO_TREASUREBOX?3<Ie?$.Deferred().resolve():S.TreasureBox.getAward(ce.TreasureBox.time_start,ce.TreasureBox.time_end,ue).then(function(){var pe=_asyncToGenerator(regeneratorRuntime.mark(function Te(fe){var Ee;return regeneratorRuntime.wrap(function(Oe){for(;;)switch(Oe.prev=Oe.next){case 0:z('TreasureBox.getAward: getAward',fe),Oe.t0=fe.code,Oe.next=0===Oe.t0?4:-903===Oe.t0?5:-902===Oe.t0?6:-901===Oe.t0?6:-10017===Oe.t0?6:-800===Oe.t0?9:-500===Oe.t0?12:400===Oe.t0?15:22;break;case 4:window.toast('[\u81EA\u52A8\u9886\u53D6\u74DC\u5B50]\u9886\u53D6\u4E86 '+fe.data.awardSilver+' \u94F6\u74DC\u5B50','success');case 5:return Oe.abrupt('return',$.Deferred().resolve());case 6:return Oe.next=8,C(150);case 8:return Oe.abrupt('return',ce.TreasureBox.captcha.calc().then(function(ve){return ce.TreasureBox.getAward(ve,Ie)}));case 9:return ce.TreasureBox.setMsg('\u672A\u7ED1\u5B9A<br>\u624B\u673A'),window.toast('[\u81EA\u52A8\u9886\u53D6\u74DC\u5B50]\u672A\u7ED1\u5B9A\u624B\u673A\uFF0C\u5DF2\u505C\u6B62','caution'),Oe.abrupt('return',$.Deferred().reject());case 12:return Ee=$.Deferred(),setTimeout(function(){ce.TreasureBox.captcha.calc().then(function(ve){ce.TreasureBox.getAward(ve,Ie+1).then(function(){return Ee.resolve()},function(){return Ee.reject()})},function(){return Ee.reject()})},3e3),Oe.abrupt('return',Ee);case 15:if(!(-1<fe.msg.indexOf('\u62D2\u7EDD'))){Oe.next=20;break}return P.blocked=!0,ce.TreasureBox.setMsg('\u62D2\u7EDD<br>\u8BBF\u95EE'),window.toast('[\u81EA\u52A8\u9886\u53D6\u74DC\u5B50]\u8BBF\u95EE\u88AB\u62D2\u7EDD\uFF0C\u60A8\u7684\u5E10\u53F7\u53EF\u80FD\u5DF2\u7ECF\u88AB\u5173\u5C0F\u9ED1\u5C4B\uFF0C\u5DF2\u505C\u6B62','error'),Oe.abrupt('return',$.Deferred().reject());case 20:return window.toast('[\u81EA\u52A8\u9886\u53D6\u74DC\u5B50]'+fe.msg,'caution'),Oe.abrupt('return',$.Deferred().resolve());case 22:window.toast('[\u81EA\u52A8\u9886\u53D6\u74DC\u5B50]'+fe.msg,'caution');case 23:case'end':return Oe.stop();}},Te,_e)}));return function(){return pe.apply(this,arguments)}}(),function(){return window.toast('[\u81EA\u52A8\u9886\u53D6\u74DC\u5B50]\u83B7\u53D6\u4EFB\u52A1\u5931\u8D25\uFF0C\u8BF7\u68C0\u67E5\u7F51\u7EDC','error'),Q(function(){return ce.TreasureBox.getAward(ue,Ie)})}):$.Deferred().reject()},getCurrentTask:function getCurrentTask(){return ce.CONFIG.AUTO_TREASUREBOX?S.TreasureBox.getCurrentTask().then(function(ue){return z('TreasureBox.getCurrentTask: API.TreasureBox.getCurrentTask',ue),$.Deferred().resolve(ue)},function(){return window.toast('[\u81EA\u52A8\u9886\u53D6\u74DC\u5B50]\u83B7\u53D6\u5F53\u524D\u4EFB\u52A1\u5931\u8D25\uFF0C\u8BF7\u68C0\u67E5\u7F51\u7EDC','error'),Q(function(){return ce.TreasureBox.getCurrentTask()})}):$.Deferred().reject()},captcha:{cnt:0,calc:function calc(){return ce.CONFIG.AUTO_TREASUREBOX?20<ce.TreasureBox.captcha.cnt?(ce.TreasureBox.setMsg('\u9A8C\u8BC1\u7801<br>\u8BC6\u522B<br>\u5931\u8D25'),window.toast('[\u81EA\u52A8\u9886\u53D6\u74DC\u5B50]\u9A8C\u8BC1\u7801\u8BC6\u522B\u5931\u8D25\uFF0C\u5DF2\u505C\u6B62','error'),$.Deferred().reject()):S.TreasureBox.getCaptcha(V()).then(function(ue){if(z('TreasureBox.captcha.calc: getCaptcha',ue),0===ue.code){ce.TreasureBox.captcha.cnt++;var Ie=$.Deferred();return ce.TreasureBox.promise.calc=$.Deferred(),ce.TreasureBox.promise.calc.then(function(pe){ce.TreasureBox.captcha.cnt=0,Ie.resolve(pe)},function(){ce.TreasureBox.captcha.calc().then(function(pe){Ie.resolve(pe)},function(){Ie.reject()})}),ce.TreasureBox.DOM.image.attr('src',ue.data.img),Ie}return window.toast('[\u81EA\u52A8\u9886\u53D6\u74DC\u5B50]'+ue.msg,'caution'),Q(function(){return ce.TreasureBox.captcha.calc()})},function(){return window.toast('[\u81EA\u52A8\u9886\u53D6\u74DC\u5B50]\u52A0\u8F7D\u9A8C\u8BC1\u7801\u5931\u8D25\uFF0C\u8BF7\u68C0\u67E5\u7F51\u7EDC','error'),Q(function(){return ce.TreasureBox.captcha.calc()})}):(ce.TreasureBox.captcha.cnt=0,$.Deferred().reject())},OCR:{getGrayscaleMap:function getGrayscaleMap(ue){for(var Ie=1<arguments.length&&arguments[1]!==void 0?arguments[1]:235,pe=2<arguments.length&&arguments[2]!==void 0?arguments[2]:120,Te=3<arguments.length&&arguments[3]!==void 0?arguments[3]:40,fe=ue.getImageData(0,0,pe,Te).data,Ee=[],me=0;me<Te;me++)for(var Oe=0;Oe<pe;Oe++){var ve=4*(me*pe+Oe),xe=fe.slice(ve,ve+4),he=xe?77*xe[0]+150*xe[1]+29*xe[2]+128>>8:0;Ee.push(he>Ie?he:0)}return Ee},orderFilter2In3x3:function orderFilter2In3x3(ue){for(var Ie=1<arguments.length&&arguments[1]!==void 0?arguments[1]:9,pe=2<arguments.length&&arguments[2]!==void 0?arguments[2]:120,Te=function gray(he,Ce){return 0<=he+Ce*pe?ue[he+Ce*pe]:255},fe=[],Ee=ue.length,he=0;he<Ee;++he){var Oe=[he%pe,_Mathfloor(he/pe)],ve=Oe[0],xe=Oe[1],Ce=Array(9);Ce[0]=Te(ve-1,xe-1),Ce[1]=Te(ve+0,xe-1),Ce[2]=Te(ve+1,xe-1),Ce[3]=Te(ve-1,xe+0),Ce[4]=Te(ve+0,xe+0),Ce[5]=Te(ve+1,xe+0),Ce[6]=Te(ve-1,xe+1),Ce[7]=Te(ve+0,xe+1),Ce[8]=Te(ve+1,xe+1),Ce.sort(function(Ge,Re){return Ge-Re}),fe.push(Ce[Ie-1])}return fe}},eval:function _eval(ue){var Ie=Function;return new Ie('return '+ue)()},correctStr:{i:1,I:1,"|":1,l:1,o:0,O:0,D:0,S:6,s:6,b:6,R:8,B:8,z:2,Z:2,".":'-',_:4,g:9,">":3},correctQuestion:function correctQuestion(ue){var Ie='';for(var pe in ue=ue.trim(),ue){var Te=ce.TreasureBox.captcha.correctStr[ue[pe]];Ie+=void 0===Te?ue[pe]:Te}'4'===Ie[2]&&(Ie[2]='+');for(var pe=0;pe<=parseInt(Ie.length-2);pe++)'\''===Ie[pe]&&'1'===Ie[pe+1]&&(Ie[pe]='7',Ie.splice(pe+1,1));return Ie}}},Gift:(ge={run_timer:void 0,ruid:void 0,room_id:void 0,medal_list:void 0,bag_list:void 0,time:void 0,remain_feed:void 0,over:!1},_defineProperty(ge,'run_timer',void 0),_defineProperty(ge,'sendGiftList',[1,6,30607]),_defineProperty(ge,'getMedalList',function(){var ue=_asyncToGenerator(regeneratorRuntime.mark(function Ie(){var pe=0<arguments.length&&arguments[0]!==void 0?arguments[0]:1;return regeneratorRuntime.wrap(function(fe){for(;;)switch(fe.prev=fe.next){case 0:return 1===pe&&(ce.Gift.medal_list=[]),fe.next=3,S.i.medal(pe,25).then(function(Ee){if(z('Gift.getMedalList: API.i.medal',Ee),ce.Gift.medal_list=ce.Gift.medal_list.concat(Ee.data.fansMedalList),Ee.data.pageinfo.curPage<Ee.data.pageinfo.totalpages)return ce.Gift.getMedalList(pe+1)},function(){return window.toast('[\u81EA\u52A8\u9001\u793C]\u83B7\u53D6\u52CB\u7AE0\u5217\u8868\u5931\u8D25\uFF0C\u8BF7\u68C0\u67E5\u7F51\u7EDC','error'),Q(function(){return ce.Gift.getMedalList()})});case 3:return fe.abrupt('return',fe.sent);case 4:case'end':return fe.stop();}},Ie,_e)}));return function getMedalList(){return ue.apply(this,arguments)}}()),_defineProperty(ge,'getBagList',function(){var ue=_asyncToGenerator(regeneratorRuntime.mark(function Ie(){return regeneratorRuntime.wrap(function(Te){for(;;)switch(Te.prev=Te.next){case 0:return Te.next=2,S.gift.bag_list().then(function(fe){z('Gift.getBagList: API.gift.bag_list',fe),ce.Gift.bag_list=fe.data.list,ce.Gift.time=fe.data.time},function(){return window.toast('[\u81EA\u52A8\u9001\u793C]\u83B7\u53D6\u5305\u88F9\u5217\u8868\u5931\u8D25\uFF0C\u8BF7\u68C0\u67E5\u7F51\u7EDC','error'),Q(function(){return ce.Gift.getBagList()})});case 2:return Te.abrupt('return',Te.sent);case 3:case'end':return Te.stop();}},Ie,_e)}));return function getBagList(){return ue.apply(this,arguments)}}()),_defineProperty(ge,'getFeedByGiftID',function getFeedByGiftID(ue){for(var Ie=P.gift_list.length-1;0<=Ie;--Ie)if(P.gift_list[Ie].id===ue)return Math.ceil(P.gift_list[Ie].price/100);return 0}),_defineProperty(ge,'sort_medals',function sort_medals(ue){if(ce.CONFIG.GIFT_SORT?ue.sort(function(Oe,ve){return 0==ve.level-Oe.level?ve.intimacy-Oe.intimacy:ve.level-Oe.level}):ue.sort(function(Oe,ve){return 0==Oe.level-ve.level?Oe.intimacy-ve.intimacy:Oe.level-ve.level}),ce.CONFIG.AUTO_GIFT_ROOMID&&0<ce.CONFIG.AUTO_GIFT_ROOMID.length){var Oe=ce.CONFIG.AUTO_GIFT_ROOMID.split(',');Oe.reverse();var Ie=!0,pe=!1,Te=void 0;try{for(var me,fe=function _loop2(){var ve=me.value,xe=ue.findIndex(function(he){return he.roomid==ve});if(-1!=xe){var he=ue[xe];ue.splice(xe,1),ue.unshift(he)}},Ee=Oe[Symbol.iterator]();!(Ie=(me=Ee.next()).done);Ie=!0)fe()}catch(ve){pe=!0,Te=ve}finally{try{!Ie&&Ee.return&&Ee.return()}finally{if(pe)throw Te}}}return ue}),_defineProperty(ge,'auto_light',function(){var ue=_asyncToGenerator(regeneratorRuntime.mark(function Ie(pe){var Te,fe,Ee,me,Oe,ve,xe,he,Ce,Ge,Re,Ae,Ne,ye,De,Me;return regeneratorRuntime.wrap(function(Le){for(;;)switch(Le.prev=Le.next){case 0:Le.prev=0,Te=ce.Gift.getFeedByGiftID(30607),fe=ce.CONFIG.LIGHT_MEDALS.split(','),Ee=void 0,Ee='LIGHT_WHITE'==ce.CONFIG.LIGHT_METHOD?pe.filter(function(Se){return 0==Se.is_lighted&&Se.day_limit-Se.today_feed>=Te&&0<=fe.findIndex(function(Fe){return Fe==Se.roomid})}):pe.filter(function(Se){return 0==Se.is_lighted&&Se.day_limit-Se.today_feed>=Te&&-1==fe.findIndex(function(Fe){return Fe==Se.roomid})});;if(z('[auto_light]\u5373\u5C06\u70B9\u4EAE\u52CB\u7AE0\u623F\u95F4\u5217\u8868',Ee),!(Ee&&0<Ee.length)){Le.next=52;break}return Ee=ce.Gift.sort_medals(Ee),Le.next=11,ce.Gift.getBagList();case 11:if(me=ce.Gift.bag_list.filter(function(Se){return 30607==Se.gift_id}),!(me&&0<me.length)){Le.next=52;break}Oe=!0,ve=!1,xe=void 0,Le.prev=16,he=Ee[Symbol.iterator]();case 18:if(Oe=(Ce=he.next()).done){Le.next=38;break}if(Ge=Ce.value,Re=me.find(function(Se){return 30607==Se.gift_id&&0<Se.gift_num}),!Re){Le.next=34;break}if(Ae=Ge.day_limit-Ge.today_feed,!(0<=Ae-Te||ce.CONFIG.FORCE_LIGHT)){Le.next=33;break}return Le.next=26,S.room.room_init(parseInt(Ge.roomid,10));case 26:return Ne=Le.sent,ye=parseInt(Ne.data.room_id,10),De=1,Le.next=31,S.gift.bag_send(P.uid,30607,Ge.target_id,De,Re.bag_id,ye,P.rnd);case 31:Me=Le.sent,0===Me.code?(Re.gift_num-=De,Ge.today_feed+=De*Te,Ae-=De*Te,window.toast('[\u81EA\u52A8\u9001\u793C]\u52CB\u7AE0['+Ge.medalName+']\u70B9\u4EAE\u6210\u529F\uFF0C\u9001\u51FA'+De+'\u4E2A'+Re.gift_name+'\uFF0C['+Ge.today_feed+'/'+Ge.day_limit+']\u8DDD\u79BB\u5347\u7EA7\u8FD8\u9700['+Ae+']','success'),z('Gift.auto_light','\u52CB\u7AE0['+Ge.medalName+']\u70B9\u4EAE\u6210\u529F\uFF0C\u9001\u51FA'+De+'\u4E2A'+Re.gift_name+'\uFF0C['+Ge.today_feed+'/'+Ge.day_limit+']')):window.toast('[\u81EA\u52A8\u9001\u793C]\u52CB\u7AE0['+Ge.medalName+']\u70B9\u4EAE\u5931\u8D25\u3010'+Ne.msg+'\u3011','caution');case 33:return Le.abrupt('continue',35);case 34:return Le.abrupt('break',38);case 35:Oe=!0,Le.next=18;break;case 38:Le.next=44;break;case 40:Le.prev=40,Le.t0=Le['catch'](16),ve=!0,xe=Le.t0;case 44:Le.prev=44,Le.prev=45,!Oe&&he.return&&he.return();case 47:if(Le.prev=47,!ve){Le.next=50;break}throw xe;case 50:return Le.finish(47);case 51:return Le.finish(44);case 52:Le.next=58;break;case 54:Le.prev=54,Le.t1=Le['catch'](0),console.error(Le.t1),window.toast('[\u81EA\u52A8\u9001\u793C]\u70B9\u4EAE\u52CB\u7AE0\u51FA\u9519:'+Le.t1,'error');case 58:case'end':return Le.stop();}},Ie,_e,[[0,54],[16,40,44,52],[45,,47,51]])}));return function auto_light(){return ue.apply(this,arguments)}}()),_defineProperty(ge,'run',function(){var ue=_asyncToGenerator(regeneratorRuntime.mark(function Ie(){var pe,Te,fe,Ee,me,Oe,ve,xe,he,Ce,Ge,Re,Ae,Ne;return regeneratorRuntime.wrap(function(De){for(;;)switch(De.prev=De.next){case 0:if(pe=function FailFunc(){return window.toast('[\u81EA\u52A8\u9001\u793C]\u9001\u793C\u5931\u8D25\uFF0C\u8BF7\u68C0\u67E5\u7F51\u7EDC','error'),Q(function(){return ce.Gift.run()})},Te=function nextTimeDebug(){if('GIFT_SEND_TIME'==ce.CONFIG.GIFT_METHOD){var Me=u(ce.CONFIG.GIFT_SEND_HOUR,ce.CONFIG.GIFT_SEND_MINUTE);ce.Gift.run_timer=setTimeout(ce.Gift.run,Me);var be=new Date(V()+Me).toLocaleString();z('[\u81EA\u52A8\u9001\u793C]','\u5C06\u5728'+be+'\u8FDB\u884C\u81EA\u52A8\u9001\u793C'),ce.CACHE.Gift_TS=V(),ce.saveCache()}else z('[\u81EA\u52A8\u9001\u793C]','\u5C06\u5728'+ce.CONFIG.GIFT_INTERVAL+'\u5206\u949F\u540E\u8FDB\u884C\u81EA\u52A8\u9001\u793C'),ce.CACHE.GiftInterval_TS=V(),ce.saveCache()},De.prev=2,ce.CONFIG.AUTO_GIFT){De.next=5;break}return De.abrupt('return',$.Deferred().resolve());case 5:if(ce.Gift.run_timer&&clearTimeout(ce.Gift.run_timer),'GIFT_SEND_TIME'!=ce.CONFIG.GIFT_METHOD||E(ce.CONFIG.GIFT_SEND_HOUR,ce.CONFIG.GIFT_SEND_MINUTE)||!1!=U){De.next=14;break}return fe=u(ce.CONFIG.GIFT_SEND_HOUR,ce.CONFIG.GIFT_SEND_MINUTE),ce.Gift.run_timer=setTimeout(ce.Gift.run,fe),Ee=new Date(V()+fe).toLocaleString(),z('[\u81EA\u52A8\u9001\u793C]','\u5C06\u5728'+Ee+'\u8FDB\u884C\u81EA\u52A8\u9001\u793C'),De.abrupt('return',$.Deferred().resolve());case 14:if('GIFT_INTERVAL'!=ce.CONFIG.GIFT_METHOD||!1!=U){De.next=27;break}if(me=6e4*ce.CONFIG.GIFT_INTERVAL,!ce.CACHE.GiftInterval_TS){De.next=25;break}if(Oe=V()-ce.CACHE.GiftInterval_TS,!(Oe<me)){De.next=23;break}return ve=me-Oe,ce.Gift.run_timer=setTimeout(function(){return ce.Gift.run()},ve),z('[\u81EA\u52A8\u9001\u793C]','\u5C06\u5728'+ve+'\u6BEB\u79D2\u540E\u8FDB\u884C\u81EA\u52A8\u9001\u793C'),De.abrupt('return');case 23:De.next=27;break;case 25:ce.CACHE.GiftInterval_TS=V(),ce.saveCache();case 27:return ce.Gift.over=!1,De.next=30,ce.Gift.getMedalList();case 30:if(xe=ce.Gift.medal_list,z('Gift.run: Gift.getMedalList().then: Gift.medal_list',xe),!(xe&&0<xe.length)){De.next=34;break}return De.delegateYield(regeneratorRuntime.mark(function Me(){var be,Le,Se,Fe,we,ke,Ue,He,Be,Pe;return regeneratorRuntime.wrap(function(je){for(;;)switch(je.prev=je.next){case 0:xe=xe.filter(function(Ve){return 0<Ve.day_limit-Ve.today_feed&&20>Ve.level}),xe=ce.Gift.sort_medals(xe),ce.CONFIG.EXCLUDE_ROOMID&&0<ce.CONFIG.EXCLUDE_ROOMID.length&&(be=ce.CONFIG.EXCLUDE_ROOMID.split(','),xe=xe.filter(function(Ve){return-1==be.findIndex(function(Xe){return Xe==Ve.roomid})}));;return je.next=6,ce.Gift.auto_light(xe);case 6:Le=86400*ce.CONFIG.GIFT_LIMIT,Se=!0,Fe=!1,we=void 0,je.prev=10,ke=xe[Symbol.iterator]();case 12:if(Se=(Ue=ke.next()).done){je.next=30;break}if(He=Ue.value,!ce.Gift.over){je.next=16;break}return je.abrupt('break',30);case 16:return je.next=18,S.room.room_init(parseInt(He.roomid,10));case 18:if(Be=je.sent,ce.Gift.room_id=parseInt(Be.data.room_id,10),ce.Gift.ruid=He.target_id,ce.Gift.remain_feed=He.day_limit-He.today_feed,!(0<ce.Gift.remain_feed)){je.next=27;break}return je.delegateYield(regeneratorRuntime.mark(function Ve(){var Xe,Ke,Qe;return regeneratorRuntime.wrap(function(ze){for(;;)switch(ze.prev=ze.next){case 0:return ze.next=2,ce.Gift.getBagList();case 2:if(Xe=X(),ce.CONFIG.SEND_ALL_GIFT){ze.next=7;break}if(Ke=ce.Gift.bag_list.filter(function(Ze){return ce.Gift.sendGiftList.includes(Ze.gift_id)&&0<Ze.gift_num&&Ze.expire_at>Xe&&Ze.expire_at-Xe<Le}),0!=Ke.length){ze.next=7;break}return ze.abrupt('return','break');case 7:;if(!(0<ce.Gift.remain_feed)){ze.next=21;break}return window.toast('[\u81EA\u52A8\u9001\u793C]\u52CB\u7AE0['+He.medalName+'] \u4ECA\u65E5\u4EB2\u5BC6\u5EA6\u672A\u6EE1['+He.today_feed+'/'+He.day_limit+']\uFF0C\u9884\u8BA1\u9700\u8981['+ce.Gift.remain_feed+']\u9001\u793C\u5F00\u59CB','info'),ze.next=12,ce.Gift.sendGift(He);case 12:if(ce.CONFIG.SEND_ALL_GIFT){ze.next=19;break}if(Qe=ce.Gift.bag_list.filter(function(Ze){return ce.Gift.sendGiftList.includes(Ze.gift_id)&&0<Ze.gift_num&&Ze.expire_at>Xe&&Ze.expire_at-Xe<Le}),0!=Qe.length){ze.next=18;break}return ze.abrupt('return','break');case 18:ce.Gift.bag_list=Qe;case 19:ze.next=22;break;case 21:window.toast('[\u81EA\u52A8\u9001\u793C]\u52CB\u7AE0['+He.medalName+'] \u4ECA\u65E5\u4EB2\u5BC6\u5EA6\u5DF2\u6EE1','info');case 22:case'end':return ze.stop();}},Ve,_e)})(),'t0',24);case 24:if(Pe=je.t0,'break'!==Pe){je.next=27;break}return je.abrupt('break',30);case 27:Se=!0,je.next=12;break;case 30:je.next=36;break;case 32:je.prev=32,je.t1=je['catch'](10),Fe=!0,we=je.t1;case 36:je.prev=36,je.prev=37,!Se&&ke.return&&ke.return();case 39:if(je.prev=39,!Fe){je.next=42;break}throw we;case 42:return je.finish(39);case 43:return je.finish(36);case 44:case'end':return je.stop();}},Me,_e,[[10,32,36,44],[37,,39,43]])})(),'t0',34);case 34:return De.next=36,ce.Gift.getBagList();case 36:he=0,he=0;case 38:if(!(he<=ce.Gift.bag_list.length-1)){De.next=44;break}if(1!=ce.Gift.bag_list[he].gift_id){De.next=41;break}return De.abrupt('break',44);case 41:he++,De.next=38;break;case 44:if(Ce=ce.Gift.bag_list[he],void 0!=Ce){De.next=49;break}return U=!1,Te(),De.abrupt('return',$.Deferred().resolve());case 49:if(Ge=ce.Gift.getFeedByGiftID(Ce.gift_id),Re=86400,Ae=X(),!(0!=ce.Gift.bag_list.filter(function(Me){return ce.Gift.sendGiftList.includes(Me.gift_id)&&0<Me.gift_num&&Me.expire_at>Ae&&Me.expire_at-Ae<Re}).length&&Ce.expire_at>ce.Gift.time&&Ce.expire_at-ce.Gift.time<Re&&'0'!=ce.CONFIG.SPARE_GIFT_ROOM&&'0'!=ce.CONFIG.SPARE_GIFT_UID&&0<Ge)){De.next=55;break}return Ne=Ce.gift_num,De.abrupt('return',S.gift.bag_send(P.uid,Ce.gift_id,ce.CONFIG.SPARE_GIFT_UID,Ne,Ce.bag_id,ce.CONFIG.SPARE_GIFT_ROOM,P.rnd).then(function(Me){z('Gift.sendGift(\u5269\u4F59\u793C\u7269): API.gift.bag_send',Me),0===Me.code?window.toast('[\u81EA\u52A8\u9001\u793C](\u5269\u4F59\u793C\u7269)\u623F\u95F4['+ce.CONFIG.SPARE_GIFT_ROOM+'] \u9001\u793C\u6210\u529F\uFF0C\u9001\u51FA'+Ne+'\u4E2A'+Ce.gift_name,'success'):window.toast('[\u81EA\u52A8\u9001\u793C](\u5269\u4F59\u793C\u7269)\u623F\u95F4['+ce.CONFIG.SPARE_GIFT_ROOM+'] \u9001\u793C\u5F02\u5E38:'+Me.msg,'caution')},function(){return window.toast('[\u81EA\u52A8\u9001\u793C](\u5269\u4F59\u793C\u7269)\u5305\u88F9\u9001\u793C\u5931\u8D25\uFF0C\u8BF7\u68C0\u67E5\u7F51\u7EDC','error'),Q(function(){return ce.Gift.sendGift(medal)})}));case 55:De.next=63;break;case 57:return De.prev=57,De.t1=De['catch'](2),pe(),window.toast('[\u81EA\u52A8\u9001\u793C]\u8FD0\u884C\u65F6\u51FA\u73B0\u5F02\u5E38\uFF0C\u5DF2\u505C\u6B62','error'),console.error('['+N+']',De.t1),De.abrupt('return',$.Deferred().reject());case 63:return U=!1,Te(),De.abrupt('return',$.Deferred().resolve());case 66:case'end':return De.stop();}},Ie,_e,[[2,57]])}));return function run(){return ue.apply(this,arguments)}}()),_defineProperty(ge,'sendGift',function(){var ue=_asyncToGenerator(regeneratorRuntime.mark(function Ie(pe){var Te,fe,Ee,me,Oe,ve,xe,he,Ce,Ge;return regeneratorRuntime.wrap(function(Ae){for(;;)switch(Ae.prev=Ae.next){case 0:return Ae.next=2,ce.Gift.getBagList();case 2:if(Te=void 0,!(0>=ce.Gift.remain_feed)){Ae.next=6;break}return window.toast('[\u81EA\u52A8\u9001\u793C]\u52CB\u7AE0['+pe.medalName+'] \u9001\u793C\u7ED3\u675F\uFF0C\u4ECA\u65E5\u4EB2\u5BC6\u5EA6\u5DF2\u6EE1['+pe.today_feed+'/'+pe.day_limit+']','info'),Ae.abrupt('return',$.Deferred().resolve());case 6:if(0>=ce.Gift.time&&(ce.Gift.time=X()),ce.CONFIG.SEND_ALL_GIFT){Ae.next=17;break}if(fe=ce.Gift.bag_list.filter(function(Ne){return ce.Gift.sendGiftList.includes(Ne.gift_id)&&0<Ne.gift_num&&Ne.expire_at>ce.Gift.time&&Ne.expire_at-ce.Gift.time<86400*ce.CONFIG.GIFT_LIMIT&&'\u6C38\u4E45'!=Ne.corner_mark}),0!=fe.length){Ae.next=14;break}return ce.Gift.over=!0,Ae.abrupt('return');case 14:Te=fe;case 15:Ae.next=24;break;case 17:if(Ee=ce.Gift.bag_list.filter(function(Ne){return 0<Ne.gift_num&&'\u6C38\u4E45'!=Ne.corner_mark}),0!=Ee.length){Ae.next=23;break}return ce.Gift.over=!0,Ae.abrupt('return');case 23:Te=Ee;case 24:z('bag_list',Te),me=!0,Oe=!1,ve=void 0,Ae.prev=28,xe=regeneratorRuntime.mark(function(){var Ne,ye,De;return regeneratorRuntime.wrap(function(be){for(;;)switch(be.prev=be.next){case 0:if(Ne=Ce.value,!(0>=pe.day_limit-pe.today_feed)){be.next=4;break}return window.toast('[\u81EA\u52A8\u9001\u793C]\u52CB\u7AE0['+pe.medalName+'] \u9001\u793C\u7ED3\u675F\uFF0C\u4ECA\u65E5\u4EB2\u5BC6\u5EA6\u5DF2\u6EE1['+pe.today_feed+'/'+pe.day_limit+']','info'),be.abrupt('return',{v:void 0});case 4:if(ye=ce.Gift.getFeedByGiftID(Ne.gift_id),!(0<ye)){be.next=11;break}if(De=_Mathfloor(ce.Gift.remain_feed/ye),De>Ne.gift_num&&(De=Ne.gift_num),!(0<De)){be.next=11;break}return be.next=11,S.gift.bag_send(P.uid,Ne.gift_id,ce.Gift.ruid,De,Ne.bag_id,ce.Gift.room_id,P.rnd).then(function(Le){z('Gift.sendGift: API.gift.bag_send',Le),0===Le.code?(Ne.gift_num-=De,pe.today_feed+=De*ye,ce.Gift.remain_feed-=De*ye,window.toast('[\u81EA\u52A8\u9001\u793C]\u52CB\u7AE0['+pe.medalName+'] \u9001\u793C\u6210\u529F\uFF0C\u9001\u51FA'+De+'\u4E2A'+Ne.gift_name+'\uFF0C['+pe.today_feed+'/'+pe.day_limit+']\u8DDD\u79BB\u5347\u7EA7\u8FD8\u9700['+ce.Gift.remain_feed+']','success')):window.toast('[\u81EA\u52A8\u9001\u793C]\u52CB\u7AE0['+pe.medalName+'] \u9001\u793C\u5F02\u5E38:'+Le.msg,'caution')},function(){return window.toast('[\u81EA\u52A8\u9001\u793C]\u5305\u88F9\u9001\u793C\u5931\u8D25\uFF0C\u8BF7\u68C0\u67E5\u7F51\u7EDC','error'),Q(function(){return ce.Gift.sendGift(pe)})});case 11:case'end':return be.stop();}},xe,_e)}),he=Te[Symbol.iterator]();case 31:if(me=(Ce=he.next()).done){Ae.next=39;break}return Ae.delegateYield(xe(),'t0',33);case 33:if(Ge=Ae.t0,'object'!==('undefined'==typeof Ge?'undefined':_typeof(Ge))){Ae.next=36;break}return Ae.abrupt('return',Ge.v);case 36:me=!0,Ae.next=31;break;case 39:Ae.next=45;break;case 41:Ae.prev=41,Ae.t1=Ae['catch'](28),Oe=!0,ve=Ae.t1;case 45:Ae.prev=45,Ae.prev=46,!me&&he.return&&he.return();case 48:if(Ae.prev=48,!Oe){Ae.next=51;break}throw ve;case 51:return Ae.finish(48);case 52:return Ae.finish(45);case 53:case'end':return Ae.stop();}},Ie,_e,[[28,41,45,53],[46,,48,52]])}));return function sendGift(){return ue.apply(this,arguments)}}()),ge),MobileHeartBeat:{run:function(){var ue=_asyncToGenerator(regeneratorRuntime.mark(function Ie(){var pe,Te,fe,Ee;return regeneratorRuntime.wrap(function(Oe){for(;;)switch(Oe.prev=Oe.next){case 0:if(!1!=ce.CONFIG.MOBILE_HEARTBEAT){Oe.next=2;break}return Oe.abrupt('return',$.Deferred().resolve());case 2:if(le(ce.CACHE.MobileHeartBeat_TS)){Oe.next=5;break}return Z(ce.MobileHeartBeat.run,'\u79FB\u52A8\u7AEF\u5FC3\u8DF3'),Oe.abrupt('return',$.Deferred().resolve());case 5:if(!1!==P.mobile_verify){Oe.next=9;break}return window.toast('[\u79FB\u52A8\u7AEF\u5FC3\u8DF3]\u672A\u7ED1\u5B9A\u624B\u673A\uFF0C\u5DF2\u505C\u6B62','warning'),z('MobileHeartBeat','\u672A\u7ED1\u5B9A\u624B\u673A mobile_verify = '+P.mobile_verify),Oe.abrupt('return',$.Deferred().resolve());case 9:return pe=function mobileOnline(){R({GM:!0,anonymous:!0,method:'POST',url:'https://api.live.bilibili.com/heartbeat/v1/OnLine/mobileOnline?'+BilibiliToken.signQuery('access_key='+oe.access_token+'&'+ie),data:'room_id='+P.room_id+'&scale=xxhdpi',responseType:'json',headers:te.headers})},Te=function EndFunc(ve){z('MobileHeartBeat GetAward',ve),clearInterval(Ee),ce.CACHE.MobileHeartBeat_TS=V(),ce.saveCache(),Z(ce.MobileHeartBeat.run,'\u79FB\u52A8\u7AEF\u5FC3\u8DF3')},fe=function getWatchingAward(){S.activity.receive_award('double_watch_task').then(function(ve){return 0===ve.code?(window.toast('[\u53CC\u7AEF\u89C2\u770B\u76F4\u64AD]\u5956\u52B1\u9886\u53D6\u6210\u529F','success'),Te(ve),$.Deferred().resolve()):-400===ve.code?(window.toast('[\u53CC\u7AEF\u89C2\u770B\u76F4\u64AD]\u5956\u52B1\u5DF2\u9886\u53D6','info'),Te(ve),$.Deferred().resolve()):(window.toast('[\u53CC\u7AEF\u89C2\u770B\u76F4\u64AD]'+ve,'warning'),Te(ve),$.Deferred().resolve())},function(ve){return window.toast('[\u53CC\u7AEF\u89C2\u770B\u76F4\u64AD]\u5956\u52B1\u9886\u53D6\u5931\u8D25\uFF0C\u8BF7\u68C0\u67E5\u7F51\u7EDC','error'),console.error('MobileHeartBeat GetAward',ve),clearInterval(Ee),Q(function(){return ce.MobileHeartBeat.run()})})},Oe.next=14,ne();case 14:if(Oe.t1=Oe.sent,Oe.t2=void 0,Oe.t0=Oe.t1===Oe.t2,!Oe.t0){Oe.next=19;break}Oe.t0=void 0===oe.access_token;case 19:if(!Oe.t0){Oe.next=22;break}return z('MobileHeartBeat','token\u8BBE\u7F6E\u5931\u8D25'),Oe.abrupt('return');case 22:z('MobileHeartBeat','\u5F00\u59CB\u5BA2\u6237\u7AEF\u5FC3\u8DF3'),pe(),Ee=void 0,Ee=setInterval(function(){return pe()},300000),setTimeout(function(){return fe()},360000);case 27:case'end':return Oe.stop();}},Ie,_e)}));return function run(){return ue.apply(this,arguments)}}()},stormQueue:[],stormBlack:!1,stormIdSet:{add:function add(ue){var Ie=[];try{var pe=JSON.parse(localStorage.getItem(N+'stormIdSet'));Ie=[].concat(pe.list),Ie.push(ue),50<Ie.length&&Ie.splice(0,10),localStorage.setItem(N+'stormIdSet',JSON.stringify({list:Ie})),z(N+'storm_Id_list_add',Ie)}catch(pe){Ie.push(ue),localStorage.setItem(N+'stormIdSet',JSON.stringify({list:Ie}))}},isIn:function isIn(ue){var Ie=[];try{var pe=JSON.parse(localStorage.getItem(N+'stormIdSet'));return Ie=null===pe?[]:[].concat(pe.list),z(N+'storm_Id_list_read',pe),-1<Ie.indexOf(ue)}catch(pe){return localStorage.setItem(N+'stormIdSet',JSON.stringify({list:Ie})),z('\u8BFB\u53D6'+(N+'stormIdSet\u7F13\u5B58\u9519\u8BEF\u5DF2\u91CD\u7F6E')),-1<Ie.indexOf(ue)}}},Storm:{check:function check(ue){return-1<ce.stormQueue.indexOf(ue)},append:function append(ue){ce.stormQueue.push(ue),ce.stormQueue.length>ce.CONFIG.STORM_QUEUE_SIZE&&ce.stormQueue.shift()},over:function over(ue){var Ie=ce.stormQueue.indexOf(ue);-1<Ie&&ce.stormQueue.splice(ue,1)},run:function run(ue){try{return ce.CONFIG.STORM?ce.stormBlack?$.Deferred().resolve():O(ce.CONFIG.TIME_AREA_START_H0UR,ce.CONFIG.TIME_AREA_END_H0UR,ce.CONFIG.TIME_AREA_START_MINUTE,ce.CONFIG.TIME_AREA_END_MINUTE)&&ce.CONFIG.TIME_AREA_DISABLE?(z('\u8282\u594F\u98CE\u66B4','\u81EA\u52A8\u4F11\u7720\uFF0C\u8DF3\u8FC7\u68C0\u6D4Broomid='+ue),$.Deferred().resolve()):S.Storm.check(ue).then(function(Ie){if(z('MY_API.Storm.run: MY_API.API.Storm.check',Ie),0===Ie.code){var pe=Ie.data;return ce.Storm.join(pe.id,pe.roomid,_Mathround(new Date().getTime()/1e3)+pe.time),$.Deferred().resolve()}window.toast('[\u81EA\u52A8\u62BD\u5956][\u8282\u594F\u98CE\u66B4](roomid='+ue+')'+Ie.msg,'caution')},function(){window.toast('[\u81EA\u52A8\u62BD\u5956][\u8282\u594F\u98CE\u66B4]\u68C0\u67E5\u76F4\u64AD\u95F4('+ue+')\u5931\u8D25\uFF0C\u8BF7\u68C0\u67E5\u7F51\u7EDC','error')}):$.Deferred().resolve()}catch(Ie){return window.toast('[\u81EA\u52A8\u62BD\u5956][\u8282\u594F\u98CE\u66B4]\u8FD0\u884C\u65F6\u51FA\u73B0\u5F02\u5E38','error'),console.error('['+N+']',Ie),$.Deferred().reject()}},join:function join(ue,Ie,pe){var Te=function(){var Oe=_asyncToGenerator(regeneratorRuntime.mark(function ve(){var xe,he;return regeneratorRuntime.wrap(function(Ge){for(;;)switch(Ge.prev=Ge.next){case 0:if(Ge.prev=0,ce.Storm.check(ue)){Ge.next=4;break}return clearInterval(Ee),Ge.abrupt('return');case 4:if(xe=_Mathround(new Date().getTime()/1e3),!(xe>pe&&0<pe)){Ge.next=9;break}return ce.Storm.over(ue),clearInterval(Ee),Ge.abrupt('return');case 9:if(me++,!(me>ce.CONFIG.STORM_MAX_COUNT&&0<ce.CONFIG.STORM_MAX_COUNT)){Ge.next=15;break}return ce.Storm.over(ue),clearInterval(Ee),window.toast('[\u81EA\u52A8\u62BD\u5956][\u8282\u594F\u98CE\u66B4]\u62BD\u5956(roomid='+Ie+',id='+ue+')\u5230\u8FBE\u5C1D\u8BD5\u6B21\u6570\u3002\r\n\u5C1D\u8BD5\u6B21\u6570:'+me+',\u8DDD\u79BB\u5230\u671F:'+(pe-xe)+'s','caution'),Ge.abrupt('return');case 15:if(he=void 0,Ge.prev=16,!(ae&&te&&oe.access_token)){Ge.next=23;break}return Ge.next=20,S.Storm.join_ex(ue,Ie,oe.access_token,BilibiliToken.appKey,BilibiliToken.headers);case 20:he=Ge.sent,Ge.next=26;break;case 23:return Ge.next=25,S.Storm.join(ue,captcha_token='',captcha_phrase='',Ie);case 25:he=Ge.sent;case 26:if(z('MY_API.Storm.join: MY_API.API.Storm.join',he),!he.code){Ge.next=51;break}if(-1==he.msg.indexOf('\u9886\u53D6')){Ge.next=33;break}return ce.Storm.over(ue),clearInterval(Ee),window.toast('[\u81EA\u52A8\u62BD\u5956][\u8282\u594F\u98CE\u66B4]\u9886\u53D6(roomid='+Ie+',id='+ue+')\u6210\u529F,'+he.msg+'\r\n\u5C1D\u8BD5\u6B21\u6570:'+me,'success'),Ge.abrupt('return');case 33:if(-1==he.msg.indexOf('\u9A8C\u8BC1\u7801')){Ge.next=39;break}return ce.Storm.over(ue),clearInterval(Ee),ce.stormBlack=!0,window.toast('[\u81EA\u52A8\u62BD\u5956][\u8282\u594F\u98CE\u66B4]\u62BD\u5956(roomid='+Ie+',id='+ue+')\u5931\u8D25,\u7591\u4F3C\u8D26\u53F7\u4E0D\u652F\u6301,'+he.msg,'caution'),Ge.abrupt('return');case 39:if(!(he.data&&0==he.data.length&&-1!=he.msg.indexOf('\u4E0B\u6B21\u8981\u66F4\u5FEB\u4E00\u70B9'))){Ge.next=46;break}return ce.Storm.over(ue),window.toast('[\u81EA\u52A8\u62BD\u5956][\u8282\u594F\u98CE\u66B4]\u62BD\u5956(roomid='+Ie+',id='+ue+')\u7591\u4F3C\u98CE\u66B4\u9ED1\u5C4B,\u7EC8\u6B62\uFF01','error'),clearInterval(Ee),ce.stormBlack=!0,setTimeout(function(){ce.stormBlack=!1},3600000),Ge.abrupt('return');case 46:if(-1!=he.msg.indexOf('\u4E0B\u6B21\u8981\u66F4\u5FEB\u4E00\u70B9')){Ge.next=49;break}return clearInterval(Ee),Ge.abrupt('return');case 49:Ge.next=56;break;case 51:return ce.Storm.over(ue),Statistics.appendGift(he.data.gift_name,he.data.gift_num),window.toast('[\u81EA\u52A8\u62BD\u5956][\u8282\u594F\u98CE\u66B4]\u9886\u53D6(roomid='+Ie+',id='+ue+')\u6210\u529F,'+(he.data.gift_name+'x'+he.data.gift_num)+'\r\n'+he.data.mobile_content+'\r\n\u5C1D\u8BD5\u6B21\u6570:'+me,'success'),clearInterval(Ee),Ge.abrupt('return');case 56:Ge.next=65;break;case 58:return Ge.prev=58,Ge.t0=Ge['catch'](16),ce.Storm.over(ue),window.toast('[\u81EA\u52A8\u62BD\u5956][\u8282\u594F\u98CE\u66B4]\u62BD\u5956(roomid='+Ie+',id='+ue+')\u7591\u4F3C\u89E6\u53D1\u98CE\u63A7,\u7EC8\u6B62\uFF01\r\n\u5C1D\u8BD5\u6B21\u6570:'+me,'error'),console.error(Ge.t0),clearInterval(Ee),Ge.abrupt('return');case 65:Ge.next=74;break;case 67:return Ge.prev=67,Ge.t1=Ge['catch'](0),ce.Storm.over(ue),window.toast('[\u81EA\u52A8\u62BD\u5956][\u8282\u594F\u98CE\u66B4]\u62BD\u5956(roomid='+Ie+',id='+ue+')\u62BD\u5956\u5F02\u5E38,\u7EC8\u6B62\uFF01','error'),console.error(Ge.t1),clearInterval(Ee),Ge.abrupt('return');case 74:case'end':return Ge.stop();}},ve,this,[[0,67],[16,58]])}));return function(){return Oe.apply(this,arguments)}}();if(Ie=parseInt(Ie,10),ue=parseInt(ue,10),isNaN(Ie)||isNaN(ue))return $.Deferred().reject();var fe=_Mathround(ue/1e6);if(ce.stormIdSet.isIn(fe))return $.Deferred().resolve();if(ce.stormIdSet.add(fe),!ce.Storm.check(ue)){ce.Storm.append(ue);var Ee=0;0>=pe&&(pe=_Mathround(new Date().getTime()/1e3)+90);var me=0;return window.toast('[\u81EA\u52A8\u62BD\u5956][\u8282\u594F\u98CE\u66B4]\u5C1D\u8BD5\u62BD\u5956(roomid='+Ie+',id='+ue+')','success'),Ee=setInterval(function(){return Te()},ce.CONFIG.STORM_ONE_LIMIT),$.Deferred().resolve()}}},LITTLE_HEART:{medalRoom_list:[],liveRoom_list:[],getMedalRoomList:function getMedalRoomList(){var ue=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1;return 1===ue&&(ce.LITTLE_HEART.medalRoom_list=[]),S.i.medal(ue,25).then(function(Ie){z('LITTLE_HEART.getMedalRoomList: API.i.medal',Ie);var pe=!0,Te=!1,fe=void 0;try{for(var me,Oe,Ee=Ie.data.fansMedalList[Symbol.iterator]();!(pe=(me=Ee.next()).done);pe=!0)Oe=me.value,ce.LITTLE_HEART.medalRoom_list=ce.LITTLE_HEART.medalRoom_list.concat(Oe.roomid)}catch(Oe){Te=!0,fe=Oe}finally{try{!pe&&Ee.return&&Ee.return()}finally{if(Te)throw fe}}z('MY_API.LITTLE_HEART.medalRoom_list',ce.LITTLE_HEART.medalRoom_list),Ie.data.pageinfo.curPage<Ie.data.pageinfo.totalpages&&ce.LITTLE_HEART.getMedalRoomList(ue+1)},function(){return window.toast('[\u5C0F\u5FC3\u5FC3]\u83B7\u53D6\u52CB\u7AE0\u5217\u8868\u5931\u8D25\uFF0C\u8BF7\u68C0\u67E5\u7F51\u7EDC','error'),Q(function(){return ce.LITTLE_HEART.getMedalRoomList(ue)})})},checkRoomList:function(){var ue=_asyncToGenerator(regeneratorRuntime.mark(function Ie(pe){var Te,fe,Ee,me,Oe,ve,xe;return regeneratorRuntime.wrap(function(Ce){for(;;)switch(Ce.prev=Ce.next){case 0:Te=[],fe=!0,Ee=!1,me=void 0,Ce.prev=4,Oe=pe[Symbol.iterator]();case 6:if(fe=(ve=Oe.next()).done){Ce.next=13;break}return xe=ve.value,Ce.next=10,S.room.get_info(xe).then(function(Ge){if(1===Ge.data.live_status)return void(Te=Te.concat(Ge.data.room_id))},function(){return window.toast('[\u5C0F\u5FC3\u5FC3]\u83B7\u53D6\u623F\u95F4\u4FE1\u606F\u5931\u8D25\uFF0C\u8BF7\u68C0\u67E5\u7F51\u7EDC','error'),Q(function(){return ce.LITTLE_HEART.checkRoomList(pe)})});case 10:fe=!0,Ce.next=6;break;case 13:Ce.next=19;break;case 15:Ce.prev=15,Ce.t0=Ce['catch'](4),Ee=!0,me=Ce.t0;case 19:Ce.prev=19,Ce.prev=20,!fe&&Oe.return&&Oe.return();case 22:if(Ce.prev=22,!Ee){Ce.next=25;break}throw me;case 25:return Ce.finish(22);case 26:return Ce.finish(19);case 27:;if(z('MY_API.LITTLE_HEART.checkRoomList returnRoom',Te),void 0==Te){Ce.next=33;break}return Ce.abrupt('return',Te);case 33:return window.toast('[\u5C0F\u5FC3\u5FC3]\u5F53\u524D\u7C89\u4E1D\u52CB\u7AE0\u5217\u8868\u4E2D\u65E0\u6B63\u5728\u76F4\u64AD\u623F\u95F4\uFF0C5\u5206\u949F\u540E\u91CD\u8BD5'),Ce.abrupt('return',Q(function(){return ce.LITTLE_HEART.getMedalRoomList(page)},3e5));case 35:case'end':return Ce.stop();}},Ie,_e,[[4,15,19,27],[20,,22,26]])}));return function checkRoomList(){return ue.apply(this,arguments)}}(),checkRoom:function(){var ue=_asyncToGenerator(regeneratorRuntime.mark(function Ie(pe){var Te;return regeneratorRuntime.wrap(function(Ee){for(;;)switch(Ee.prev=Ee.next){case 0:return Te=void 0,Ee.next=3,S.room.get_info(pe).then(function(me){Te=1===me.data.live_status},function(){return window.toast('[\u5C0F\u5FC3\u5FC3]\u83B7\u53D6\u623F\u95F4\u4FE1\u606F\u5931\u8D25\uFF0C\u8BF7\u68C0\u67E5\u7F51\u7EDC','error'),Q(function(){return ce.LITTLE_HEART.checkRoomList(roomList)})});case 3:return Ee.abrupt('return',Te);case 4:case'end':return Ee.stop();}},Ie,_e)}));return function checkRoom(){return ue.apply(this,arguments)}}(),doHeartBeat:function(){var ue=_asyncToGenerator(regeneratorRuntime.mark(function Ie(pe){var Te,fe;return regeneratorRuntime.wrap(function(me){for(;;)switch(me.prev=me.next){case 0:if(-1!=B.indexOf(pe)){me.next=2;break}return me.abrupt('return');case 2:z('[\u5C0F\u5FC3\u5FC3]\u6253\u5F00\u623F\u95F4',B),Te=layer.open({title:''+pe,type:2,shade:0,content:'https://live.bilibili.com/'+pe+'?cut',end:function end(){clearTimeout(fe),I(pe,B),I(Te,H)}}),H.push(Te),fe=setTimeout(_asyncToGenerator(regeneratorRuntime.mark(function Oe(){return regeneratorRuntime.wrap(function(xe){for(;;)switch(xe.prev=xe.next){case 0:if(le(ce.CACHE.LittleHeart_TS)){xe.next=3;break}return z('[\u5C0F\u5FC3\u5FC3]','\u4ECA\u65E5\u4EFB\u52A1\u5B8C\u6210\uFF0C\u623F\u95F4'+pe+'\u4E0D\u518D\u6253\u5F00'),xe.abrupt('return');case 3:if(ce.LITTLE_HEART.checkRoom(pe)){xe.next=7;break}return window.toast('[\u5C0F\u5FC3\u5FC3]\u623F\u95F4'+pe+'\u4E0B\u64AD\uFF0C\u518D\u6B21\u5BFB\u627E\u5F00\u64AD\u623F\u95F4','info'),layer.close(Te),xe.abrupt('return',ce.LITTLE_HEART.run());case 7:;return z('[\u5C0F\u5FC3\u5FC3]\u5173\u95ED\u7A97\u53E3 roomId',pe),layer.close(Te),xe.abrupt('return',ce.LITTLE_HEART.doHeartBeat(pe));case 11:case'end':return xe.stop();}},Oe,_e)})),310e3);case 6:case'end':return me.stop();}},Ie,_e)}));return function doHeartBeat(){return ue.apply(this,arguments)}}(),checkHeart:function checkHeart(){var ue=function checkbag(){S.gift.bag_list().then(function(pe){z('[\u5C0F\u5FC3\u5FC3]\u68C0\u67E5\u5305\u88F9',pe);var Te=pe.data.list.filter(function(fe){return 30607==fe.gift_id&&24==fe.gift_num&&'7\u5929'==fe.corner_mark});if(z('[\u5C0F\u5FC3\u5FC3]\u5305\u88F9\u51857\u592924\u4E2A\u5C0F\u5FC3\u5FC3',Te),0<Te.length)return clearInterval(Ie),window.toast('[\u5C0F\u5FC3\u5FC3]\u4ECA\u65E5\u5C0F\u5FC3\u5FC3\u5DF2\u5168\u90E8\u83B7\u53D6','success'),ce.CACHE.LittleHeart_TS=V(),ce.saveCache(),T(H),Z(ce.LITTLE_HEART.run,'\u83B7\u53D6\u5C0F\u5FC3\u5FC3')})};ue();var Ie=setInterval(function(){ue()},310e3)},run:function run(){if(!ce.CONFIG.LITTLE_HEART)return $.Deferred().resolve();if(!le(ce.CACHE.LittleHeart_TS))return Z(ce.LITTLE_HEART.run,'\u83B7\u53D6\u5C0F\u5FC3\u5FC3');var ue=function(){var Ie=_asyncToGenerator(regeneratorRuntime.mark(function pe(){var Te,fe,Ee,me,Oe,ve,xe;return regeneratorRuntime.wrap(function(Ce){for(;;)switch(Ce.prev=Ce.next){case 0:return Ce.next=2,ce.LITTLE_HEART.getMedalRoomList();case 2:return Ce.next=4,ce.LITTLE_HEART.checkRoomList(ce.LITTLE_HEART.medalRoom_list);case 4:B=Ce.sent,Te=0,fe=!0,Ee=!1,me=void 0,Ce.prev=9,Oe=B[Symbol.iterator]();case 11:if(fe=(ve=Oe.next()).done){Ce.next=23;break}if(xe=ve.value,!(Te<ce.CONFIG.MAX_TAB)){Ce.next=19;break}return Ce.next=16,ce.LITTLE_HEART.doHeartBeat(xe);case 16:Te++,Ce.next=20;break;case 19:return Ce.abrupt('break',23);case 20:fe=!0,Ce.next=11;break;case 23:Ce.next=29;break;case 25:Ce.prev=25,Ce.t0=Ce['catch'](9),Ee=!0,me=Ce.t0;case 29:Ce.prev=29,Ce.prev=30,!fe&&Oe.return&&Oe.return();case 32:if(Ce.prev=32,!Ee){Ce.next=35;break}throw me;case 35:return Ce.finish(32);case 36:return Ce.finish(29);case 37:;ce.LITTLE_HEART.checkHeart();case 39:case'end':return Ce.stop();}},pe,_e,[[9,25,29,37],[30,,32,36]])}));return function runFunc(){return Ie.apply(this,arguments)}}();ce.CONFIG.BLOCK_LIVE_VIDEO?ue():layer.confirm('\u82E5\u4E0D\u52FE\u9009\u3010\u62E6\u622A\u6302\u5C0F\u5FC3\u5FC3\u6253\u5F00\u7A97\u53E3\u7684\u76F4\u64AD\u6D41\u3011\u5C06\u8017\u8D39\u5927\u91CF\u6D41\u91CF\uFF0C\u662F\u5426\u7EE7\u7EED\uFF1F',{title:'\u8B66\u544A',btn:['\u662F','\u5426']},_asyncToGenerator(regeneratorRuntime.mark(function Ie(){return regeneratorRuntime.wrap(function(Te){for(;;)switch(Te.prev=Te.next){case 0:layer.msg('\u90A3\u7B97\u4E86\u256E(\uFFE3\u25BD\uFFE3)\u256D',{time:2e3}),ue();case 2:case'end':return Te.stop();}},Ie,_e)})),function(){layer.msg('\u52FE\u9009\u3010\u62E6\u622A\u6302\u5C0F\u5FC3\u5FC3\u6253\u5F00\u7A97\u53E3\u7684\u76F4\u64AD\u6D41\u3011\u540E\u9700\u5237\u65B0\u9875\u9762\u4F7F\u5176\u751F\u6548',{time:2500})})}}};ce.init().then(function(){try{var ue=$.Deferred();(function uniqueCheck(){var pe=Date.now();return 0<=pe-ce.CACHE.UNIQUE_CHECK&&15e3>=pe-ce.CACHE.UNIQUE_CHECK?($('.link-toast').hide(),$('.igiftMsg').hide(),ce.CONFIG.AUTO_TREASUREBOX=!1,window.toast('\u6709\u5176\u4ED6\u76F4\u64AD\u95F4\u9875\u9762\u7684\u811A\u672C\u6B63\u5728\u8FD0\u884C\uFF0C\u672C\u9875\u9762\u811A\u672C\u505C\u6B62\u8FD0\u884C','caution'),ue.reject()):ue.resolve()})().then(function(){var pe,Te=function uniqueMark(){pe=setTimeout(Te,1e4),ce.CACHE.UNIQUE_CHECK=Date.now(),ce.saveCache(!1)};return(window.addEventListener('unload',function(){pe&&(clearTimeout(pe),ce.CACHE.UNIQUE_CHECK=0,ce.saveCache()),T(H)}),Te(),0===parseInt(P.uid)||isNaN(parseInt(P.uid)))?void ce.chatLog('\u672A\u767B\u5F55\uFF0C\u8BF7\u5148\u767B\u5F55\u518D\u4F7F\u7528\u811A\u672C','warning'):void(ce.newMessage(GM_info.script.version),z('MY_API.CONFIG',ce.CONFIG),_(ce))})}catch(ue){console.error('\u91CD\u590D\u8FD0\u884C\u68C0\u6D4B\u9519\u8BEF',ue)}})}function _(_e){'use strict';var ge=function clearStat(){_e.GIFT_COUNT.COUNT=0,_e.GIFT_COUNT.CLEAR_TS=se(),_e.saveGiftCount(),z('\u5DF2\u6E05\u7A7A\u8FA3\u6761\u6570\u91CF')};le(_e.GIFT_COUNT.CLEAR_TS)&&ge(),J(ge,'\u91CD\u7F6E\u7EDF\u8BA1'),_e.LITTLE_HEART.run(),_e.removeUnnecessary(),setTimeout(function(){_e.GroupSign.run(),_e.DailyReward.run(),_e.LiveReward.run(),_e.Exchange.runS2C(),_e.TreasureBox.run(),_e.Gift.run(),_e.MobileHeartBeat.run()},6e3),_e.creatSetBox(),S.room.getList().then(function(pe){z('\u76F4\u64AD\u95F4\u5217\u8868',pe);var Te=!0,fe=!1,Ee=void 0;try{for(var ve,me=function _loop4(){var xe=ve.value;S.room.getRoomList(xe.id,0,0,1,1).then(function(he){z('\u76F4\u64AD\u95F4\u53F7\u5217\u8868',he);for(var Ce=0;Ce<he.data.length;++Ce)_e.listen(he.data[Ce].roomid,P.uid,xe.name+'\u533A')})},Oe=pe.data[Symbol.iterator]();!(Te=(ve=Oe.next()).done);Te=!0)me()}catch(xe){fe=!0,Ee=xe}finally{try{!Te&&Oe.return&&Oe.return()}finally{if(fe)throw Ee}}});var ce=function check_top_room(){if(_e.GIFT_COUNT.COUNT>=_e.CONFIG.MAX_GIFT&&(z('\u8D85\u8FC7\u4ECA\u65E5\u8FA3\u6761\u9650\u5236\uFF0C\u4E0D\u53C2\u4E0E\u62BD\u5956'),_e.max_blocked=!0),_e.blocked||_e.max_blocked)return _e.blocked?(_e.chatLog('\u8FDB\u5165\u5C0F\u9ED1\u5C4B\u68C0\u67E5\u5C0F\u65F6\u699C\u5DF2\u505C\u6B62\u8FD0\u884C'),void clearInterval(ue)):void _e.chatLog('\u8FA3\u6761\u5DF2\u8FBE\u5230\u6700\u5927\u503C\u68C0\u67E5\u5C0F\u65F6\u699C\u5DF2\u505C\u6B62\u8FD0\u884C');if(O(_e.CONFIG.TIME_AREA_START_H0UR,_e.CONFIG.TIME_AREA_END_H0UR,_e.CONFIG.TIME_AREA_START_MINUTE,_e.CONFIG.TIME_AREA_END_MINUTE)&&_e.CONFIG.TIME_AREA_DISABLE)return void _e.chatLog('\u5F53\u524D\u65F6\u95F4\u6BB5\u4E0D\u68C0\u67E5\u5C0F\u65F6\u699C\u793C\u7269','warning');var pe=['\u5C0F\u65F6\u603B\u699C','\u5A31\u4E50\u5C0F\u65F6\u699C','\u7F51\u6E38\u5C0F\u65F6\u699C','\u624B\u6E38\u5C0F\u65F6\u699C','\u7ED8\u753B\u5C0F\u65F6\u699C','\u7535\u53F0\u5C0F\u65F6\u699C','\u5355\u673A\u5C0F\u65F6\u699C'],Te=1,fe=function checkHourRank(me){S.rankdb.getTopRealTimeHour(me).then(function(Oe){var ve=Oe.data.list;_e.chatLog('\u68C0\u67E5'+pe[me]+'\u623F\u95F4\u7684\u793C\u7269','warning'),z(pe[me]+'\u623F\u95F4\u5217\u8868',ve);var xe=!0,he=!1,Ce=void 0;try{for(var Re,Ae,Ge=ve[Symbol.iterator]();!(xe=(Re=Ge.next()).done);xe=!0)Ae=Re.value,_e.checkRoom(Ae.roomid,'\u5C0F\u65F6\u699C-'+Ae.area_v2_parent_name+'\u533A')}catch(Ae){he=!0,Ce=Ae}finally{try{!xe&&Ge.return&&Ge.return()}finally{if(he)throw Ce}}})},Ee=setInterval(function(){Te<=pe.length-1?(fe(Te),Te++):clearInterval(Ee)},1e3)};setTimeout(ce,6e3);var ue=setInterval(ce,parseInt(1e3*_e.CONFIG.CHECK_HOUR_ROOM_INTERVAL)),Ie=function reset(pe){var Te=setTimeout(function(){if(0<_e.raffleId_list.length||0<_e.guardId_list.length||0<_e.pkId_list.length)return z('[\u5237\u65B0\u76F4\u64AD\u95F4]','\u8FD8\u6709\u793C\u7269\u6CA1\u62BD\uFF0C\u5EF6\u8FDF15s\u540E\u5237\u65B0\u76F4\u64AD\u95F4'),void Ie(15000);if(le(_e.CACHE.LittleHeart_TS))return z('[\u5237\u65B0\u76F4\u64AD\u95F4]','\u6B63\u5728\u53D1\u9001\u83B7\u53D6\u5C0F\u5FC3\u5FC3\uFF0C10\u5206\u949F\u540E\u518D\u6B21\u68C0\u67E5'),clearTimeout(Te),void Ie(6e5);if(O(_e.CONFIG.TIME_AREA_START_H0UR,_e.CONFIG.TIME_AREA_END_H0UR,_e.CONFIG.TIME_AREA_START_MINUTE,_e.CONFIG.TIME_AREA_END_MINUTE)&&_e.CONFIG.IN_TIME_RELOAD_DISABLE){var fe=u(_e.CONFIG.TIME_AREA_START_MINUTE,_e.CONFIG.TIME_AREA_END_MINUTE)+6e4;return Ie(fe),void z('[\u5237\u65B0\u76F4\u64AD\u95F4]','\u5904\u4E8E\u4F11\u7720\u65F6\u95F4\u6BB5\uFF0C\u5C06\u5728'+fe+'\u6BEB\u79D2\u540E\u5237\u65B0\u76F4\u64AD\u95F4')}window.location.reload()},pe)};Ie(6e4*_e.CONFIG.TIME_RELOAD)}function u(_e,ge){var ce=new Date,ue=ce.getHours(),Ie=ce.getMinutes(),pe=ce.getSeconds(),Ee=1e3*(3600*_e)+1e3*(60*ge)-(1e3*(3600*ue)+1e3*(60*Ie)+1e3*pe);return z('[getIntervalTime]\u83B7\u53D6\u95F4\u9694\u65F6\u95F4',Ee+'\u6BEB\u79D2'),0>Ee?86400000+Ee:Ee}function I(_e,ge){ge.splice(ge.indexOf(_e),1)}function T(_e){if(_e!=void 0){var ge=!0,ce=!1,ue=void 0;try{for(var pe,Te,Ie=_e[Symbol.iterator]();!(ge=(pe=Ie.next()).done);ge=!0)Te=pe.value,layer.close(Te)}catch(Te){ce=!0,ue=Te}finally{try{!ge&&Ie.return&&Ie.return()}finally{if(ce)throw ue}}}}function f(){0<$('[data-title="Flash\u64AD\u653E\u5668"]').length?$('[data-title="Flash\u64AD\u653E\u5668"]').click():setTimeout(function(){return f()},200)}function E(_e,ge){var ce=new Date,ue=ce.getHours(),Ie=ce.getMinutes();return ue==_e&&Ie==ge||(z('\u9519\u8BEF\u65F6\u95F4'),!1)}function O(_e,ge,ce,ue){if(23<_e||24<ge||0>_e||1>ge||59<ce||0>ce||59<ue||0>ue)return!1;var Ie=new Date,pe=Ie.getHours(),Te=Ie.getMinutes();if(_e<ge)return pe>=_e&&pe<ge||pe==ge&&Te>=ce&&Te<ue;return _e>ge?pe>=_e||pe<ge||pe==ge&&Te>=ce&&Te<ue:_e==ge?pe==_e&&ce<=ue&&Te>=ce&&Te<ue||pe==_e&&ce>ue&&Te<=ue&&Te>ce:void 0}function C(_e){return new Promise(function(ge){setTimeout(function(){ge()},_e)})}function G(_e){if(0>=_e)return!1;var ge=Math.random();return _e/100>=ge}function R(_e){return new Promise(function(ge){var ce=function onerror(ue){console.error('XHR',ue),ge(void 0)};if(_e.GM)'POST'===_e.method&&(void 0===_e.headers&&(_e.headers={}),void 0===_e.headers['Content-Type']&&(_e.headers['Content-Type']='application/x-www-form-urlencoded; charset=utf-8')),_e.timeout=30000,_e.onload=function(ue){ge(ue.response)},_e.onerror=ce,_e.ontimeout=ce,GM_xmlhttpRequest(_e);else{var ue=new XMLHttpRequest;ue.open(_e.method,_e.url),'POST'===_e.method&&null===ue.getResponseHeader('Content-Type')&&ue.setRequestHeader('Content-Type','application/x-www-form-urlencoded; charset=utf-8'),_e.cookie&&(ue.withCredentials=!0),_e.responseType!==void 0&&(ue.responseType=_e.responseType),ue.timeout=30000,ue.onload=function(Ie){var pe=Ie.target;ge({response:pe,body:pe.response})},ue.onerror=ce,ue.ontimeout=ce,ue.send(_e.data)}})}if('block'==D&&/https?:\/\/live\.bilibili\.com\/.*\?cut/.test(window.location.href))return f();window.localStorage.LIVE_PLAYER_STATUS=window.localStorage.LIVE_PLAYER_STATUS.replace('flash','html5');var L=localStorage.getItem(N+'_msgHide')||'hide',S=BilibiliAPI,F=0,w=0,k=0,U=!1,H=[],B=[],P={room_id:void 0,uid:void 0,ruid:void 0,mobile_verify:void 0,gift_list:void 0,rnd:void 0,visit_id:void 0,identification:void 0,bili_jct:void 0},Y=new Date().getTimezoneOffset()+480,V=function ts_ms(){return Date.now()},X=function ts_s(){return _Mathround(V()/1e3)},K=function runUntilSucceed(_e){var ge=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0,ce=2<arguments.length&&arguments[2]!==void 0?arguments[2]:100;setTimeout(function(){_e()||K(_e,ce,ce)},ge)},Q=function delayCall(_e){var ge=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1e4,ce=$.Deferred();return setTimeout(function(){var ue=_e();ue&&ue.then?ue.then(function(Ie,pe,Te,fe,Ee,me){return ce.resolve(Ie,pe,Te,fe,Ee,me)}):ce.resolve()},ge),ce},z=function MYDEBUG(_e){for(var ge=arguments.length,ce=Array(1<ge?ge-1:0),ue=1;ue<ge;ue++)ce[ue-1]=arguments[ue];var Ie=new Date;return Ie='['+N+']['+Ie.getHours()+':'+Ie.getMinutes()+':'+Ie.getSeconds()+':'+Ie.getMilliseconds()+']',1===ce.length?void console.log(Ie,_e+':',ce[0]):void console.log(Ie,_e+':',ce)},Z=function runMidnight(_e,ge){var ce=new Date;ce.setMinutes(ce.getMinutes()+Y),ce.setDate(ce.getDate()+1),ce.setHours(0,1,0,0),ce.setMinutes(ce.getMinutes()-Y),setTimeout(_e,ce-V()),z('runMidnight',(ge||' ')+' '+ce.toString())},J=function runExactMidnight(_e,ge){var ce=new Date;ce.setMinutes(ce.getMinutes()+Y),ce.setDate(ce.getDate()+1),ce.setHours(0,0,0,0),ce.setMinutes(ce.getMinutes()-Y),setTimeout(_e,ce-V()),z('runExactMidnight',(ge||' ')+' '+ce.toString())},ee=function runTomorrow(_e,ge,ce,ue){var Ie=new Date;Ie.setMinutes(Ie.getMinutes()+Y),Ie.setDate(Ie.getDate()+1),Ie.setHours(ge,ce,0,0),Ie.setMinutes(Ie.getMinutes()-Y),setTimeout(_e,Ie-V()),z('runTomorrow',(ue||' ')+' '+Ie.toString())},te=new BilibiliToken,ie='actionKey=appkey&appkey='+BilibiliToken.appKey+'&build=5561000&channel=bili&device=android&mobi_app=android&platform=android&statistics=%7B%22appId%22%3A1%2C%22platform%22%3A3%2C%22version%22%3A%225.57.0%22%2C%22abtest%22%3A%22%22%7D',ae=void 0,oe=JSON.parse(localStorage.getItem(N+'_userToken'))||{},ne=function(){var _e=_asyncToGenerator(regeneratorRuntime.mark(function ge(){return regeneratorRuntime.wrap(function(ue){for(;;)switch(ue.prev=ue.next){case 0:if(!(oe.time>X())){ue.next=4;break}ae=oe,ue.next=10;break;case 4:return ue.next=6,te.getToken();case 6:oe=ue.sent,oe.time=X()+oe.expires_in,localStorage.setItem(N+'_Token',JSON.stringify(oe)),ae=oe;case 10:;return z(N+'_userToken',oe),ue.abrupt('return','OK');case 13:case'end':return ue.stop();}},ge,A)}));return function setToken(){return _e.apply(this,arguments)}}(),de={init:function init(){return de.Toast.init().then(function(){})},Toast:{init:function init(){try{var _e=[];return window.toast=function(ge){var ce=1<arguments.length&&void 0!==arguments[1]?arguments[1]:'info',ue=2<arguments.length&&void 0!==arguments[2]?arguments[2]:5e3;switch(ce){case'success':case'info':break;case'caution':break;case'error':break;default:ce='info';}var Ie=$('<div class="link-toast '+ce+' fixed"><span class="toast-text">'+ge+'</span></div>')[0];document.body.appendChild(Ie),Ie.style.top=document.body.scrollTop+40*_e.length+10+'px',Ie.style.left=document.body.offsetWidth+document.body.scrollLeft-Ie.offsetWidth-5+'px','hide'==L&&$('.link-toast').hide(),_e.push(Ie),setTimeout(function(){Ie.className+=' out',setTimeout(function(){_e.shift(),_e.forEach(function(pe){pe.style.top=parseInt(pe.style.top,10)-40+'px'}),$(Ie).remove()},200)},ue)},$.Deferred().resolve()}catch(_e){return console.error('\u521D\u59CB\u5316\u6D6E\u52A8\u63D0\u793A\u65F6\u51FA\u73B0\u5F02\u5E38',_e),$.Deferred().reject()}}}};de.init(),$(function(){var _e=function loadInfo(ge){setTimeout(function(){var ce='undefined'==typeof unsafeWindow?window:unsafeWindow;ce.BilibiliLive===void 0||0===parseInt(ce.BilibiliLive.UID)||isNaN(parseInt(ce.BilibiliLive.UID))?(_e(1e3),window.toast('['+GM_info.script.name+']\u65E0\u914D\u7F6E\u4FE1\u606F','warning'),z('\u65E0\u914D\u7F6E\u4FE1\u606F')):(P.room_id=ce.BilibiliLive.ROOMID,P.uid=ce.BilibiliLive.UID,S.live_user.get_info_in_room(P.room_id).then(function(ue){z('InitData: API.live_user.get_info_in_room',ue),P.mobile_verify=ue.data.info.mobile_verify,P.identification=ue.data.info.identification}),S.gift.gift_config().then(function(ue){z('InitData: API.gift.gift_config',ue),!!ue.data&&$.isArray(ue.data)?P.gift_list=ue.data:!!ue.data.list&&$.isArray(ue.data.list)?P.gift_list=ue.data.list:(P.gift_list=[{id:6,price:1000},{id:1,price:100},{id:30607,price:5000}],window.toast('\u76F4\u64AD\u95F4\u793C\u7269\u6570\u636E\u83B7\u53D6\u5931\u8D25\uFF0C\u4F7F\u7528\u5907\u7528\u6570\u636E','error'))}),P.bili_jct=S.getCookie('bili_jct'),P.ruid=ce.BilibiliLive.ANCHOR_UID,P.rnd=ce.BilibiliLive.RND,P.visit_id=ce.__statisObserver?ce.__statisObserver.__visitId:'',z('Live_info',P),l())},ge)};_e(1e3),o()}),Array.prototype.remove=function(_e){var ge=this.indexOf(_e);-1<ge&&this.splice(ge,1)};var se=function dateNow(){return Date.now()},le=function checkNewDay(_e){if(0===_e)return!0;var ge=new Date(_e),ce=new Date,ue=ge.getDate(),Ie=ce.getDate();return Ie!==ue}})();